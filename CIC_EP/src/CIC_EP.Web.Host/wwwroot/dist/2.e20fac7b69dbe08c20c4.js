(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{bZ9z:function(e,t,n){"use strict";n.d(t,"a",(function(){return te}));var i,a=n("Q86s"),o=n("W15m"),r=n("FCZ4"),d=n("KALY"),s=n("cSvJ"),l=n("6Fs3"),p=n("TYT/"),c=(n("CbkN"),n("GWLn")),u=n("QJY3"),g=n("Valr"),m=n("ooh5"),f=n("kPyj"),h=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),b=["addWidgetModal"];function v(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"option",19),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;p["\u0275\u0275property"]("value",n.id),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](n.name)}}function y(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",16),p["\u0275\u0275elementStart"](1,"select",17),p["\u0275\u0275listener"]("ngModelChange",(function(e){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"]().selectedWidgetId=e})),p["\u0275\u0275template"](2,v,2,2,"option",18),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var i=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngModel",i.selectedWidgetId),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",i.widgets)}}function w(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",16),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"localize"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"]("",p["\u0275\u0275pipeBind1"](2,1,"NoWidgetAvailableMessage")," "))}var x=function(){return{backdrop:"static"}},C=function(e){function t(t){var n=e.call(this,t)||this;return n.onClose=new p.EventEmitter,n.saving=!1,n}return h(t,e),t.prototype.close=function(){this.onClose.emit(),this.hide()},t.prototype.save=function(){this.onClose.emit(this.selectedWidgetId),this.hide()},t.prototype.show=function(e){this.widgets=e,this.selectedWidgetId=this.widgets&&this.widgets.length?this.widgets[0].id:null,this.modal.show()},t.prototype.hide=function(){this.modal.hide()},t.\u0275fac=function(e){return new(e||t)(p["\u0275\u0275directiveInject"](p.Injector))},t.\u0275cmp=p["\u0275\u0275defineComponent"]({type:t,selectors:[["add-widget-modal"]],viewQuery:function(e,t){var n;1&e&&p["\u0275\u0275staticViewQuery"](b,!0),2&e&&p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.modal=n.first)},outputs:{onClose:"onClose"},features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:16,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade",3,"config"],["addWidgetModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[3,"ngSubmit"],["addWidgetModalForm","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","form-group",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","font-weight-bold",3,"disabled","click"],["type","submit",1,"btn","btn-primary","font-weight-bold",3,"disabled"],[1,"fa","fa-save"],[1,"form-group"],["autoFocus","","size","1","name","selectedWidget",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",0,1),p["\u0275\u0275elementStart"](2,"div",2),p["\u0275\u0275elementStart"](3,"div",3),p["\u0275\u0275elementStart"](4,"form",4,5),p["\u0275\u0275listener"]("ngSubmit",(function(){return t.save()})),p["\u0275\u0275elementStart"](6,"div",6),p["\u0275\u0275elementStart"](7,"h5",7),p["\u0275\u0275elementStart"](8,"span"),p["\u0275\u0275text"](9),p["\u0275\u0275pipe"](10,"localize"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"button",8),p["\u0275\u0275listener"]("click",(function(){return t.close()})),p["\u0275\u0275elementStart"](12,"span",9),p["\u0275\u0275text"](13,"\xd7"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](14,"div",10),p["\u0275\u0275template"](15,y,3,2,"div",11),p["\u0275\u0275template"](16,w,3,3,"div",11),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](17,"div",12),p["\u0275\u0275elementStart"](18,"button",13),p["\u0275\u0275listener"]("click",(function(){return t.close()})),p["\u0275\u0275text"](19),p["\u0275\u0275pipe"](20,"localize"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](21,"button",14),p["\u0275\u0275element"](22,"i",15),p["\u0275\u0275elementStart"](23,"span"),p["\u0275\u0275text"](24),p["\u0275\u0275pipe"](25,"localize"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275property"]("config",p["\u0275\u0275pureFunction0"](15,x)),p["\u0275\u0275advance"](9),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](10,9,"AddWidget")),p["\u0275\u0275advance"](2),p["\u0275\u0275attribute"]("aria-label",t.l("Close")),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngIf",t.widgets&&t.widgets.length>0),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",!t.widgets||0==t.widgets.length),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("disabled",t.saving),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](20,11,"Cancel")),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("disabled",t.saving),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](25,13,"Save")))},directives:[c.a,u["\u0275angular_packages_forms_forms_y"],u.NgControlStatusGroup,u.NgForm,g.n,u.SelectControlValueAccessor,m.a,u.NgControlStatus,u.NgModel,g.m,u.NgSelectOption,u["\u0275angular_packages_forms_forms_x"]],pipes:[f.a],styles:[""]}),t}(a.a),P=n("8wcD"),S=n("NzG9"),E=n("/B8v"),I=n("cS2x"),D=n("h2Ha"),M=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_=["addWidgetModal"],O=["dashboardTabs"],k=["filterModal"],z=["dropdownRenamePage"],W=["dropdownAddPage"];function N(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"button",22),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"](),p["\u0275\u0275reference"](17).show()})),p["\u0275\u0275element"](1,"i",23),p["\u0275\u0275elementEnd"]()}}function A(e,t){1&e&&p["\u0275\u0275elementContainer"](0)}function F(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"button",36),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](n);var e=p["\u0275\u0275nextContext"]().$implicit;return p["\u0275\u0275nextContext"](3).removeItem(e.gridInformation)})),p["\u0275\u0275element"](1,"i",37),p["\u0275\u0275elementEnd"]()}}function V(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"gridster-item",33),p["\u0275\u0275template"](1,A,1,0,"ng-container",34),p["\u0275\u0275template"](2,F,2,0,"button",35),p["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=p["\u0275\u0275nextContext"](3);p["\u0275\u0275property"]("item",n.gridInformation),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngComponentOutlet",n.component),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",i.editModeEnabled)}}var T=function(e){return{"no-tab":e}},B=function(){return{wheelPropagation:!1}};function Q(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"tab",30),p["\u0275\u0275listener"]("selectTab",(function(){p["\u0275\u0275restoreView"](n);var e=t.$implicit;return p["\u0275\u0275nextContext"](2).selectPageTab(e.id)})),p["\u0275\u0275elementStart"](1,"gridster",31),p["\u0275\u0275template"](2,V,3,3,"gridster-item",32),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,a=t.index,o=p["\u0275\u0275nextContext"](2);p["\u0275\u0275propertyInterpolate"]("heading",i.name),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("options",o.options[a])("ngClass",p["\u0275\u0275pureFunction1"](5,T,!o.moreThanOnePage()))("perfectScrollbar",p["\u0275\u0275pureFunction0"](7,B)),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",i.widgets)}}function R(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ul",56),p["\u0275\u0275elementStart"](1,"li",57),p["\u0275\u0275elementStart"](2,"div",58),p["\u0275\u0275elementStart"](3,"label",59),p["\u0275\u0275text"](4),p["\u0275\u0275pipe"](5,"localize"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](6,"input",60),p["\u0275\u0275listener"]("ngModelChange",(function(e){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"](3).addPageInput=e})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](7,"button",61),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](n);var e=p["\u0275\u0275nextContext"](3);return e.addNewPage(e.addPageInput)})),p["\u0275\u0275text"](8),p["\u0275\u0275pipe"](9,"localize"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var i=p["\u0275\u0275nextContext"](3);p["\u0275\u0275advance"](4),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](5,3,"NewPageName")),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngModel",i.addPageInput),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](9,5,"Save"))}}function j(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ul",56),p["\u0275\u0275elementStart"](1,"li",57),p["\u0275\u0275elementStart"](2,"div",58),p["\u0275\u0275elementStart"](3,"label",59),p["\u0275\u0275text"](4),p["\u0275\u0275pipe"](5,"localize"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](6,"input",62),p["\u0275\u0275listener"]("ngModelChange",(function(e){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"](3).renamePageInput=e})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](7,"button",61),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](n);var e=p["\u0275\u0275nextContext"](3);return e.renamePage(e.renamePageInput)})),p["\u0275\u0275text"](8),p["\u0275\u0275pipe"](9,"localize"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var i=p["\u0275\u0275nextContext"](3);p["\u0275\u0275advance"](4),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](5,4,"PageNewName")),p["\u0275\u0275advance"](2),p["\u0275\u0275propertyInterpolate"]("placeholder",i.selectedPage.name),p["\u0275\u0275property"]("ngModel",i.renamePageInput),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](9,6,"Save"))}}function U(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span"),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"localize"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](2,1,"DeletePage")))}function G(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span"),p["\u0275\u0275text"](1),p["\u0275\u0275pipe"](2,"localize"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](2,1,"BackToDefaultPage")))}function Y(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",38),p["\u0275\u0275elementStart"](1,"div",39),p["\u0275\u0275elementStart"](2,"button",40),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"](2).openAddWidgetModal()})),p["\u0275\u0275element"](3,"i",41),p["\u0275\u0275text"](4),p["\u0275\u0275pipe"](5,"localize"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](6," \xa0 "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](7,"div",39),p["\u0275\u0275elementStart"](8,"div",42,43),p["\u0275\u0275listener"]("onShown",(function(){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"](2).addPageDropdownShown()})),p["\u0275\u0275elementStart"](10,"button",44),p["\u0275\u0275element"](11,"i",41),p["\u0275\u0275text"](12),p["\u0275\u0275pipe"](13,"localize"),p["\u0275\u0275element"](14,"span",45),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](15,R,10,7,"ul",46),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](16,"div",47,48),p["\u0275\u0275listener"]("onShown",(function(){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"](2).renamePageDropdownShown()})),p["\u0275\u0275elementStart"](18,"button",49),p["\u0275\u0275element"](19,"i",50),p["\u0275\u0275text"](20),p["\u0275\u0275pipe"](21,"localize"),p["\u0275\u0275element"](22,"span",45),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](23,j,10,8,"ul",46),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](24,"button",51),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"](2).deletePage()})),p["\u0275\u0275element"](25,"i",52),p["\u0275\u0275template"](26,U,3,3,"span",53),p["\u0275\u0275template"](27,G,3,3,"span",53),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](28," \xa0 "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](29,"button",54),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"](2).savePage()})),p["\u0275\u0275element"](30,"i",55),p["\u0275\u0275text"](31),p["\u0275\u0275pipe"](32,"localize"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var i=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("disabled",""===i.selectedPage.id),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](5,13,"AddWidget")),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("dropup",!0)("insideClick",!0),p["\u0275\u0275advance"](4),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](13,15,"AddPage"),""),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("dropup",!0)("insideClick",!0)("isDisabled",""===i.selectedPage.id),p["\u0275\u0275advance"](4),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](21,17,"RenamePage")),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("disabled",""===i.selectedPage.id),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",i.userDashboard&&i.userDashboard.pages.length>1),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",i.userDashboard&&1==i.userDashboard.pages.length),p["\u0275\u0275advance"](4),p["\u0275\u0275textInterpolate1"]("",p["\u0275\u0275pipeBind1"](32,19,"Save")," ")}}var q=function(e){return{"nav-hidden":e}},X=function(){return[]};function $(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275elementStart"](1,"div",24),p["\u0275\u0275elementStart"](2,"div",25),p["\u0275\u0275elementStart"](3,"tabset",26,27),p["\u0275\u0275template"](5,Q,3,8,"tab",28),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](6,Y,33,21,"div",29),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){var n=p["\u0275\u0275nextContext"]();p["\u0275\u0275classMap"](n.containerClass),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("justified",!0)("ngClass",p["\u0275\u0275pureFunction1"](6,q,!n.moreThanOnePage())),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngForOf",(null==n.userDashboard?null:n.userDashboard.pages)||p["\u0275\u0275pureFunction0"](8,X)),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",n.editModeEnabled)}}function H(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"add-widget-modal",63,64),p["\u0275\u0275listener"]("onClose",(function(e){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"]().addWidget(e)})),p["\u0275\u0275elementEnd"]()}}function J(e,t){1&e&&p["\u0275\u0275elementContainer"](0)}function L(e,t){1&e&&p["\u0275\u0275element"](0,"hr")}function Z(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275elementStart"](1,"div",24),p["\u0275\u0275elementStart"](2,"h6",67),p["\u0275\u0275text"](3),p["\u0275\u0275pipe"](4,"localize"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"div",68),p["\u0275\u0275template"](6,J,1,0,"ng-container",34),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](7,L,1,0,"hr",53),p["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=t.index,a=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](4,3,n.name)),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngComponentOutlet",n.component),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",i!=a.userDashboard.filters.length-1)}}function K(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div",65),p["\u0275\u0275template"](1,Z,8,5,"div",66),p["\u0275\u0275elementEnd"]()),2&e){var n=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",n.userDashboard.filters)}}var ee=function(e){return{"switch-primary":e}},te=function(e){function t(t,n,i){var a=e.call(this,t)||this;return a._dashboardViewConfiguration=n,a._dashboardCustomizationServiceProxy=i,a.loading=!0,a.busy=!0,a.editModeEnabled=!1,a.options=[],a.selectedPage={id:"",name:""},a.renamePageInput="",a.addPageInput="",a.onMenuToggle=function(){a.refreshAllGrids()},a}return M(t,e),t.prototype.ngOnInit=function(){var e=this;this.loading=!0,this._dashboardCustomizationServiceProxy.getDashboardDefinition(this.dashboardName,P.a.Applications.Angular).subscribe((function(t){if(e.dashboardDefinition=t,!e.dashboardDefinition.widgets||0===e.dashboardDefinition.widgets.length)return e.loading=!1,void(e.busy=!1);var n=e.getUserDashboard(e.dashboardName);e.initializeUserDashboardDefinition(n,t),e.initializeUserDashboardFilters(),e.selectedPage={id:e.userDashboard.pages[0].id,name:e.userDashboard.pages[0].name},e.loading=!1,e.busy=!1})),this.subAsideTogglerClick()},t.prototype.ngOnDestroy=function(){this.unSubAsideTogglerClick()},t.prototype.initializeUserDashboardDefinition=function(e,t){var n=this;this.userDashboard={dashboardName:this.dashboardName,filters:[],pages:e.Pages.map((function(e){return n.options.push(n.getGridsterConfig()),e.Widgets?(e.Widgets=e.Widgets.filter((function(e){return t.widgets.find((function(t){return t.id===e.WidgetId}))&&n.getWidgetViewDefinition(e.WidgetId)})),{id:e.Id,name:e.Name,widgets:e.Widgets.map((function(e){return{id:e.WidgetId,component:n.getWidgetViewDefinition(e.WidgetId).component,gridInformation:{id:e.WidgetId,cols:e.Width,rows:e.Height,x:e.PositionX,y:e.PositionY}}}))}):{id:e.Id,name:e.Name,widgets:[]}}))}},t.prototype.removeItem=function(e){var t=this,n=this.userDashboard.pages.find((function(e){return e.id===t.selectedPage.id})),i=n.widgets.find((function(t){return t.id===e.id})),a=this.dashboardDefinition.widgets.find((function(t){return t.id===e.id}));i&&a&&this.message.confirm(this.l("WidgetDeleteWarningMessage",this.l(a.name),this.selectedPage.name),this.l("AreYouSure"),(function(e){e&&n.widgets.splice(n.widgets.indexOf(i),1)}))},t.prototype.addWidget=function(e){var t=this;if(e){var n=this._dashboardViewConfiguration.WidgetViewDefinitions.find((function(t){return t.id===e}));n?this.userDashboard.pages.find((function(e){return e.id===t.selectedPage.id})).widgets.find((function(t){return t.id===e}))||(this.busy=!0,this._dashboardCustomizationServiceProxy.addWidget(new d.f({widgetId:e,pageId:this.selectedPage.id,dashboardName:this.dashboardName,width:n.defaultWidth,height:n.defaultHeight,application:P.a.Applications.Angular})).subscribe((function(i){t.userDashboard.pages.find((function(e){return e.id===t.selectedPage.id})).widgets.push({id:e,component:n.component,gridInformation:{id:e,cols:i.width,rows:i.height,x:i.positionX,y:i.positionY}}),t.initializeUserDashboardFilters(),t.busy=!1,t.notify.success(t.l("SavedSuccessfully"))}))):abp.notify.error(this.l("ThereIsNoViewConfigurationForX",e))}},t.prototype.getUserDashboards=function(){var e=this.s("App.DashboardCustomization.Configuration."+P.a.Applications.Angular);return JSON.parse(e)},t.prototype.getUserDashboard=function(e){return this.getUserDashboards().filter((function(t){return t.DashboardName===e}))[0]},t.prototype.getWidgetViewDefinition=function(e){return this._dashboardViewConfiguration.WidgetViewDefinitions.find((function(t){return t.id===e}))},t.prototype.getWidgetFilterViewDefinition=function(e){return this._dashboardViewConfiguration.widgetFilterDefinitions.find((function(t){return t.id===e}))},t.prototype.changeEditMode=function(){this.editModeEnabled=!this.editModeEnabled,this.refreshAllGrids()},t.prototype.refreshAllGrids=function(){var e=this;this.options&&this.options.forEach((function(t){t.draggable.enabled=e.editModeEnabled,t.resizable.enabled=e.editModeEnabled,t.api.optionsChanged()}))},t.prototype.openAddWidgetModal=function(){var e=this,t=this.userDashboard.pages.find((function(t){return t.id===e.selectedPage.id}));if(t){var n=this.dashboardDefinition.widgets.filter((function(e){return!t.widgets.find((function(t){return t.id===e.id}))}));this.addWidgetModal.show(n)}},t.prototype.addNewPage=function(e){var t=this;e&&""!==e.trim()?(e=e.trim(),this.busy=!0,this._dashboardCustomizationServiceProxy.addNewPage(new d.e({dashboardName:this.dashboardName,name:e,application:P.a.Applications.Angular})).subscribe((function(n){t.options.push(t.getGridsterConfig()),t.userDashboard.pages.push({id:n.pageId,name:e,widgets:[]}),t.busy=!1,t.notify.success(t.l("SavedSuccessfully")),""===t.selectedPage.id&&t.selectPageTab(n.pageId)})),this.dropdownAddPage.hide()):this.notify.warn(this.l("PageNameCanNotBeEmpty"))},t.prototype.selectPageTab=function(e){e?(this.selectedPage={id:e,name:this.userDashboard.pages.find((function(t){return t.id===e})).name},this.options.forEach((function(e){e.api&&e.api.optionsChanged()}))):this.selectedPage={id:"",name:""}},t.prototype.renamePage=function(e){var t=this;if(e&&""!==e){e=e.trim(),this.busy=!0;var n=this.selectedPage.id;this._dashboardCustomizationServiceProxy.renamePage(new d.Qb({dashboardName:this.dashboardName,id:n,name:e,application:P.a.Applications.Angular})).subscribe((function(){t.userDashboard.pages.find((function(e){return e.id===n})).name=e,t.notify.success(t.l("Renamed")),t.busy=!1})),this.dropdownRenamePage.hide()}else this.notify.warn(this.l("PageNameCanNotBeEmpty"))},t.prototype.deletePage=function(){var e=this,t=this.l(this.userDashboard.pages.length>1?"PageDeleteWarningMessage":"BackToDefaultPageWarningMessage",this.selectedPage.name);this.message.confirm(t,this.l("AreYouSure"),(function(t){t&&(e.busy=!0,e._dashboardCustomizationServiceProxy.deletePage(e.selectedPage.id,e.dashboardName,P.a.Applications.Angular).subscribe((function(){var t=e.userDashboard.pages.find((function(t){return t.id===e.selectedPage.id}));e.options.pop(),e.userDashboard.pages.splice(e.userDashboard.pages.indexOf(t),1),e.activateFirstPage(),e.busy=!1,e.notify.success(e.l("SuccessfullyRemoved")),0===e.userDashboard.pages.length&&window.location.reload()})))}))},t.prototype.activateFirstPage=function(){var e=this;this.userDashboard.pages[0]?(setTimeout((function(){e.dashboardTabs.tabs[0].active=!0}),0),this.selectPageTab(this.userDashboard.pages[0].id),this.initializeUserDashboardFilters()):this.selectPageTab(null)},t.prototype.savePage=function(){var e=this;this.busy=!0;var t=new d.Xb({dashboardName:this.dashboardName,pages:this.userDashboard.pages.map((function(e){return new d.Fb({id:e.id,name:e.name,widgets:e.widgets.map((function(e){return new d.bd({widgetId:e.gridInformation.id,height:e.gridInformation.rows,width:e.gridInformation.cols,positionX:e.gridInformation.x,positionY:e.gridInformation.y})}))})})),application:P.a.Applications.Angular});this._dashboardCustomizationServiceProxy.savePage(t).subscribe((function(){e.changeEditMode(),e.initializeUserDashboardFilters(),e.busy=!1,e.notify.success(e.l("SavedSuccessfully")),window.location.reload()}))},t.prototype.getGridsterConfig=function(){var e=S.isRtlLang(abp.localization.currentLanguage.name);return{pushItems:!0,draggable:{enabled:this.editModeEnabled},resizable:{enabled:this.editModeEnabled},fixedRowHeight:30,fixedColWidth:30,gridType:"verticalFixed",dirType:e?"rtl":"ltr"}},t.prototype.moreThanOnePage=function(){return this.userDashboard&&this.userDashboard.pages&&this.userDashboard.pages.length>1},t.prototype.close=function(){this.modal.hide()},t.prototype.addPageDropdownShown=function(){this.addPageInput=""},t.prototype.renamePageDropdownShown=function(){this.renamePageInput=""},t.prototype.initializeUserDashboardFilters=function(){var e=this,t=[];this.dashboardDefinition.widgets.filter((function(e){return null!=e.filters&&e.filters.length>0})).forEach((function(n){e.userDashboard.pages&&e.userDashboard.pages.forEach((function(e){0!==e.widgets.filter((function(e){return e.id===n.id})).length&&n.filters.forEach((function(e){t.find((function(t){return t.id===e.id}))||t.push(e)}))}))})),this.userDashboard.filters=t.map((function(t){var n=e.getWidgetFilterViewDefinition(t.id);return n.name=t.name,n}))},t.prototype.subAsideTogglerClick=function(){abp.event.on("app.kt_aside_toggler.onClick",this.onMenuToggle)},t.prototype.unSubAsideTogglerClick=function(){abp.event.off("app.kt_aside_toggler.onClick",this.onMenuToggle)},t.\u0275fac=function(e){return new(e||t)(p["\u0275\u0275directiveInject"](p.Injector),p["\u0275\u0275directiveInject"](o.a),p["\u0275\u0275directiveInject"](d.G))},t.\u0275cmp=p["\u0275\u0275defineComponent"]({type:t,selectors:[["customizable-dashboard"]],viewQuery:function(e,t){var n;1&e&&(p["\u0275\u0275viewQuery"](_,!0),p["\u0275\u0275viewQuery"](O,!0),p["\u0275\u0275staticViewQuery"](k,!0),p["\u0275\u0275viewQuery"](z,!0),p["\u0275\u0275viewQuery"](W,!0)),2&e&&(p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.addWidgetModal=n.first),p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.dashboardTabs=n.first),p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.modal=n.first),p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.dropdownRenamePage=n.first),p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.dropdownAddPage=n.first))},inputs:{dashboardName:"dashboardName"},features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:33,vars:26,consts:[[1,"content","d-flex","flex-column","flex-column-fluid"],[3,"title","description"],["role","actions"],["type","button","class","btn btn-brand btn-icon btn-filter",3,"click",4,"ngIf"],[1,"switch","m-0","p-0"],[1,"m-0","p-0",2,"margin-bottom","-10px !important"],["type","checkbox",3,"checked","change"],[1,"m-0","p-0"],[1,"p-2","pt-4","dashboard-header-text-edit-mode"],[3,"class",4,"ngIf"],[3,"onClose",4,"ngIf"],["appBsModal","","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade","filterModal"],["filterModal","bs-modal"],[1,"modal-dialog","modal-md"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","font-weight-bold",3,"click"],["type","button",1,"btn","btn-brand","btn-icon","btn-filter",3,"click"],[1,"fa","fa-filter"],[1,"row"],[1,"col-md-12",2,"z-index","0"],[3,"justified","ngClass"],["dashboardTabs",""],[3,"heading","selectTab",4,"ngFor","ngForOf"],["class","div-dashboard-customization",4,"ngIf"],[3,"heading","selectTab"],[3,"options","ngClass","perfectScrollbar"],[3,"item",4,"ngFor","ngForOf"],[3,"item"],[4,"ngComponentOutlet"],["class","btn btn-sm text-white bg-danger deleteWidgetButton",3,"click",4,"ngIf"],[1,"btn","btn-sm","text-white","bg-danger","deleteWidgetButton",3,"click"],[1,"fa","fa-times"],[1,"div-dashboard-customization"],[1,"vr"],["type","button","id","AddWidgetButton",1,"btn","btn-sm","btn-warning","btn-elevate-hover","btn-pill",3,"disabled","click"],[1,"fa","fa-plus"],["dropdown","",1,"btn-group",3,"dropup","insideClick","onShown"],["dropdownAddPage","bs-dropdown"],["dropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","btn-sm","btn-primary","dropdown-toggle","btn-elevate-hover","btn-pill"],[1,"caret"],["class","dropdown-menu p-10","role","menu","aria-labelledby","button-basic",4,"dropdownMenu"],["dropdown","",1,"btn-group",3,"dropup","insideClick","isDisabled","onShown"],["dropdownRenamePage","bs-dropdown"],["dropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","btn-sm","btn-info","btn-elevate-hover","btn-pill","dropdown-toggle"],[1,"fa","fa-edit"],["id","DeletePageButton",1,"btn","btn-sm","btn-danger","btn-elevate-hover","btn-pill",3,"disabled","click"],[1,"fa","fa-trash"],[4,"ngIf"],["type","button",1,"btn","btn-sm","btn-success","btn-elevate-hover","btn-pill",3,"click"],[1,"fa","fa-save"],["role","menu","aria-labelledby","button-basic",1,"dropdown-menu","p-10"],["role","menuitem"],[1,"form-group"],["for","PageNameInput"],["type","text","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-block","btn-info",3,"click"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[3,"onClose"],["addWidgetModal",""],[1,"modal-body"],[4,"ngFor","ngForOf"],[2,"margin-left","10px"],[1,"col-md-12"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275elementStart"](1,"div",0),p["\u0275\u0275elementStart"](2,"sub-header",1),p["\u0275\u0275pipe"](3,"localize"),p["\u0275\u0275pipe"](4,"localize"),p["\u0275\u0275elementStart"](5,"div",2),p["\u0275\u0275template"](6,N,2,0,"button",3),p["\u0275\u0275elementStart"](7,"span",4),p["\u0275\u0275elementStart"](8,"label",5),p["\u0275\u0275elementStart"](9,"input",6),p["\u0275\u0275listener"]("change",(function(){return t.changeEditMode()})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](10,"span",7),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"strong",8),p["\u0275\u0275text"](12),p["\u0275\u0275pipe"](13,"localize"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](14,$,7,9,"div",9),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](15,H,2,0,"add-widget-modal",10),p["\u0275\u0275elementStart"](16,"div",11,12),p["\u0275\u0275elementStart"](18,"div",13),p["\u0275\u0275elementStart"](19,"div",14),p["\u0275\u0275elementStart"](20,"div",15),p["\u0275\u0275elementStart"](21,"h5",16),p["\u0275\u0275elementStart"](22,"span"),p["\u0275\u0275text"](23),p["\u0275\u0275pipe"](24,"localize"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](25,"button",17),p["\u0275\u0275listener"]("click",(function(){return t.close()})),p["\u0275\u0275elementStart"](26,"span",18),p["\u0275\u0275text"](27,"\xd7"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](28,K,2,1,"div",19),p["\u0275\u0275elementStart"](29,"div",20),p["\u0275\u0275elementStart"](30,"button",21),p["\u0275\u0275listener"]("click",(function(){return t.close()})),p["\u0275\u0275text"](31),p["\u0275\u0275pipe"](32,"localize"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275property"]("@routerTransition",void 0),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("title",p["\u0275\u0275pipeBind1"](3,14,"Dashboard"))("description",p["\u0275\u0275pipeBind1"](4,16,"DashboardHeaderInfo")),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngIf",!t.loading&&t.userDashboard&&t.userDashboard.filters&&t.userDashboard.filters.length>0),p["\u0275\u0275advance"](1),p["\u0275\u0275classMap"](p["\u0275\u0275pureFunction1"](24,ee,t.editModeEnabled)),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("checked",t.editModeEnabled),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](13,18,"EditMode")," "),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",!t.loading),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.dashboardName),p["\u0275\u0275advance"](8),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](24,20,"DashboardFilters")),p["\u0275\u0275advance"](2),p["\u0275\u0275attribute"]("aria-label",t.l("Close")),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",t.userDashboard),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](32,22,"Close")))},directives:[E.b,g.n,c.a,s.d,g.k,g.m,s.a,I.a,D.c,I.b,g.l,l.a,l.d,l.b,u.DefaultValueAccessor,u.NgControlStatus,u.NgModel,C],pipes:[f.a],styles:['.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:24px;margin:0;top:0}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:16px;width:16px;left:4px;bottom:4px;background-color:#fff}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(26px)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}.deleteWidgetButton[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:22px;padding:0 7px!important;height:22px;border-radius:0 0 0 10px;box-shadow:none;outline:none;text-align:center;border:0!important;z-index:1002}gridster[_ngcontent-%COMP%]{height:calc(100vh - 300px);background:none}gridster.no-tab[_ngcontent-%COMP%]{height:calc(100vh - 230px)}[_nghost-%COMP%]     gridster .gridster-row{border-top:1px dotted #c1c1c1!important;border-bottom:1px dotted #c1c1c1!important}[_nghost-%COMP%]     gridster .gridster-column{border-left:1px dotted #c1c1c1!important;border-right:1px dotted #c1c1c1!important}.div-dashboard-customization[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:120;background-color:#cecece;border-radius:10px;padding:15px}.div-dashboard-customization[_ngcontent-%COMP%]   .vr[_ngcontent-%COMP%]{border-right:1px solid #fff;float:left;margin-right:8px}[_nghost-%COMP%]     tabset.nav-hidden .nav-tabs{display:none}.btn-filter[_ngcontent-%COMP%]{margin-right:8px}[_nghost-%COMP%]     gridster .kt-portlet{margin:0;height:100%}[_nghost-%COMP%]     gridster .kt-portlet__body{overflow:auto}.div-dashboard-customization[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 3px}.filterModal[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:10px}gridster-item[_ngcontent-%COMP%]{background:none}'],data:{animation:[Object(r.b)()]}}),t}(a.a)}}]);