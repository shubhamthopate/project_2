(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{5756:function(e,t,n){var r=function(){"use strict";return r=function(e){if(this.REQUEST_TYPE={LOGIN:"LOGIN",RENEW_TOKEN:"RENEW_TOKEN",UNKNOWN:"UNKNOWN"},this.RESPONSE_TYPE={ID_TOKEN_TOKEN:"id_token token",TOKEN:"token"},this.CONSTANTS={ACCESS_TOKEN:"access_token",EXPIRES_IN:"expires_in",ID_TOKEN:"id_token",ERROR_DESCRIPTION:"error_description",SESSION_STATE:"session_state",ERROR:"error",STORAGE:{TOKEN_KEYS:"adal.token.keys",ACCESS_TOKEN_KEY:"adal.access.token.key",EXPIRATION_KEY:"adal.expiration.key",STATE_LOGIN:"adal.state.login",STATE_RENEW:"adal.state.renew",NONCE_IDTOKEN:"adal.nonce.idtoken",SESSION_STATE:"adal.session.state",USERNAME:"adal.username",IDTOKEN:"adal.idtoken",ERROR:"adal.error",ERROR_DESCRIPTION:"adal.error.description",LOGIN_REQUEST:"adal.login.request",LOGIN_ERROR:"adal.login.error",RENEW_STATUS:"adal.token.renew.status",ANGULAR_LOGIN_REQUEST:"adal.angular.login.request"},RESOURCE_DELIMETER:"|",CACHE_DELIMETER:"||",LOADFRAME_TIMEOUT:6e3,TOKEN_RENEW_STATUS_CANCELED:"Canceled",TOKEN_RENEW_STATUS_COMPLETED:"Completed",TOKEN_RENEW_STATUS_IN_PROGRESS:"In Progress",LOGGING_LEVEL:{ERROR:0,WARN:1,INFO:2,VERBOSE:3},LEVEL_STRING_MAP:{0:"ERROR:",1:"WARNING:",2:"INFO:",3:"VERBOSE:"},POPUP_WIDTH:483,POPUP_HEIGHT:600},r.prototype._singletonInstance)return r.prototype._singletonInstance;if(r.prototype._singletonInstance=this,this.instance="https://login.microsoftonline.com/",this.config={},this.callback=null,this.popUp=!1,this.isAngular=!1,this._user=null,this._activeRenewals={},this._loginInProgress=!1,this._acquireTokenInProgress=!1,this._renewStates=[],this._callBackMappedToRenewStates={},this._callBacksMappedToRenewStates={},this._openedWindows=[],this._requestType=this.REQUEST_TYPE.LOGIN,window._adalInstance=this,e.displayCall&&"function"!=typeof e.displayCall)throw new Error("displayCall is not a function");if(!e.clientId)throw new Error("clientId is required");this.config=this._cloneConfig(e),void 0===this.config.navigateToLoginRequestUrl&&(this.config.navigateToLoginRequestUrl=!0),this.config.popUp&&(this.popUp=!0),this.config.callback&&"function"==typeof this.config.callback&&(this.callback=this.config.callback),this.config.instance&&(this.instance=this.config.instance),this.config.loginResource||(this.config.loginResource=this.config.clientId),this.config.redirectUri||(this.config.redirectUri=window.location.href.split("?")[0].split("#")[0]),this.config.postLogoutRedirectUri||(this.config.postLogoutRedirectUri=window.location.href.split("?")[0].split("#")[0]),this.config.anonymousEndpoints||(this.config.anonymousEndpoints=[]),this.config.isAngular&&(this.isAngular=this.config.isAngular),this.config.loadFrameTimeout&&(this.CONSTANTS.LOADFRAME_TIMEOUT=this.config.loadFrameTimeout)},"undefined"!=typeof window&&(window.Logging={piiLoggingEnabled:!1,level:0,log:function(e){}}),r.prototype.login=function(){if(this._loginInProgress)this.info("Login in progress");else{this._loginInProgress=!0;var e=this._guid();this.config.state=e,this._idTokenNonce=this._guid();var t=this._getItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST);t&&""!==t?this._saveItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST,""):t=window.location.href,this.verbose("Expected state: "+e+" startPage:"+t),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,t),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,e,!0),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"");var n=this._getNavigateUrl("id_token",null)+"&nonce="+encodeURIComponent(this._idTokenNonce);this.config.displayCall?this.config.displayCall(n):this.popUp?(this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,""),this._renewStates.push(e),this.registerCallback(e,this.config.clientId,this.callback),this._loginPopup(n)):this.promptUser(n)}},r.prototype._openPopup=function(e,t,n,r){try{var i=window.screenLeft?window.screenLeft:window.screenX,o=window.screenTop?window.screenTop:window.screenY,a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=window.open(e,t,"width="+n+", height="+r+", top="+(s/2-r/2+o)+", left="+(a/2-n/2+i));return c.focus&&c.focus(),c}catch(l){return this.warn("Error opening popup, "+l.message),this._loginInProgress=!1,this._acquireTokenInProgress=!1,null}},r.prototype._handlePopupError=function(e,t,n,r,i){this.warn(r),this._saveItem(this.CONSTANTS.STORAGE.ERROR,n),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,r),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,i),t&&this._activeRenewals[t]&&(this._activeRenewals[t]=null),this._loginInProgress=!1,this._acquireTokenInProgress=!1,e&&e(r,null,n)},r.prototype._loginPopup=function(e,t,n){var r=this._openPopup(e,"login",this.CONSTANTS.POPUP_WIDTH,this.CONSTANTS.POPUP_HEIGHT),i=n||this.callback;if(null!=r){if(this._openedWindows.push(r),-1!=this.config.redirectUri.indexOf("#"))var o=this.config.redirectUri.split("#")[0];else o=this.config.redirectUri;var a=this,s=window.setInterval((function(){if(!r||r.closed||void 0===r.closed){var e="Popup Window closed",n="Popup Window closed by UI action/ Popup Window handle destroyed due to cross zone navigation in IE/Edge";return a.isAngular&&a._broadcast("adal:popUpClosed",n+a.CONSTANTS.RESOURCE_DELIMETER+e),a._handlePopupError(i,t,e,n,n),void window.clearInterval(s)}try{var c=r.location;if(-1!=encodeURI(c.href).indexOf(encodeURI(o)))return a.isAngular?a._broadcast("adal:popUpHashChanged",c.hash):a.handleWindowCallback(c.hash),window.clearInterval(s),a._loginInProgress=!1,a._acquireTokenInProgress=!1,a.info("Closing popup window"),a._openedWindows=[],void r.close()}catch(l){}}),1)}else{var c="Popup Window is null. This can happen if you are using IE";this._handlePopupError(i,t,"Error opening popup",c,c)}},r.prototype._broadcast=function(e,t){!function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}();var n=new CustomEvent(e,{detail:t});window.dispatchEvent(n)},r.prototype.loginInProgress=function(){return this._loginInProgress},r.prototype._hasResource=function(e){var t=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS);return t&&!this._isEmpty(t)&&t.indexOf(e+this.CONSTANTS.RESOURCE_DELIMETER)>-1},r.prototype.getCachedToken=function(e){if(!this._hasResource(e))return null;var t=this._getItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e),n=this._getItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e),r=this.config.expireOffsetSeconds||300;return n&&n>this._now()+r?t:(this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e,""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e,0),null)},r.prototype.getCachedUser=function(){if(this._user)return this._user;var e=this._getItem(this.CONSTANTS.STORAGE.IDTOKEN);return this._user=this._createUser(e),this._user},r.prototype.registerCallback=function(e,t,n){this._activeRenewals[t]=e,this._callBacksMappedToRenewStates[e]||(this._callBacksMappedToRenewStates[e]=[]);var r=this;this._callBacksMappedToRenewStates[e].push(n),this._callBackMappedToRenewStates[e]||(this._callBackMappedToRenewStates[e]=function(n,i,o,a){r._activeRenewals[t]=null;for(var s=0;s<r._callBacksMappedToRenewStates[e].length;++s)try{r._callBacksMappedToRenewStates[e][s](n,i,o,a)}catch(o){r.warn(o)}r._callBacksMappedToRenewStates[e]=null,r._callBackMappedToRenewStates[e]=null})},r.prototype._renewToken=function(e,t,n){this.info("renewToken is called for resource:"+e);var r=this._addAdalFrame("adalRenewFrame"+e),i=this._guid()+"|"+e;this.config.state=i,this._renewStates.push(i),this.verbose("Renew token Expected state: "+i);var o=this._urlRemoveQueryStringParameter(this._getNavigateUrl(n=n||"token",e),"prompt");n===this.RESPONSE_TYPE.ID_TOKEN_TOKEN&&(this._idTokenNonce=this._guid(),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),o+="&nonce="+encodeURIComponent(this._idTokenNonce)),o=this._addHintParameters(o+="&prompt=none"),this.registerCallback(i,e,t),this.verbosePii("Navigate to:"+o),r.src="about:blank",this._loadFrameTimeout(o,"adalRenewFrame"+e,e)},r.prototype._renewIdToken=function(e,t){this.info("renewIdToken is called");var n=this._addAdalFrame("adalIdTokenFrame"),r=this._guid()+"|"+this.config.clientId;this._idTokenNonce=this._guid(),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),this.config.state=r,this._renewStates.push(r),this.verbose("Renew Idtoken Expected state: "+r);var i=null==t?null:this.config.clientId,o=this._urlRemoveQueryStringParameter(this._getNavigateUrl(t=t||"id_token",i),"prompt");o=this._addHintParameters(o+="&prompt=none"),o+="&nonce="+encodeURIComponent(this._idTokenNonce),this.registerCallback(r,this.config.clientId,e),this.verbosePii("Navigate to:"+o),n.src="about:blank",this._loadFrameTimeout(o,"adalIdTokenFrame",this.config.clientId)},r.prototype._urlContainsQueryStringParameter=function(e,t){return new RegExp("[\\?&]"+e+"=").test(t)},r.prototype._urlRemoveQueryStringParameter=function(e,t){var n=new RegExp("(\\&"+t+"=)[^&]+");return e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+&"),e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+"),e.replace(n,"")},r.prototype._loadFrameTimeout=function(e,t,n){this.verbose("Set loading state to pending for: "+n),this._saveItem(this.CONSTANTS.STORAGE.RENEW_STATUS+n,this.CONSTANTS.TOKEN_RENEW_STATUS_IN_PROGRESS),this._loadFrame(e,t);var r=this;setTimeout((function(){if(r._getItem(r.CONSTANTS.STORAGE.RENEW_STATUS+n)===r.CONSTANTS.TOKEN_RENEW_STATUS_IN_PROGRESS){r.verbose("Loading frame has timed out after: "+r.CONSTANTS.LOADFRAME_TIMEOUT/1e3+" seconds for resource "+n);var e=r._activeRenewals[n];e&&r._callBackMappedToRenewStates[e]&&r._callBackMappedToRenewStates[e]("Token renewal operation failed due to timeout",null,"Token Renewal Failed"),r._saveItem(r.CONSTANTS.STORAGE.RENEW_STATUS+n,r.CONSTANTS.TOKEN_RENEW_STATUS_CANCELED)}}),r.CONSTANTS.LOADFRAME_TIMEOUT)},r.prototype._loadFrame=function(e,t){var n=this;n.info("LoadFrame: "+t);var r=t;setTimeout((function(){var t=n._addAdalFrame(r);""!==t.src&&"about:blank"!==t.src||(t.src=e,n._loadFrame(e,r))}),500)},r.prototype.acquireToken=function(e,t){if(this._isEmpty(e))return this.warn("resource is required"),void t("resource is required",null,"resource is required");var n=this.getCachedToken(e);return n?(this.info("Token is already in cache for resource:"+e),void t(null,n,null)):this._user||this.config.extraQueryParameter&&-1!==this.config.extraQueryParameter.indexOf("login_hint")?void(this._activeRenewals[e]?this.registerCallback(this._activeRenewals[e],e,t):(this._requestType=this.REQUEST_TYPE.RENEW_TOKEN,e===this.config.clientId?this._user?(this.verbose("renewing idtoken"),this._renewIdToken(t)):(this.verbose("renewing idtoken and access_token"),this._renewIdToken(t,this.RESPONSE_TYPE.ID_TOKEN_TOKEN)):this._user?(this.verbose("renewing access_token"),this._renewToken(e,t)):(this.verbose("renewing idtoken and access_token"),this._renewToken(e,t,this.RESPONSE_TYPE.ID_TOKEN_TOKEN)))):(this.warn("User login is required"),void t("User login is required",null,"login required"))},r.prototype.acquireTokenPopup=function(e,t,n,r){if(this._isEmpty(e))return this.warn("resource is required"),void r("resource is required",null,"resource is required");if(!this._user)return this.warn("User login is required"),void r("User login is required",null,"login required");if(this._acquireTokenInProgress)return this.warn("Acquire token interactive is already in progress"),void r("Acquire token interactive is already in progress",null,"Acquire token interactive is already in progress");var i=this._guid()+"|"+e;this.config.state=i,this._renewStates.push(i),this._requestType=this.REQUEST_TYPE.RENEW_TOKEN,this.verbose("Renew token Expected state: "+i);var o=this._urlRemoveQueryStringParameter(this._getNavigateUrl("token",e),"prompt");if(o+="&prompt=select_account",t&&(o+=t),n&&-1===o.indexOf("&claims"))o+="&claims="+encodeURIComponent(n);else if(n&&-1!==o.indexOf("&claims"))throw new Error("Claims cannot be passed as an extraQueryParameter");o=this._addHintParameters(o),this._acquireTokenInProgress=!0,this.info("acquireToken interactive is called for the resource "+e),this.registerCallback(i,e,r),this._loginPopup(o,e,r)},r.prototype.acquireTokenRedirect=function(e,t,n){if(this._isEmpty(e))return this.warn("resource is required"),void r("resource is required",null,"resource is required");var r=this.callback;if(!this._user)return this.warn("User login is required"),void r("User login is required",null,"login required");if(this._acquireTokenInProgress)return this.warn("Acquire token interactive is already in progress"),void r("Acquire token interactive is already in progress",null,"Acquire token interactive is already in progress");var i=this._guid()+"|"+e;this.config.state=i,this.verbose("Renew token Expected state: "+i);var o=this._urlRemoveQueryStringParameter(this._getNavigateUrl("token",e),"prompt");if(o+="&prompt=select_account",t&&(o+=t),n&&-1===o.indexOf("&claims"))o+="&claims="+encodeURIComponent(n);else if(n&&-1!==o.indexOf("&claims"))throw new Error("Claims cannot be passed as an extraQueryParameter");o=this._addHintParameters(o),this._acquireTokenInProgress=!0,this.info("acquireToken interactive is called for the resource "+e),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,window.location.href),this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,i,!0),this.promptUser(o)},r.prototype.promptUser=function(e){e?(this.infoPii("Navigate to:"+e),window.location.replace(e)):this.info("Navigate url is empty")},r.prototype.clearCache=function(){this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,""),this._saveItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST,""),this._saveItem(this.CONSTANTS.STORAGE.SESSION_STATE,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,""),this._renewStates=[],this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,""),this._saveItem(this.CONSTANTS.STORAGE.IDTOKEN,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,"");var e=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS);if(!this._isEmpty(e)){e=e.split(this.CONSTANTS.RESOURCE_DELIMETER);for(var t=0;t<e.length&&""!==e[t];t++)this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e[t],""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e[t],0)}this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,"")},r.prototype.clearCacheForResource=function(e){this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),this._hasResource(e)&&(this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e,""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e,0))},r.prototype.logOut=function(){var e;if(this.clearCache(),this._user=null,this.config.logOutUri)e=this.config.logOutUri;else{var t="common",n="";this.config.tenant&&(t=this.config.tenant),this.config.postLogoutRedirectUri&&(n="post_logout_redirect_uri="+encodeURIComponent(this.config.postLogoutRedirectUri)),e=this.instance+t+"/oauth2/logout?"+n}this.infoPii("Logout navigate to: "+e),this.promptUser(e)},r.prototype._isEmpty=function(e){return void 0===e||!e||0===e.length},r.prototype.getUser=function(e){if("function"!=typeof e)throw new Error("callback is not a function");if(this._user)e(null,this._user);else{var t=this._getItem(this.CONSTANTS.STORAGE.IDTOKEN);this._isEmpty(t)?(this.warn("User information is not available"),e("User information is not available",null)):(this.info("User exists in cache: "),this._user=this._createUser(t),e(null,this._user))}},r.prototype._addHintParameters=function(e){if(this._user&&this._user.profile)if(this._user.profile.sid&&-1!==e.indexOf("&prompt=none"))this._urlContainsQueryStringParameter("sid",e)||(e+="&sid="+encodeURIComponent(this._user.profile.sid));else if(this._user.profile.upn&&(this._urlContainsQueryStringParameter("login_hint",e)||(e+="&login_hint="+encodeURIComponent(this._user.profile.upn)),!this._urlContainsQueryStringParameter("domain_hint",e)&&this._user.profile.upn.indexOf("@")>-1)){var t=this._user.profile.upn.split("@");e+="&domain_hint="+encodeURIComponent(t[t.length-1])}return e},r.prototype._createUser=function(e){var t=null,n=this._extractIdToken(e);return n&&n.hasOwnProperty("aud")&&(n.aud.toLowerCase()===this.config.clientId.toLowerCase()?(t={userName:"",profile:n},n.hasOwnProperty("upn")?t.userName=n.upn:n.hasOwnProperty("email")&&(t.userName=n.email)):this.warn("IdToken has invalid aud field")),t},r.prototype._getHash=function(e){return e.indexOf("#/")>-1?e=e.substring(e.indexOf("#/")+2):e.indexOf("#")>-1&&(e=e.substring(1)),e},r.prototype.isCallback=function(e){e=this._getHash(e);var t=this._deserialize(e);return t.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)||t.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)||t.hasOwnProperty(this.CONSTANTS.ID_TOKEN)},r.prototype.getLoginError=function(){return this._getItem(this.CONSTANTS.STORAGE.LOGIN_ERROR)},r.prototype.getRequestInfo=function(e){e=this._getHash(e);var t=this._deserialize(e),n={valid:!1,parameters:{},stateMatch:!1,stateResponse:"",requestType:this.REQUEST_TYPE.UNKNOWN};if(t&&(n.parameters=t,t.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)||t.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)||t.hasOwnProperty(this.CONSTANTS.ID_TOKEN))){if(n.valid=!0,!t.hasOwnProperty("state"))return this.warn("No state returned"),n;if(this.verbose("State: "+t.state),n.stateResponse=t.state,this._matchState(n))return n;if(!n.stateMatch&&window.parent){n.requestType=this._requestType;for(var r=this._renewStates,i=0;i<r.length;i++)if(r[i]===n.stateResponse){n.stateMatch=!0;break}}}return n},r.prototype._matchNonce=function(e){var t=this._getItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN);if(t){t=t.split(this.CONSTANTS.CACHE_DELIMETER);for(var n=0;n<t.length;n++)if(t[n]===e.profile.nonce)return!0}return!1},r.prototype._matchState=function(e){var t=this._getItem(this.CONSTANTS.STORAGE.STATE_LOGIN);if(t){t=t.split(this.CONSTANTS.CACHE_DELIMETER);for(var n=0;n<t.length;n++)if(t[n]===e.stateResponse)return e.requestType=this.REQUEST_TYPE.LOGIN,e.stateMatch=!0,!0}var r=this._getItem(this.CONSTANTS.STORAGE.STATE_RENEW);if(r)for(r=r.split(this.CONSTANTS.CACHE_DELIMETER),n=0;n<r.length;n++)if(r[n]===e.stateResponse)return e.requestType=this.REQUEST_TYPE.RENEW_TOKEN,e.stateMatch=!0,!0;return!1},r.prototype._getResourceFromState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},r.prototype.saveTokenFromHash=function(e){this.info("State status:"+e.stateMatch+"; Request type:"+e.requestType),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"");var t,n=this._getResourceFromState(e.stateResponse);e.parameters.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)?(this.infoPii("Error :"+e.parameters.error+"; Error description:"+e.parameters[this.CONSTANTS.ERROR_DESCRIPTION]),this._saveItem(this.CONSTANTS.STORAGE.ERROR,e.parameters.error),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,e.parameters[this.CONSTANTS.ERROR_DESCRIPTION]),e.requestType===this.REQUEST_TYPE.LOGIN&&(this._loginInProgress=!1,this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,e.parameters.error_description))):e.stateMatch?(this.info("State is right"),e.parameters.hasOwnProperty(this.CONSTANTS.SESSION_STATE)&&this._saveItem(this.CONSTANTS.STORAGE.SESSION_STATE,e.parameters[this.CONSTANTS.SESSION_STATE]),e.parameters.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)&&(this.info("Fragment has access token"),this._hasResource(n)||(t=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS)||"",this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,t+n+this.CONSTANTS.RESOURCE_DELIMETER)),this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+n,e.parameters[this.CONSTANTS.ACCESS_TOKEN]),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+n,this._expiresIn(e.parameters[this.CONSTANTS.EXPIRES_IN]))),e.parameters.hasOwnProperty(this.CONSTANTS.ID_TOKEN)&&(this.info("Fragment has id token"),this._loginInProgress=!1,this._user=this._createUser(e.parameters[this.CONSTANTS.ID_TOKEN]),this._user&&this._user.profile?this._matchNonce(this._user)?(this._saveItem(this.CONSTANTS.STORAGE.IDTOKEN,e.parameters[this.CONSTANTS.ID_TOKEN]),this._hasResource(n=this.config.loginResource?this.config.loginResource:this.config.clientId)||(t=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS)||"",this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,t+n+this.CONSTANTS.RESOURCE_DELIMETER)),this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+n,e.parameters[this.CONSTANTS.ID_TOKEN]),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+n,this._user.profile.exp)):(this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,"Nonce received: "+this._user.profile.nonce+" is not same as requested: "+this._getItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN)),this._user=null):(e.parameters.error="invalid id_token",e.parameters.error_description="Invalid id_token. id_token: "+e.parameters[this.CONSTANTS.ID_TOKEN],this._saveItem(this.CONSTANTS.STORAGE.ERROR,"invalid id_token"),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"Invalid id_token. id_token: "+e.parameters[this.CONSTANTS.ID_TOKEN])))):(e.parameters.error="Invalid_state",e.parameters.error_description="Invalid_state. state: "+e.stateResponse,this._saveItem(this.CONSTANTS.STORAGE.ERROR,"Invalid_state"),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"Invalid_state. state: "+e.stateResponse)),this._saveItem(this.CONSTANTS.STORAGE.RENEW_STATUS+n,this.CONSTANTS.TOKEN_RENEW_STATUS_COMPLETED)},r.prototype.getResourceForEndpoint=function(e){if(this.config&&this.config.anonymousEndpoints)for(var t=0;t<this.config.anonymousEndpoints.length;t++)if(e.indexOf(this.config.anonymousEndpoints[t])>-1)return null;if(this.config&&this.config.endpoints)for(var n in this.config.endpoints)if(e.indexOf(n)>-1)return this.config.endpoints[n];return e.indexOf("http://")>-1||e.indexOf("https://")>-1?this._getHostFromUri(e)===this._getHostFromUri(this.config.redirectUri)?this.config.loginResource:null:this.config.loginResource},r.prototype._getHostFromUri=function(e){return String(e).replace(/^(https?:)\/\//,"").split("/")[0]},r.prototype.handleWindowCallback=function(e){if(null==e&&(e=window.location.hash),this.isCallback(e)){var t=null,n=!1;this._openedWindows.length>0&&this._openedWindows[this._openedWindows.length-1].opener&&this._openedWindows[this._openedWindows.length-1].opener._adalInstance?(t=this._openedWindows[this._openedWindows.length-1].opener._adalInstance,n=!0):window.parent&&window.parent._adalInstance&&(t=window.parent._adalInstance);var r,i,o=t.getRequestInfo(e),a=null;i=n||window.parent!==window?t._callBackMappedToRenewStates[o.stateResponse]:t.callback,t.info("Returned from redirect url"),t.saveTokenFromHash(o),o.requestType===this.REQUEST_TYPE.RENEW_TOKEN&&window.parent?(window.parent!==window?t.verbose("Window is in iframe, acquiring token silently"):t.verbose("acquiring token interactive in progress"),r=o.parameters[t.CONSTANTS.ACCESS_TOKEN]||o.parameters[t.CONSTANTS.ID_TOKEN],a=t.CONSTANTS.ACCESS_TOKEN):o.requestType===this.REQUEST_TYPE.LOGIN&&(r=o.parameters[t.CONSTANTS.ID_TOKEN],a=t.CONSTANTS.ID_TOKEN);var s=o.parameters[t.CONSTANTS.ERROR_DESCRIPTION],c=o.parameters[t.CONSTANTS.ERROR];try{i&&i(s,r,c,a)}catch(l){t.error("Error occurred in user defined callback function: "+l)}window.parent!==window||n||(t.config.navigateToLoginRequestUrl?window.location.href=t._getItem(t.CONSTANTS.STORAGE.LOGIN_REQUEST):window.location.hash="")}},r.prototype._getNavigateUrl=function(e,t){var n="common";this.config.tenant&&(n=this.config.tenant);var r=this.instance+n+"/oauth2/authorize"+this._serialize(e,this.config,t)+this._addLibMetadata();return this.info("Navigate url:"+r),r},r.prototype._extractIdToken=function(e){var t=this._decodeJwt(e);if(!t)return null;try{var n=this._base64DecodeStringUrlSafe(t.JWSPayload);return n?JSON.parse(n):(this.info("The returned id_token could not be base64 url safe decoded."),null)}catch(r){this.error("The returned id_token could not be decoded",r)}return null},r.prototype._base64DecodeStringUrlSafe=function(e){return e=e.replace(/-/g,"+").replace(/_/g,"/"),window.atob?decodeURIComponent(escape(window.atob(e))):decodeURIComponent(escape(this._decode(e)))},r.prototype._decode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=(e=String(e).replace(/=+$/,"")).length;if(n%4==1)throw new Error("The token to be decoded is not correctly encoded.");for(var r,i,o,a,s,c,l,p="",u=0;u<n;u+=4){if(r=t.indexOf(e.charAt(u)),i=t.indexOf(e.charAt(u+1)),o=t.indexOf(e.charAt(u+2)),a=t.indexOf(e.charAt(u+3)),u+2===n-1){c=(s=r<<18|i<<12|o<<6)>>16&255,l=s>>8&255,p+=String.fromCharCode(c,l);break}if(u+1===n-1){c=(s=r<<18|i<<12)>>16&255,p+=String.fromCharCode(c);break}c=(s=r<<18|i<<12|o<<6|a)>>16&255,l=s>>8&255,p+=String.fromCharCode(c,l,255&s)}return p},r.prototype._decodeJwt=function(e){if(this._isEmpty(e))return null;var t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);return!t||t.length<4?(this.warn("The returned id_token is not parseable."),null):{header:t[1],JWSPayload:t[2],JWSSig:t[3]}},r.prototype._convertUrlSafeToRegularBase64EncodedString=function(e){return e.replace("-","+").replace("_","/")},r.prototype._serialize=function(e,t,n){var r=[];if(null!==t){r.push("?response_type="+e),r.push("client_id="+encodeURIComponent(t.clientId)),n&&r.push("resource="+encodeURIComponent(n)),r.push("redirect_uri="+encodeURIComponent(t.redirectUri)),r.push("state="+encodeURIComponent(t.state)),t.hasOwnProperty("slice")&&r.push("slice="+encodeURIComponent(t.slice)),t.hasOwnProperty("extraQueryParameter")&&r.push(t.extraQueryParameter);var i=t.correlationId?t.correlationId:this._guid();r.push("client-request-id="+encodeURIComponent(i))}return r.join("&")},r.prototype._deserialize=function(e){var t,n=/\+/g,r=/([^&=]+)=([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(n," "))},o={};for(t=r.exec(e);t;)o[i(t[1])]=i(t[2]),t=r.exec(e);return o},r.prototype._decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},r.prototype._guid=function(){var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues){var t=new Uint8Array(16);return e.getRandomValues(t),t[6]|=64,t[6]&=79,t[8]|=128,t[8]&=191,this._decimalToHex(t[0])+this._decimalToHex(t[1])+this._decimalToHex(t[2])+this._decimalToHex(t[3])+"-"+this._decimalToHex(t[4])+this._decimalToHex(t[5])+"-"+this._decimalToHex(t[6])+this._decimalToHex(t[7])+"-"+this._decimalToHex(t[8])+this._decimalToHex(t[9])+"-"+this._decimalToHex(t[10])+this._decimalToHex(t[11])+this._decimalToHex(t[12])+this._decimalToHex(t[13])+this._decimalToHex(t[14])+this._decimalToHex(t[15])}for(var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",r="0123456789abcdef",i=0,o="",a=0;a<36;a++)"-"!==n[a]&&"4"!==n[a]&&(i=16*Math.random()|0),"x"===n[a]?o+=r[i]:"y"===n[a]?(i&=3,o+=r[i|=8]):o+=n[a];return o},r.prototype._expiresIn=function(e){return e||(e=3599),this._now()+parseInt(e,10)},r.prototype._now=function(){return Math.round((new Date).getTime()/1e3)},r.prototype._addAdalFrame=function(e){if(void 0!==e){this.info("Add adal frame to document:"+e);var t=document.getElementById(e);if(!t){if(document.createElement&&document.documentElement&&(window.opera||-1===window.navigator.userAgent.indexOf("MSIE 5.0"))){var n=document.createElement("iframe");n.setAttribute("id",e),n.setAttribute("aria-hidden","true"),n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height=n.borderWidth="0px",t=document.getElementsByTagName("body")[0].appendChild(n)}else document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeEnd",'<iframe name="'+e+'" id="'+e+'" style="display:none"></iframe>');window.frames&&window.frames[e]&&(t=window.frames[e])}return t}},r.prototype._saveItem=function(e,t,n){if(this.config&&this.config.cacheLocation&&"localStorage"===this.config.cacheLocation){if(!this._supportsLocalStorage())return this.info("Local storage is not supported"),!1;if(n){var r=this._getItem(e)||"";localStorage.setItem(e,r+t+this.CONSTANTS.CACHE_DELIMETER)}else localStorage.setItem(e,t);return!0}return this._supportsSessionStorage()?(sessionStorage.setItem(e,t),!0):(this.info("Session storage is not supported"),!1)},r.prototype._getItem=function(e){return this.config&&this.config.cacheLocation&&"localStorage"===this.config.cacheLocation?this._supportsLocalStorage()?localStorage.getItem(e):(this.info("Local storage is not supported"),null):this._supportsSessionStorage()?sessionStorage.getItem(e):(this.info("Session storage is not supported"),null)},r.prototype._supportsLocalStorage=function(){try{return!!window.localStorage&&(window.localStorage.setItem("storageTest","A"),"A"==window.localStorage.getItem("storageTest")&&(window.localStorage.removeItem("storageTest"),!window.localStorage.getItem("storageTest")))}catch(e){return!1}},r.prototype._supportsSessionStorage=function(){try{return!!window.sessionStorage&&(window.sessionStorage.setItem("storageTest","A"),"A"==window.sessionStorage.getItem("storageTest")&&(window.sessionStorage.removeItem("storageTest"),!window.sessionStorage.getItem("storageTest")))}catch(e){return!1}},r.prototype._cloneConfig=function(e){if(null===e||"object"!=typeof e)return e;var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},r.prototype._addLibMetadata=function(){return"&x-client-SKU=Js&x-client-Ver="+this._libVersion()},r.prototype.log=function(e,t,n,r){if(e<=Logging.level){if(!Logging.piiLoggingEnabled&&r)return;var i=(new Date).toUTCString(),o="";o=this.config.correlationId?i+":"+this.config.correlationId+"-"+this._libVersion()+"-"+this.CONSTANTS.LEVEL_STRING_MAP[e]+" "+t:i+":"+this._libVersion()+"-"+this.CONSTANTS.LEVEL_STRING_MAP[e]+" "+t,n&&(o+="\nstack:\n"+n.stack),Logging.log(o)}},r.prototype.error=function(e,t){this.log(this.CONSTANTS.LOGGING_LEVEL.ERROR,e,t)},r.prototype.warn=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.WARN,e,null)},r.prototype.info=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.INFO,e,null)},r.prototype.verbose=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.VERBOSE,e,null)},r.prototype.errorPii=function(e,t){this.log(this.CONSTANTS.LOGGING_LEVEL.ERROR,e,t,!0)},r.prototype.warnPii=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.WARN,e,null,!0)},r.prototype.infoPii=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.INFO,e,null,!0)},r.prototype.verbosePii=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.VERBOSE,e,null,!0)},r.prototype._libVersion=function(){return"1.0.17"},e.exports&&(e.exports=r,e.exports.inject=function(e){return new r(e)}),r}()},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},bCcq:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__("PDX0"),ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e,t){return function(n){return new Sha256(t,!0).update(n)[e]()}},createMethod=function(e){var t=createOutputMethod("hex",e);NODE_JS&&(t=nodeWrap(t,e)),t.create=function(){return new Sha256(e)},t.update=function(e){return t.create().update(e)};for(var n=0;n<OUTPUT_TYPES.length;++n){var r=OUTPUT_TYPES[n];t[r]=createOutputMethod(r,e)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if("string"==typeof e)return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(null==e)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},createHmacOutputMethod=function(e,t){return function(n,r){return new HmacSha256(n,t,!0).update(r)[e]()}},createHmacMethod=function(e){var t=createHmacOutputMethod("hex",e);t.create=function(t){return new HmacSha256(t,e)},t.update=function(e,n){return t.create(e).update(n)};for(var n=0;n<OUTPUT_TYPES.length;++n){var r=OUTPUT_TYPES[n];t[r]=createHmacOutputMethod(r,e)}return t};function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function HmacSha256(e,t,n){var r,i=typeof e;if("string"===i){var o,a=[],s=e.length,c=0;for(r=0;r<s;++r)(o=e.charCodeAt(r))<128?a[c++]=o:o<2048?(a[c++]=192|o>>6,a[c++]=128|63&o):o<55296||o>=57344?(a[c++]=224|o>>12,a[c++]=128|o>>6&63,a[c++]=128|63&o):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++r)),a[c++]=240|o>>18,a[c++]=128|o>>12&63,a[c++]=128|o>>6&63,a[c++]=128|63&o);e=a}else{if("object"!==i)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR)}e.length>64&&(e=new Sha256(t,!0).update(e).array());var l=[],p=[];for(r=0;r<64;++r){var u=e[r]||0;l[r]=92^u,p[r]=54^u}Sha256.call(this,t,n),this.update(p),this.oKeyPad=l,this.inner=!0,this.sharedMemory=n}Sha256.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var r,i,o=0,a=e.length,s=this.blocks;o<a;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)for(i=this.start;o<a&&i<64;++o)s[i>>2]|=e[o]<<SHIFT[3&i++];else for(i=this.start;o<a&&i<64;++o)(r=e.charCodeAt(o))<128?s[i>>2]|=r<<SHIFT[3&i++]:r<2048?(s[i>>2]|=(192|r>>6)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]):r<55296||r>=57344?(s[i>>2]|=(224|r>>12)<<SHIFT[3&i++],s[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),s[i>>2]|=(240|r>>18)<<SHIFT[3&i++],s[i>>2]|=(128|r>>12&63)<<SHIFT[3&i++],s[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=s[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var e,t,n,r,i,o,a=this.h0,s=this.h1,c=this.h2,l=this.h3,p=this.h4,u=this.h5,d=this.h6,h=this.h7,m=this.blocks;for(e=16;e<64;++e)m[e]=m[e-16]+(((t=m[e-15])>>>7|t<<25)^(t>>>18|t<<14)^t>>>3)+m[e-7]+(((t=m[e-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)<<0;for(o=s&c,e=0;e<64;e+=4)this.first?(this.is224?(n=300032,h=(t=m[0]-1413257819)-150054599<<0,l=t+24177077<<0):(n=704751109,h=(t=m[0]-210244248)-1521486534<<0,l=t+143694565<<0),this.first=!1):(h=l+(t=h+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&u^~p&d)+K[e]+m[e])<<0,l=t+(((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+((n=a&s)^a&c^o))<<0),d=c+(t=d+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&p^~h&u)+K[e+1]+m[e+1])<<0,c=t+(((l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10))+((r=l&a)^l&s^n))<<0,u=s+(t=u+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&h^~d&p)+K[e+2]+m[e+2])<<0,s=t+(((c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+((i=c&l)^c&a^r))<<0,p=a+(t=p+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&d^~u&h)+K[e+3]+m[e+3])<<0,a=t+(((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+((o=s&c)^s&l^i))<<0;this.h0=this.h0+a<<0,this.h1=this.h1+s<<0,this.h2=this.h2+c<<0,this.h3=this.h3+l<<0,this.h4=this.h4+p<<0,this.h5=this.h5+u<<0,this.h6=this.h6+d<<0,this.h7=this.h7+h<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4,o=this.h5,a=this.h6,s=this.h7,c=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a];return this.is224||(c+=HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]),c},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4,o=this.h5,a=this.h6,s=this.h7,c=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,i>>24&255,i>>16&255,i>>8&255,255&i,o>>24&255,o>>16&255,o>>8&255,255&o,a>>24&255,a>>16&255,a>>8&255,255&a];return this.is224||c.push(s>>24&255,s>>16&255,s>>8&255,255&s),c},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=(function(){return exports}).call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()},sXTw:function(e,t,n){"use strict";n.r(t),n.d(t,"getRecaptchaLanguage",(function(){return Ji})),n.d(t,"AccountModule",(function(){return Yi}));var r=n("Valr"),i=n("cUzu"),o=n("pmn7"),a=n("QJY3"),s=n("YirH"),c=n("yc4G"),l=n("TYT/"),p=n("mrSG"),u=function(){function e(e){this.zone=e,this.windowGrecaptcha="grecaptcha",this.windowOnLoadCallbackProperty="ngx_captcha_onload_callback",this.globalDomain="recaptcha.net",this.defaultDomain="google.com"}return e.prototype.registerCaptchaScript=function(e,t,n,r){var i=this;if(this.grecaptchaScriptLoaded())this.zone.run((function(){n(window[i.windowGrecaptcha])}));else{window[this.windowOnLoadCallbackProperty]=function(){return i.zone.run(n.bind(i,window[i.windowGrecaptcha]))};var o=document.createElement("script");o.innerHTML="",o.src=this.getCaptchaScriptUrl(e,t,r),o.async=!0,o.defer=!0,document.getElementsByTagName("head")[0].appendChild(o)}},e.prototype.cleanup=function(){window[this.windowOnLoadCallbackProperty]=void 0,window[this.windowGrecaptcha]=void 0},e.prototype.grecaptchaScriptLoaded=function(){return!(!window[this.windowOnLoadCallbackProperty]||!window[this.windowGrecaptcha])},e.prototype.getLanguageParam=function(e){return e?"&hl="+e:""},e.prototype.getCaptchaScriptUrl=function(e,t,n){return"https://www."+(e?this.globalDomain:this.defaultDomain)+"/recaptcha/api.js?onload="+this.windowOnLoadCallbackProperty+"&render="+t+this.getLanguageParam(n)},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](l.NgZone))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),d=function(){function e(e,t){this.scriptService=e,this.zone=t}return e.prototype.execute=function(e,t,n,r){this.executeAsPromise(e,t,r).then(n)},e.prototype.executeAsPromise=function(e,t,n){var r=this;return new Promise((function(i,o){r.scriptService.registerCaptchaScript(!(!n||!n.useGlobalDomain),e,(function(n){r.zone.runOutsideAngular((function(){try{n.execute(e,{action:t}).then((function(e){return r.zone.run((function(){return i(e)}))}))}catch(a){o(a)}}))}))}))},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](u),l["\u0275\u0275inject"](l.NgZone))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),h=function(){function e(){}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[u,d],imports:[[r.c]]}),e}(),m=n("CbkN"),f=n("DUip"),g=n("i3/Z"),y=n("nS6G"),v=n("Q86s"),S=n("LvDl"),I=n("wd/R"),_=n("Tr3h"),b=n("KALY"),w=n("Q9gK"),T=n("2WpN"),E=n("K9Ia"),C=n("F/XL"),x=n("0/uQ"),O=n("isby"),k=n("IUTb"),A=n("MGBS"),R=n("zotm"),P=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new N(e))},e}(),N=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return p.d(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=Object(R.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var a=this.subscriptions[o];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(t)},t}(A.a),U=n("dzgT"),L=n("XlPw"),j=n("p0ib"),H=n("VnD/"),M=n("xMyE"),q=n("Gi3i"),F=n("T1DM");function D(e){return e instanceof Date&&!isNaN(+e)}var B=n("FFOo"),z=n("60iU");function G(e,t){void 0===t&&(t=F.a);var n=D(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new K(n,t))}}var K=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new V(e,this.delay,this.scheduler))},e}(),V=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return p.d(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new W(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(z.a.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(z.a.createComplete()),this.unsubscribe()},t}(B.a),W=function(){return function(e,t){this.time=e,this.notification=t}}(),Q=n("15JJ"),X=n("67Y/"),J=n("P6uZ"),Y=n("9Z1F"),$=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),Z=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new ee(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),ee=function(e){function t(t,n,r,i,o){var a=e.call(this,t)||this;return a.absoluteTimeout=n,a.waitFor=r,a.withObservable=i,a.scheduler=o,a.action=null,a.scheduleTimeout(),a}return p.d(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(Object(R.a)(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(A.a),te=n("t9fZ"),ne=n("psW0"),re=n("bCcq"),ie=function(){return function(){}}(),oe=function(){return function(){}}(),ae=function(){function e(){this.data=new Map}return e.prototype.getItem=function(e){return this.data.get(e)},e.prototype.removeItem=function(e){this.data.delete(e)},e.prototype.setItem=function(e,t){this.data.set(e,t)},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:function(t){return e.\u0275fac(t)}}),e}();function se(e){var t=e.replace(/\-/g,"+").replace(/\_/g,"/");return decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function ce(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}var le=function(){return function(){}}(),pe=function(){function e(){}return e.prototype.getHashFragmentParams=function(e){var t=e||window.location.hash;if(0!==(t=decodeURIComponent(t)).indexOf("#"))return{};var n=t.indexOf("?");return t=t.substr(n>-1?n+1:1),this.parseQueryString(t)},e.prototype.parseQueryString=function(e){var t,n,r,i,o,a,s,c={};if(null===e)return c;t=e.split("&");for(var l=0;l<t.length;l++)-1===(r=(n=t[l]).indexOf("="))?(i=n,o=null):(i=n.substr(0,r),o=n.substr(r+1)),a=decodeURIComponent(i),s=decodeURIComponent(o),"/"===a.substr(0,1)&&(a=a.substr(1)),c[a]=s;return c},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),ue=function(){return function(e){this.type=e}}(),de=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t)||this;return r.info=n,r}return Object(p.d)(t,e),t}(ue),he=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t)||this;return r.info=n,r}return Object(p.d)(t,e),t}(ue),me=function(e){function t(t,n,r){void 0===r&&(r=null);var i=e.call(this,t)||this;return i.reason=n,i.params=r,i}return Object(p.d)(t,e),t}(ue),fe=function(){return function(e){this.clientId="",this.redirectUri="",this.postLogoutRedirectUri="",this.loginUrl="",this.scope="openid profile",this.resource="",this.rngUrl="",this.oidc=!0,this.requestAccessToken=!0,this.options=null,this.issuer="",this.logoutUrl="",this.clearHashAfterLogin=!0,this.tokenEndpoint=null,this.revocationEndpoint=null,this.customTokenParameters=[],this.userinfoEndpoint=null,this.responseType="",this.showDebugInformation=!1,this.silentRefreshRedirectUri="",this.silentRefreshMessagePrefix="",this.silentRefreshShowIFrame=!1,this.siletRefreshTimeout=2e4,this.silentRefreshTimeout=2e4,this.dummyClientSecret=null,this.requireHttps="remoteOnly",this.strictDiscoveryDocumentValidation=!0,this.jwks=null,this.customQueryParams=null,this.silentRefreshIFrameName="angular-oauth-oidc-silent-refresh-iframe",this.timeoutFactor=.75,this.sessionChecksEnabled=!1,this.sessionCheckIntervall=3e3,this.sessionCheckIFrameUrl=null,this.sessionCheckIFrameName="angular-oauth-oidc-check-session-iframe",this.disableAtHashCheck=!1,this.skipSubjectCheck=!1,this.useIdTokenHintForSilentRefresh=!1,this.skipIssuerCheck=!1,this.nonceStateSeparator=";",this.useHttpBasicAuth=!1,this.waitForTokenInMsec=0,this.disablePKCE=!1,this.openUri=function(e){location.href=e},e&&Object.assign(this,e)}}(),ge=function(){function e(){}return e.prototype.encodeKey=function(e){return encodeURIComponent(e)},e.prototype.encodeValue=function(e){return encodeURIComponent(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}(),ye=function(){return function(){}}(),ve=function(){function e(){}return e.prototype.calcHash=function(e,t){return Object(p.b)(this,void 0,void 0,(function(){var t;return Object(p.e)(this,(function(n){return t=re.sha256.array(e),[2,this.toHashString2(t)]}))}))},e.prototype.toHashString2=function(e){var t,n,r="";try{for(var i=Object(p.i)(e),o=i.next();!o.done;o=i.next())r+=String.fromCharCode(o.value)}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.toHashString=function(e){var t,n,r=new Uint8Array(e),i="";try{for(var o=Object(p.i)(r),a=o.next();!a.done;a=o.next())i+=String.fromCharCode(a.value)}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),Se=function(e){function t(t,n,r,i,o,a,s,c,l){var p,u,d,h,m=e.call(this)||this;m.ngZone=t,m.http=n,m.config=o,m.urlHelper=a,m.logger=s,m.crypto=c,m.document=l,m.discoveryDocumentLoaded=!1,m.state="",m.eventsSubject=new E.a,m.discoveryDocumentLoadedSubject=new E.a,m.grantTypesSupported=[],m.inImplicitFlow=!1,m.saveNoncesInLocalStorage=!1,m.debug("angular-oauth2-oidc v8-beta"),m.discoveryDocumentLoaded$=m.discoveryDocumentLoadedSubject.asObservable(),m.events=m.eventsSubject.asObservable(),i&&(m.tokenValidationHandler=i),o&&m.configure(o);try{r?m.setStorage(r):"undefined"!=typeof sessionStorage&&m.setStorage(sessionStorage)}catch(g){console.error("No OAuthStorage provided and cannot access default (sessionStorage).Consider providing a custom OAuthStorage implementation in your module.",g)}if("undefined"!=typeof window&&void 0!==window.localStorage){var f=null===(u=null===(p=window)||void 0===p?void 0:p.navigator)||void 0===u?void 0:u.userAgent;((null===(d=f)||void 0===d?void 0:d.includes("MSIE "))||(null===(h=f)||void 0===h?void 0:h.includes("Trident")))&&(m.saveNoncesInLocalStorage=!0)}return m.setupRefreshTimer(),m}return Object(p.d)(t,e),t.prototype.configure=function(e){Object.assign(this,new fe,e),this.config=Object.assign({},new fe,e),this.sessionChecksEnabled&&this.setupSessionCheck(),this.configChanged()},t.prototype.configChanged=function(){this.setupRefreshTimer()},t.prototype.restartSessionChecksIfStillLoggedIn=function(){this.hasValidIdToken()&&this.initSessionCheck()},t.prototype.restartRefreshTimerIfStillLoggedIn=function(){this.setupExpirationTimers()},t.prototype.setupSessionCheck=function(){var e=this;this.events.pipe(Object(H.a)((function(e){return"token_received"===e.type}))).subscribe((function(t){e.initSessionCheck()}))},t.prototype.setupAutomaticSilentRefresh=function(e,t,n){var r=this;void 0===e&&(e={}),void 0===n&&(n=!0);var i=!0;this.events.pipe(Object(M.a)((function(e){"token_received"===e.type?i=!0:"logout"===e.type&&(i=!1)})),Object(H.a)((function(e){return"token_expires"===e.type})),Object(q.a)(1e3)).subscribe((function(o){null!=t&&"any"!==t&&o.info!==t||!i||r.refreshInternal(e,n).catch((function(e){r.debug("Automatic silent refresh did not work")}))})),this.restartRefreshTimerIfStillLoggedIn()},t.prototype.refreshInternal=function(e,t){return this.useSilentRefresh||"code"!==this.responseType?this.silentRefresh(e,t):this.refreshToken()},t.prototype.loadDiscoveryDocumentAndTryLogin=function(e){var t=this;return void 0===e&&(e=null),this.loadDiscoveryDocument().then((function(n){return t.tryLogin(e)}))},t.prototype.loadDiscoveryDocumentAndLogin=function(e){var t=this;return void 0===e&&(e=null),e||(e={state:""}),this.loadDiscoveryDocumentAndTryLogin(e).then((function(e){return!(!t.hasValidIdToken()||!t.hasValidAccessToken())||("code"===t.responseType?t.initCodeFlow():t.initImplicitFlow(),!1)}))},t.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.showDebugInformation&&this.logger.debug.apply(this.logger,e)},t.prototype.validateUrlFromDiscoveryDocument=function(e){var t=[],n=this.validateUrlForHttps(e),r=this.validateUrlAgainstIssuer(e);return n||t.push("https for all urls required. Also for urls received by discovery."),r||t.push("Every url in discovery document has to start with the issuer url.Also see property strictDiscoveryDocumentValidation."),t},t.prototype.validateUrlForHttps=function(e){if(!e)return!0;var t=e.toLowerCase();return!1===this.requireHttps||!(!t.match(/^http:\/\/localhost($|[:\/])/)&&!t.match(/^http:\/\/localhost($|[:\/])/)||"remoteOnly"!==this.requireHttps)||t.startsWith("https://")},t.prototype.assertUrlNotNullAndCorrectProtocol=function(e,t){if(!e)throw new Error("'"+t+"' should not be null");if(!this.validateUrlForHttps(e))throw new Error("'"+t+"' must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).")},t.prototype.validateUrlAgainstIssuer=function(e){return!this.strictDiscoveryDocumentValidation||!e||e.toLowerCase().startsWith(this.issuer.toLowerCase())},t.prototype.setupRefreshTimer=function(){var e=this;"undefined"!=typeof window?((this.hasValidIdToken()||this.hasValidAccessToken())&&(this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()),this.tokenReceivedSubscription&&this.tokenReceivedSubscription.unsubscribe(),this.tokenReceivedSubscription=this.events.pipe(Object(H.a)((function(e){return"token_received"===e.type}))).subscribe((function(t){e.clearAccessTokenTimer(),e.clearIdTokenTimer(),e.setupExpirationTimers()}))):this.debug("timer not supported on this plattform")},t.prototype.setupExpirationTimers=function(){this.hasValidAccessToken()&&this.setupAccessTokenTimer(),this.hasValidIdToken()&&this.setupIdTokenTimer()},t.prototype.setupAccessTokenTimer=function(){var e=this,t=this.getAccessTokenExpiration(),n=this.getAccessTokenStoredAt(),r=this.calcTimeout(n,t);this.ngZone.runOutsideAngular((function(){e.accessTokenTimeoutSubscription=Object(C.a)(new he("token_expires","access_token")).pipe(G(r)).subscribe((function(t){e.ngZone.run((function(){e.eventsSubject.next(t)}))}))}))},t.prototype.setupIdTokenTimer=function(){var e=this,t=this.getIdTokenExpiration(),n=this.getIdTokenStoredAt(),r=this.calcTimeout(n,t);this.ngZone.runOutsideAngular((function(){e.idTokenTimeoutSubscription=Object(C.a)(new he("token_expires","id_token")).pipe(G(r)).subscribe((function(t){e.ngZone.run((function(){e.eventsSubject.next(t)}))}))}))},t.prototype.stopAutomaticRefresh=function(){this.clearAccessTokenTimer(),this.clearIdTokenTimer()},t.prototype.clearAccessTokenTimer=function(){this.accessTokenTimeoutSubscription&&this.accessTokenTimeoutSubscription.unsubscribe()},t.prototype.clearIdTokenTimer=function(){this.idTokenTimeoutSubscription&&this.idTokenTimeoutSubscription.unsubscribe()},t.prototype.calcTimeout=function(e,t){var n=Date.now();return Math.max(0,(t-e)*this.timeoutFactor-(n-e))},t.prototype.setStorage=function(e){this._storage=e,this.configChanged()},t.prototype.loadDiscoveryDocument=function(e){var t=this;return void 0===e&&(e=null),new Promise((function(n,r){e||((e=t.issuer||"").endsWith("/")||(e+="/"),e+=".well-known/openid-configuration"),t.validateUrlForHttps(e)?t.http.get(e).subscribe((function(e){if(!t.validateDiscoveryDocument(e))return t.eventsSubject.next(new me("discovery_document_validation_error",null)),void r("discovery_document_validation_error");t.loginUrl=e.authorization_endpoint,t.logoutUrl=e.end_session_endpoint||t.logoutUrl,t.grantTypesSupported=e.grant_types_supported,t.issuer=e.issuer,t.tokenEndpoint=e.token_endpoint,t.userinfoEndpoint=e.userinfo_endpoint||t.userinfoEndpoint,t.jwksUri=e.jwks_uri,t.sessionCheckIFrameUrl=e.check_session_iframe||t.sessionCheckIFrameUrl,t.discoveryDocumentLoaded=!0,t.discoveryDocumentLoadedSubject.next(e),t.revocationEndpoint=e.revocation_endpoint,t.sessionChecksEnabled&&t.restartSessionChecksIfStillLoggedIn(),t.loadJwks().then((function(r){var i=new de("discovery_document_loaded",{discoveryDocument:e,jwks:r});t.eventsSubject.next(i),n(i)})).catch((function(e){t.eventsSubject.next(new me("discovery_document_load_error",e)),r(e)}))}),(function(e){t.logger.error("error loading discovery document",e),t.eventsSubject.next(new me("discovery_document_load_error",e)),r(e)})):r("issuer  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).")}))},t.prototype.loadJwks=function(){var e=this;return new Promise((function(t,n){e.jwksUri?e.http.get(e.jwksUri).subscribe((function(n){e.jwks=n,e.eventsSubject.next(new de("discovery_document_loaded")),t(n)}),(function(t){e.logger.error("error loading jwks",t),e.eventsSubject.next(new me("jwks_load_error",t)),n(t)})):t(null)}))},t.prototype.validateDiscoveryDocument=function(e){var t;return this.skipIssuerCheck||e.issuer===this.issuer?(t=this.validateUrlFromDiscoveryDocument(e.authorization_endpoint)).length>0?(this.logger.error("error validating authorization_endpoint in discovery document",t),!1):(t=this.validateUrlFromDiscoveryDocument(e.end_session_endpoint)).length>0?(this.logger.error("error validating end_session_endpoint in discovery document",t),!1):((t=this.validateUrlFromDiscoveryDocument(e.token_endpoint)).length>0&&this.logger.error("error validating token_endpoint in discovery document",t),(t=this.validateUrlFromDiscoveryDocument(e.revocation_endpoint)).length>0&&this.logger.error("error validating revocation_endpoint in discovery document",t),(t=this.validateUrlFromDiscoveryDocument(e.userinfo_endpoint)).length>0?(this.logger.error("error validating userinfo_endpoint in discovery document",t),!1):(t=this.validateUrlFromDiscoveryDocument(e.jwks_uri)).length>0?(this.logger.error("error validating jwks_uri in discovery document",t),!1):(this.sessionChecksEnabled&&!e.check_session_iframe&&this.logger.warn("sessionChecksEnabled is activated but discovery document does not contain a check_session_iframe field"),!0)):(this.logger.error("invalid issuer in discovery document","expected: "+this.issuer,"current: "+e.issuer),!1)},t.prototype.fetchTokenUsingPasswordFlowAndLoadUserProfile=function(e,t,n){var r=this;return void 0===n&&(n=new i.g),this.fetchTokenUsingPasswordFlow(e,t,n).then((function(){return r.loadUserProfile()}))},t.prototype.loadUserProfile=function(){var e=this;if(!this.hasValidAccessToken())throw new Error("Can not load User Profile without access_token");if(!this.validateUrlForHttps(this.userinfoEndpoint))throw new Error("userinfoEndpoint must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");return new Promise((function(t,n){var r=(new i.g).set("Authorization","Bearer "+e.getAccessToken());e.http.get(e.userinfoEndpoint,{headers:r}).subscribe((function(r){e.debug("userinfo received",r);var i=e.getIdentityClaims()||{};e.skipSubjectCheck||!e.oidc||i.sub&&r.sub===i.sub?(r=Object.assign({},i,r),e._storage.setItem("id_token_claims_obj",JSON.stringify(r)),e.eventsSubject.next(new de("user_profile_loaded")),t(r)):n("if property oidc is true, the received user-id (sub) has to be the user-id of the user that has logged in with oidc.\nif you are not using oidc but just oauth2 password flow set oidc to false")}),(function(t){e.logger.error("error loading user info",t),e.eventsSubject.next(new me("user_profile_load_error",t)),n(t)}))}))},t.prototype.fetchTokenUsingPasswordFlow=function(e,t,n){var r=this;return void 0===n&&(n=new i.g),this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint"),new Promise((function(o,a){var s,c,l=new i.h({encoder:new ge}).set("grant_type","password").set("scope",r.scope).set("username",e).set("password",t);if(r.useHttpBasicAuth){var u=btoa(r.clientId+":"+r.dummyClientSecret);n=n.set("Authorization","Basic "+u)}if(r.useHttpBasicAuth||(l=l.set("client_id",r.clientId)),!r.useHttpBasicAuth&&r.dummyClientSecret&&(l=l.set("client_secret",r.dummyClientSecret)),r.customQueryParams)try{for(var d=Object(p.i)(Object.getOwnPropertyNames(r.customQueryParams)),h=d.next();!h.done;h=d.next()){var m=h.value;l=l.set(m,r.customQueryParams[m])}}catch(f){s={error:f}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(s)throw s.error}}n=n.set("Content-Type","application/x-www-form-urlencoded"),r.http.post(r.tokenEndpoint,l,{headers:n}).subscribe((function(e){r.debug("tokenResponse",e),r.storeAccessTokenResponse(e.access_token,e.refresh_token,e.expires_in||r.fallbackAccessTokenExpirationTimeInSec,e.scope,r.extractRecognizedCustomParameters(e)),r.eventsSubject.next(new de("token_received")),o(e)}),(function(e){r.logger.error("Error performing password flow",e),r.eventsSubject.next(new me("token_error",e)),a(e)}))}))},t.prototype.refreshToken=function(){var e=this;return this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint"),new Promise((function(t,n){var r,o,a=(new i.h).set("grant_type","refresh_token").set("scope",e.scope).set("refresh_token",e._storage.getItem("refresh_token")),s=(new i.g).set("Content-Type","application/x-www-form-urlencoded");if(e.useHttpBasicAuth){var c=btoa(e.clientId+":"+e.dummyClientSecret);s=s.set("Authorization","Basic "+c)}if(e.useHttpBasicAuth||(a=a.set("client_id",e.clientId)),!e.useHttpBasicAuth&&e.dummyClientSecret&&(a=a.set("client_secret",e.dummyClientSecret)),e.customQueryParams)try{for(var l=Object(p.i)(Object.getOwnPropertyNames(e.customQueryParams)),u=l.next();!u.done;u=l.next()){var d=u.value;a=a.set(d,e.customQueryParams[d])}}catch(h){r={error:h}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}e.http.post(e.tokenEndpoint,a,{headers:s}).pipe(Object(Q.a)((function(t){return t.id_token?Object(x.a)(e.processIdToken(t.id_token,t.access_token,!0)).pipe(Object(M.a)((function(t){return e.storeIdToken(t)})),Object(X.a)((function(e){return t}))):Object(C.a)(t)}))).subscribe((function(n){e.debug("refresh tokenResponse",n),e.storeAccessTokenResponse(n.access_token,n.refresh_token,n.expires_in||e.fallbackAccessTokenExpirationTimeInSec,n.scope,e.extractRecognizedCustomParameters(n)),e.eventsSubject.next(new de("token_received")),e.eventsSubject.next(new de("token_refreshed")),t(n)}),(function(t){e.logger.error("Error refreshing token",t),e.eventsSubject.next(new me("token_refresh_error",t)),n(t)}))}))},t.prototype.removeSilentRefreshEventListener=function(){this.silentRefreshPostMessageEventListener&&(window.removeEventListener("message",this.silentRefreshPostMessageEventListener),this.silentRefreshPostMessageEventListener=null)},t.prototype.setupSilentRefreshEventListener=function(){var e=this;this.removeSilentRefreshEventListener(),this.silentRefreshPostMessageEventListener=function(t){var n=e.processMessageEventMessage(t);e.tryLogin({customHashFragment:n,preventClearHashAfterLogin:!0,customRedirectUri:e.silentRefreshRedirectUri||e.redirectUri}).catch((function(t){return e.debug("tryLogin during silent refresh failed",t)}))},window.addEventListener("message",this.silentRefreshPostMessageEventListener)},t.prototype.silentRefresh=function(e,t){var n=this;void 0===e&&(e={}),void 0===t&&(t=!0);var r=this.getIdentityClaims()||{};if(this.useIdTokenHintForSilentRefresh&&this.hasValidIdToken()&&(e.id_token_hint=this.getIdToken()),!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");if("undefined"==typeof document)throw new Error("silent refresh is not supported on this platform");var i=document.getElementById(this.silentRefreshIFrameName);i&&document.body.removeChild(i),this.silentRefreshSubject=r.sub;var o=document.createElement("iframe");return o.id=this.silentRefreshIFrameName,this.setupSilentRefreshEventListener(),this.createLoginUrl(null,null,this.silentRefreshRedirectUri||this.redirectUri,t,e).then((function(e){o.setAttribute("src",e),n.silentRefreshShowIFrame||(o.style.display="none"),document.body.appendChild(o)})),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Object(O.a)(e[0]))return e[0];e=e[0]}return Object(k.a)(e,void 0).lift(new P)}([this.events.pipe(Object(H.a)((function(e){return e instanceof me})),Object(J.a)()),this.events.pipe(Object(H.a)((function(e){return"token_received"===e.type})),Object(J.a)()),Object(C.a)(new me("silent_refresh_timeout",null)).pipe(G(this.silentRefreshTimeout))]).pipe(Object(X.a)((function(e){if(e instanceof me)throw"silent_refresh_timeout"===e.type||(e=new me("silent_refresh_error",e)),n.eventsSubject.next(e),e;return"token_received"===e.type&&(e=new de("silently_refreshed"),n.eventsSubject.next(e)),e}))).toPromise()},t.prototype.initImplicitFlowInPopup=function(e){return this.initLoginFlowInPopup(e)},t.prototype.initLoginFlowInPopup=function(e){var t=this;return e=e||{},this.createLoginUrl(null,null,this.silentRefreshRedirectUri,!1,{display:"popup"}).then((function(n){return new Promise((function(r,i){var o,a=window.open(n,"_blank",t.calculatePopupFeatures(e));a?o=window.setInterval((function(){a&&!a.closed||(s(),i(new me("popup_closed",{})))}),500):i(new me("popup_blocked",{}));var s=function(){window.clearInterval(o),window.removeEventListener("message",c),null!==a&&a.close(),a=null},c=function(e){var n=t.processMessageEventMessage(e);n&&null!==n?t.tryLogin({customHashFragment:n,preventClearHashAfterLogin:!0,customRedirectUri:t.silentRefreshRedirectUri}).then((function(){s(),r()}),(function(e){s(),i(e)})):console.log("false event firing")};window.addEventListener("message",c)}))}))},t.prototype.calculatePopupFeatures=function(e){var t=e.height||470,n=e.width||500,r=window.screenLeft+(window.outerWidth-n)/2;return"location=no,toolbar=no,width="+n+",height="+t+",top="+(window.screenTop+(window.outerHeight-t)/2)+",left="+r},t.prototype.processMessageEventMessage=function(e){var t="#";if(this.silentRefreshMessagePrefix&&(t+=this.silentRefreshMessagePrefix),e&&e.data&&"string"==typeof e.data){var n=e.data;if(n.startsWith(t))return"#"+n.substr(t.length)}},t.prototype.canPerformSessionCheck=function(){return!!this.sessionChecksEnabled&&(this.sessionCheckIFrameUrl?this.getSessionState()?"undefined"!=typeof document:(console.warn("sessionChecksEnabled is activated but there is no session_state"),!1):(console.warn("sessionChecksEnabled is activated but there is no sessionCheckIFrameUrl"),!1))},t.prototype.setupSessionCheckEventListener=function(){var e=this;this.removeSessionCheckEventListener(),this.sessionCheckEventListener=function(t){var n=t.origin.toLowerCase(),r=e.issuer.toLowerCase();if(e.debug("sessionCheckEventListener"),r.startsWith(n)){switch(t.data){case"unchanged":e.handleSessionUnchanged();break;case"changed":e.ngZone.run((function(){e.handleSessionChange()}));break;case"error":e.ngZone.run((function(){e.handleSessionError()}))}e.debug("got info from session check inframe",t)}else e.debug("sessionCheckEventListener","wrong origin",n,"expected",r,"event",t)},this.ngZone.runOutsideAngular((function(){window.addEventListener("message",e.sessionCheckEventListener)}))},t.prototype.handleSessionUnchanged=function(){this.debug("session check","session unchanged")},t.prototype.handleSessionChange=function(){var e=this;this.eventsSubject.next(new he("session_changed")),this.stopSessionCheckTimer(),this.useSilentRefresh||"code"!==this.responseType?this.silentRefreshRedirectUri?(this.silentRefresh().catch((function(t){return e.debug("silent refresh failed after session changed")})),this.waitForSilentRefreshAfterSessionChange()):(this.eventsSubject.next(new he("session_terminated")),this.logOut(!0)):this.refreshToken().then((function(t){e.debug("token refresh after session change worked")})).catch((function(t){e.debug("token refresh did not work after session changed"),e.eventsSubject.next(new he("session_terminated")),e.logOut(!0)}))},t.prototype.waitForSilentRefreshAfterSessionChange=function(){var e=this;this.events.pipe(Object(H.a)((function(e){return"silently_refreshed"===e.type||"silent_refresh_timeout"===e.type||"silent_refresh_error"===e.type})),Object(J.a)()).subscribe((function(t){"silently_refreshed"!==t.type&&(e.debug("silent refresh did not work after session changed"),e.eventsSubject.next(new he("session_terminated")),e.logOut(!0))}))},t.prototype.handleSessionError=function(){this.stopSessionCheckTimer(),this.eventsSubject.next(new he("session_error"))},t.prototype.removeSessionCheckEventListener=function(){this.sessionCheckEventListener&&(window.removeEventListener("message",this.sessionCheckEventListener),this.sessionCheckEventListener=null)},t.prototype.initSessionCheck=function(){if(this.canPerformSessionCheck()){var e=document.getElementById(this.sessionCheckIFrameName);e&&document.body.removeChild(e);var t=document.createElement("iframe");t.id=this.sessionCheckIFrameName,this.setupSessionCheckEventListener(),t.setAttribute("src",this.sessionCheckIFrameUrl),t.style.display="none",document.body.appendChild(t),this.startSessionCheckTimer()}},t.prototype.startSessionCheckTimer=function(){var e=this;this.stopSessionCheckTimer(),this.ngZone.runOutsideAngular((function(){e.sessionCheckTimer=setInterval(e.checkSession.bind(e),e.sessionCheckIntervall)}))},t.prototype.stopSessionCheckTimer=function(){this.sessionCheckTimer&&(clearInterval(this.sessionCheckTimer),this.sessionCheckTimer=null)},t.prototype.checkSession=function(){var e=document.getElementById(this.sessionCheckIFrameName);e||this.logger.warn("checkSession did not find iframe",this.sessionCheckIFrameName);var t=this.getSessionState();t||this.stopSessionCheckTimer(),e.contentWindow.postMessage(this.clientId+" "+t,this.issuer)},t.prototype.createLoginUrl=function(e,t,n,r,i){return void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),void 0===r&&(r=!1),void 0===i&&(i={}),Object(p.b)(this,void 0,void 0,(function(){var o,a,s,c,l,u,d,h,m,f,g,y,v,S,I,_,b,w;return Object(p.e)(this,(function(T){switch(T.label){case 0:return o=this,a=n||this.redirectUri,[4,this.createAndSaveNonce()];case 1:if(s=T.sent(),e=e?s+this.config.nonceStateSeparator+encodeURIComponent(e):s,!this.requestAccessToken&&!this.oidc)throw new Error("Either requestAccessToken or oidc or both must be true");return this.responseType=this.config.responseType?this.config.responseType:this.oidc&&this.requestAccessToken?"id_token token":this.oidc&&!this.requestAccessToken?"id_token":"token",c=o.loginUrl.indexOf("?")>-1?"&":"?",l=o.scope,this.oidc&&!l.match(/(^|\s)openid($|\s)/)&&(l="openid "+l),u=o.loginUrl+c+"response_type="+encodeURIComponent(o.responseType)+"&client_id="+encodeURIComponent(o.clientId)+"&state="+encodeURIComponent(e)+"&redirect_uri="+encodeURIComponent(a)+"&scope="+encodeURIComponent(l),"code"!==this.responseType||this.disablePKCE?[3,3]:[4,this.createChallangeVerifierPairForPKCE()];case 2:d=p.g.apply(void 0,[T.sent(),2]),h=d[0],m=d[1],this.saveNoncesInLocalStorage&&void 0!==window.localStorage?localStorage.setItem("PKCI_verifier",m):this._storage.setItem("PKCI_verifier",m),u+="&code_challenge="+h,u+="&code_challenge_method=S256",T.label=3;case 3:t&&(u+="&login_hint="+encodeURIComponent(t)),o.resource&&(u+="&resource="+encodeURIComponent(o.resource)),o.oidc&&(u+="&nonce="+encodeURIComponent(s)),r&&(u+="&prompt=none");try{for(f=Object(p.i)(Object.keys(i)),g=f.next();!g.done;g=f.next())S=g.value,u+="&"+encodeURIComponent(S)+"="+encodeURIComponent(i[S])}catch(E){I={error:E}}finally{try{g&&!g.done&&(_=f.return)&&_.call(f)}finally{if(I)throw I.error}}if(this.customQueryParams)try{for(y=Object(p.i)(Object.getOwnPropertyNames(this.customQueryParams)),v=y.next();!v.done;v=y.next())u+="&"+(S=v.value)+"="+encodeURIComponent(this.customQueryParams[S])}catch(C){b={error:C}}finally{try{v&&!v.done&&(w=y.return)&&w.call(y)}finally{if(b)throw b.error}}return[2,u]}}))}))},t.prototype.initImplicitFlowInternal=function(e,t){var n=this;if(void 0===e&&(e=""),void 0===t&&(t=""),!this.inImplicitFlow){if(this.inImplicitFlow=!0,!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");var r={},i=null;"string"==typeof t?i=t:"object"==typeof t&&(r=t),this.createLoginUrl(e,i,null,!1,r).then(this.config.openUri).catch((function(e){console.error("Error in initImplicitFlow",e),n.inImplicitFlow=!1}))}},t.prototype.initImplicitFlow=function(e,t){var n=this;void 0===e&&(e=""),void 0===t&&(t=""),""!==this.loginUrl?this.initImplicitFlowInternal(e,t):this.events.pipe(Object(H.a)((function(e){return"discovery_document_loaded"===e.type}))).subscribe((function(r){return n.initImplicitFlowInternal(e,t)}))},t.prototype.resetImplicitFlow=function(){this.inImplicitFlow=!1},t.prototype.callOnTokenReceivedIfExists=function(e){if(e.onTokenReceived){var t={idClaims:this.getIdentityClaims(),idToken:this.getIdToken(),accessToken:this.getAccessToken(),state:this.state};e.onTokenReceived(t)}},t.prototype.storeAccessTokenResponse=function(e,t,n,r,i){var o=this;if(this._storage.setItem("access_token",e),r&&!Array.isArray(r)?this._storage.setItem("granted_scopes",JSON.stringify(r.split("+"))):r&&Array.isArray(r)&&this._storage.setItem("granted_scopes",JSON.stringify(r)),this._storage.setItem("access_token_stored_at",""+Date.now()),n){var a=1e3*n,s=(new Date).getTime()+a;this._storage.setItem("expires_at",""+s)}t&&this._storage.setItem("refresh_token",t),i&&i.forEach((function(e,t){o._storage.setItem(t,e)}))},t.prototype.tryLogin=function(e){return void 0===e&&(e=null),"code"===this.config.responseType?this.tryLoginCodeFlow(e).then((function(e){return!0})):this.tryLoginImplicitFlow(e)},t.prototype.parseQueryString=function(e){return e&&0!==e.length?("?"===e.charAt(0)&&(e=e.substr(1)),this.urlHelper.parseQueryString(e)):{}},t.prototype.tryLoginCodeFlow=function(e){void 0===e&&(e=null);var t=(e=e||{}).customHashFragment?e.customHashFragment.substring(1):window.location.search,n=this.getCodePartsFromUrl(t),r=n.code,i=n.state,o=n.session_state;if(!e.preventClearHashAfterLogin){var a=location.href.replace(/[&\?]code=[^&\$]*/,"").replace(/[&\?]scope=[^&\$]*/,"").replace(/[&\?]state=[^&\$]*/,"").replace(/[&\?]session_state=[^&\$]*/,"");history.replaceState(null,window.name,a)}var s=Object(p.g)(this.parseState(i),2),c=s[0];if(this.state=s[1],n.error){this.debug("error trying to login"),this.handleLoginError({},n);var l=new me("code_error",{},n);return this.eventsSubject.next(l),Promise.reject(l)}if(!c)return Promise.resolve();if(!this.validateNonce(c)){var u=new me("invalid_nonce_in_state",null);return this.eventsSubject.next(u),Promise.reject(u)}return this.storeSessionState(o),r?this.getTokenFromCode(r,e).then((function(e){return null})):Promise.resolve()},t.prototype.getCodePartsFromUrl=function(e){return e&&0!==e.length?("?"===e.charAt(0)&&(e=e.substr(1)),this.urlHelper.parseQueryString(e)):this.urlHelper.getHashFragmentParams()},t.prototype.getTokenFromCode=function(e,t){var n,r=(new i.h).set("grant_type","authorization_code").set("code",e).set("redirect_uri",t.customRedirectUri||this.redirectUri);this.disablePKCE||((n=this.saveNoncesInLocalStorage&&void 0!==window.localStorage?localStorage.getItem("PKCI_verifier"):this._storage.getItem("PKCI_verifier"))?r=r.set("code_verifier",n):console.warn("No PKCI verifier found in oauth storage!"));return this.fetchAndProcessToken(r)},t.prototype.fetchAndProcessToken=function(e){var t=this;this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint");var n=(new i.g).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){var r=btoa(this.clientId+":"+this.dummyClientSecret);n=n.set("Authorization","Basic "+r)}return this.useHttpBasicAuth||(e=e.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(e=e.set("client_secret",this.dummyClientSecret)),new Promise((function(r,i){var o,a;if(t.customQueryParams)try{for(var s=Object(p.i)(Object.getOwnPropertyNames(t.customQueryParams)),c=s.next();!c.done;c=s.next()){var l=c.value;e=e.set(l,t.customQueryParams[l])}}catch(u){o={error:u}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}t.http.post(t.tokenEndpoint,e,{headers:n}).subscribe((function(e){t.debug("refresh tokenResponse",e),t.storeAccessTokenResponse(e.access_token,e.refresh_token,e.expires_in||t.fallbackAccessTokenExpirationTimeInSec,e.scope,t.extractRecognizedCustomParameters(e)),t.oidc&&e.id_token?t.processIdToken(e.id_token,e.access_token).then((function(n){t.storeIdToken(n),t.eventsSubject.next(new de("token_received")),t.eventsSubject.next(new de("token_refreshed")),r(e)})).catch((function(e){t.eventsSubject.next(new me("token_validation_error",e)),console.error("Error validating tokens"),console.error(e),i(e)})):(t.eventsSubject.next(new de("token_received")),t.eventsSubject.next(new de("token_refreshed")),r(e))}),(function(e){console.error("Error getting token",e),t.eventsSubject.next(new me("token_refresh_error",e)),i(e)}))}))},t.prototype.tryLoginImplicitFlow=function(e){var t,n=this;void 0===e&&(e=null),t=(e=e||{}).customHashFragment?this.urlHelper.getHashFragmentParams(e.customHashFragment):this.urlHelper.getHashFragmentParams(),this.debug("parsed url",t);var r=t.state,i=Object(p.g)(this.parseState(r),2),o=i[0];if(this.state=i[1],t.error){this.debug("error trying to login"),this.handleLoginError(e,t);var a=new me("token_error",{},t);return this.eventsSubject.next(a),Promise.reject(a)}var s=t.access_token,c=t.id_token,l=t.session_state,u=t.scope;if(!this.requestAccessToken&&!this.oidc)return Promise.reject("Either requestAccessToken or oidc (or both) must be true.");if(this.requestAccessToken&&!s)return Promise.resolve(!1);if(this.requestAccessToken&&!e.disableOAuth2StateCheck&&!r)return Promise.resolve(!1);if(this.oidc&&!c)return Promise.resolve(!1);if(this.sessionChecksEnabled&&!l&&this.logger.warn("session checks (Session Status Change Notification) were activated in the configuration but the id_token does not contain a session_state claim"),this.requestAccessToken&&!e.disableOAuth2StateCheck&&!this.validateNonce(o)){var d=new me("invalid_nonce_in_state",null);return this.eventsSubject.next(d),Promise.reject(d)}return this.requestAccessToken&&this.storeAccessTokenResponse(s,null,t.expires_in||this.fallbackAccessTokenExpirationTimeInSec,u),this.oidc?this.processIdToken(c,s).then((function(t){return e.validationHandler?e.validationHandler({accessToken:s,idClaims:t.idTokenClaims,idToken:t.idToken,state:r}).then((function(e){return t})):t})).then((function(t){return n.storeIdToken(t),n.storeSessionState(l),n.clearHashAfterLogin&&!e.preventClearHashAfterLogin&&(location.hash=""),n.eventsSubject.next(new de("token_received")),n.callOnTokenReceivedIfExists(e),n.inImplicitFlow=!1,!0})).catch((function(e){return n.eventsSubject.next(new me("token_validation_error",e)),n.logger.error("Error validating tokens"),n.logger.error(e),Promise.reject(e)})):(this.eventsSubject.next(new de("token_received")),this.clearHashAfterLogin&&!e.preventClearHashAfterLogin&&(location.hash=""),this.callOnTokenReceivedIfExists(e),Promise.resolve(!0))},t.prototype.parseState=function(e){var t=e,n="";if(e){var r=e.indexOf(this.config.nonceStateSeparator);r>-1&&(t=e.substr(0,r),n=e.substr(r+this.config.nonceStateSeparator.length))}return[t,n]},t.prototype.validateNonce=function(e){var t;return(t=this.saveNoncesInLocalStorage&&void 0!==window.localStorage?localStorage.getItem("nonce"):this._storage.getItem("nonce"))===e||(console.error("Validating access_token failed, wrong state/nonce.",t,e),!1)},t.prototype.storeIdToken=function(e){this._storage.setItem("id_token",e.idToken),this._storage.setItem("id_token_claims_obj",e.idTokenClaimsJson),this._storage.setItem("id_token_expires_at",""+e.idTokenExpiresAt),this._storage.setItem("id_token_stored_at",""+Date.now())},t.prototype.storeSessionState=function(e){this._storage.setItem("session_state",e)},t.prototype.getSessionState=function(){return this._storage.getItem("session_state")},t.prototype.handleLoginError=function(e,t){e.onLoginError&&e.onLoginError(t),this.clearHashAfterLogin&&!e.preventClearHashAfterLogin&&(location.hash="")},t.prototype.processIdToken=function(e,t,n){var r=this;void 0===n&&(n=!1);var i,o=e.split("."),a=se(this.padBase64(o[0])),s=JSON.parse(a),c=se(this.padBase64(o[1])),l=JSON.parse(c);if(i=this.saveNoncesInLocalStorage&&void 0!==window.localStorage?localStorage.getItem("nonce"):this._storage.getItem("nonce"),Array.isArray(l.aud)){if(l.aud.every((function(e){return e!==r.clientId}))){var p="Wrong audience: "+l.aud.join(",");return this.logger.warn(p),Promise.reject(p)}}else if(l.aud!==this.clientId)return this.logger.warn(p="Wrong audience: "+l.aud),Promise.reject(p);if(!l.sub)return this.logger.warn(p="No sub claim in id_token"),Promise.reject(p);if(this.sessionChecksEnabled&&this.silentRefreshSubject&&this.silentRefreshSubject!==l.sub)return this.logger.warn(p="After refreshing, we got an id_token for another user (sub). Expected sub: "+this.silentRefreshSubject+", received sub: "+l.sub),Promise.reject(p);if(!l.iat)return this.logger.warn(p="No iat claim in id_token"),Promise.reject(p);if(!this.skipIssuerCheck&&l.iss!==this.issuer)return this.logger.warn(p="Wrong issuer: "+l.iss),Promise.reject(p);if(!n&&l.nonce!==i)return this.logger.warn(p="Wrong nonce: "+l.nonce),Promise.reject(p);if(this.hasOwnProperty("responseType")&&"code"===this.responseType&&(this.disableAtHashCheck=!0),!this.disableAtHashCheck&&this.requestAccessToken&&!l.at_hash)return this.logger.warn(p="An at_hash is needed!"),Promise.reject(p);var u=Date.now(),d=1e3*l.iat,h=1e3*l.exp,m=1e3*(this.clockSkewInSec||600);if(d-m>=u||h+m<=u)return p="Token has expired",console.error(p),console.error({now:u,issuedAtMSec:d,expiresAtMSec:h}),Promise.reject(p);var f={accessToken:t,idToken:e,jwks:this.jwks,idTokenClaims:l,idTokenHeader:s,loadKeys:function(){return r.loadJwks()}};return this.disableAtHashCheck?this.checkSignature(f).then((function(t){return{idToken:e,idTokenClaims:l,idTokenClaimsJson:c,idTokenHeader:s,idTokenHeaderJson:a,idTokenExpiresAt:h}})):this.checkAtHash(f).then((function(t){if(!r.disableAtHashCheck&&r.requestAccessToken&&!t){var n="Wrong at_hash";return r.logger.warn(n),Promise.reject(n)}return r.checkSignature(f).then((function(t){var n={idToken:e,idTokenClaims:l,idTokenClaimsJson:c,idTokenHeader:s,idTokenHeaderJson:a,idTokenExpiresAt:h};return r.disableAtHashCheck?n:r.checkAtHash(f).then((function(e){if(r.requestAccessToken&&!e){var t="Wrong at_hash";return r.logger.warn(t),Promise.reject(t)}return n}))}))}))},t.prototype.getIdentityClaims=function(){var e=this._storage.getItem("id_token_claims_obj");return e?JSON.parse(e):null},t.prototype.getGrantedScopes=function(){var e=this._storage.getItem("granted_scopes");return e?JSON.parse(e):null},t.prototype.getIdToken=function(){return this._storage?this._storage.getItem("id_token"):null},t.prototype.padBase64=function(e){for(;e.length%4!=0;)e+="=";return e},t.prototype.getAccessToken=function(){return this._storage?this._storage.getItem("access_token"):null},t.prototype.getRefreshToken=function(){return this._storage?this._storage.getItem("refresh_token"):null},t.prototype.getAccessTokenExpiration=function(){return this._storage.getItem("expires_at")?parseInt(this._storage.getItem("expires_at"),10):null},t.prototype.getAccessTokenStoredAt=function(){return parseInt(this._storage.getItem("access_token_stored_at"),10)},t.prototype.getIdTokenStoredAt=function(){return parseInt(this._storage.getItem("id_token_stored_at"),10)},t.prototype.getIdTokenExpiration=function(){return this._storage.getItem("id_token_expires_at")?parseInt(this._storage.getItem("id_token_expires_at"),10):null},t.prototype.hasValidAccessToken=function(){if(this.getAccessToken()){var e=this._storage.getItem("expires_at"),t=new Date;return!(e&&parseInt(e,10)<t.getTime())}return!1},t.prototype.hasValidIdToken=function(){if(this.getIdToken()){var e=this._storage.getItem("id_token_expires_at"),t=new Date;return!(e&&parseInt(e,10)<t.getTime())}return!1},t.prototype.getCustomTokenResponseProperty=function(e){return this._storage&&this.config.customTokenParameters&&this.config.customTokenParameters.indexOf(e)>=0&&null!==this._storage.getItem(e)?JSON.parse(this._storage.getItem(e)):null},t.prototype.authorizationHeader=function(){return"Bearer "+this.getAccessToken()},t.prototype.logOut=function(e,t){var n=this;void 0===e&&(e=!1),void 0===t&&(t="");var r=this.getIdToken();if(this._storage.removeItem("access_token"),this._storage.removeItem("id_token"),this._storage.removeItem("refresh_token"),this.saveNoncesInLocalStorage?(localStorage.removeItem("nonce"),localStorage.removeItem("PKCI_verifier")):(this._storage.removeItem("nonce"),this._storage.removeItem("PKCI_verifier")),this._storage.removeItem("expires_at"),this._storage.removeItem("id_token_claims_obj"),this._storage.removeItem("id_token_expires_at"),this._storage.removeItem("id_token_stored_at"),this._storage.removeItem("access_token_stored_at"),this._storage.removeItem("granted_scopes"),this._storage.removeItem("session_state"),this.config.customTokenParameters&&this.config.customTokenParameters.forEach((function(e){return n._storage.removeItem(e)})),this.silentRefreshSubject=null,this.eventsSubject.next(new he("logout")),this.logoutUrl&&!e&&(r||this.postLogoutRedirectUri)){var o;if(!this.validateUrlForHttps(this.logoutUrl))throw new Error("logoutUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");if(this.logoutUrl.indexOf("{{")>-1)o=this.logoutUrl.replace(/\{\{id_token\}\}/,r).replace(/\{\{client_id\}\}/,this.clientId);else{var a=new i.h;r&&(a=a.set("id_token_hint",r));var s=this.postLogoutRedirectUri||this.redirectUri;s&&(a=a.set("post_logout_redirect_uri",s),t&&(a=a.set("state",t))),o=this.logoutUrl+(this.logoutUrl.indexOf("?")>-1?"&":"?")+a.toString()}this.config.openUri(o)}},t.prototype.createAndSaveNonce=function(){var e=this;return this.createNonce().then((function(t){return e.saveNoncesInLocalStorage&&void 0!==window.localStorage?localStorage.setItem("nonce",t):e._storage.setItem("nonce",t),t}))},t.prototype.ngOnDestroy=function(){this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.removeSilentRefreshEventListener();var e=this.document.getElementById(this.silentRefreshIFrameName);e&&e.remove(),this.stopSessionCheckTimer(),this.removeSessionCheckEventListener();var t=this.document.getElementById(this.sessionCheckIFrameName);t&&t.remove()},t.prototype.createNonce=function(){var e=this;return new Promise((function(t){if(e.rngUrl)throw new Error("createNonce with rng-web-api has not been implemented so far");var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=45,i="",o="undefined"==typeof self?null:self.crypto||self.msCrypto;if(o){var a=new Uint8Array(r);o.getRandomValues(a),a.map||(a.map=Array.prototype.map),a=a.map((function(e){return n.charCodeAt(e%n.length)})),i=String.fromCharCode.apply(null,a)}else for(;0<r--;)i+=n[Math.random()*n.length|0];t(ce(i))}))},t.prototype.checkAtHash=function(e){return Object(p.b)(this,void 0,void 0,(function(){return Object(p.e)(this,(function(t){return this.tokenValidationHandler?[2,this.tokenValidationHandler.validateAtHash(e)]:(this.logger.warn("No tokenValidationHandler configured. Cannot check at_hash."),[2,!0])}))}))},t.prototype.checkSignature=function(e){return this.tokenValidationHandler?this.tokenValidationHandler.validateSignature(e):(this.logger.warn("No tokenValidationHandler configured. Cannot check signature."),Promise.resolve(null))},t.prototype.initLoginFlow=function(e,t){return void 0===e&&(e=""),void 0===t&&(t={}),"code"===this.responseType?this.initCodeFlow(e,t):this.initImplicitFlow(e,t)},t.prototype.initCodeFlow=function(e,t){var n=this;void 0===e&&(e=""),void 0===t&&(t={}),""!==this.loginUrl?this.initCodeFlowInternal(e,t):this.events.pipe(Object(H.a)((function(e){return"discovery_document_loaded"===e.type}))).subscribe((function(r){return n.initCodeFlowInternal(e,t)}))},t.prototype.initCodeFlowInternal=function(e,t){if(void 0===e&&(e=""),void 0===t&&(t={}),!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");this.createLoginUrl(e,"",null,!1,t).then(this.config.openUri).catch((function(e){console.error("Error in initAuthorizationCodeFlow"),console.error(e)}))},t.prototype.createChallangeVerifierPairForPKCE=function(){return Object(p.b)(this,void 0,void 0,(function(){var e;return Object(p.e)(this,(function(t){switch(t.label){case 0:if(!this.crypto)throw new Error("PKCE support for code flow needs a CryptoHander. Did you import the OAuthModule using forRoot() ?");return[4,this.createNonce()];case 1:return e=t.sent(),[4,this.crypto.calcHash(e,"sha-256")];case 2:return[2,[ce(t.sent()),e]]}}))}))},t.prototype.extractRecognizedCustomParameters=function(e){var t=new Map;return this.config.customTokenParameters?(this.config.customTokenParameters.forEach((function(n){e[n]&&t.set(n,JSON.stringify(e[n]))})),t):t},t.prototype.revokeTokenAndLogout=function(){var e,t,n=this,r=this.revocationEndpoint,o=this.getAccessToken(),a=this.getRefreshToken();if(o){var s=new i.h,c=(new i.g).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){var l=btoa(this.clientId+":"+this.dummyClientSecret);c=c.set("Authorization","Basic "+l)}if(this.useHttpBasicAuth||(s=s.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(s=s.set("client_secret",this.dummyClientSecret)),this.customQueryParams)try{for(var u=Object(p.i)(Object.getOwnPropertyNames(this.customQueryParams)),d=u.next();!d.done;d=u.next()){var h=d.value;s=s.set(h,this.customQueryParams[h])}}catch(m){e={error:m}}finally{try{d&&!d.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}return new Promise((function(e,t){var i,l;if(o){var p=s.set("token",o).set("token_type_hint","access_token");i=n.http.post(r,p,{headers:c})}else i=Object(C.a)(null);a?(p=s.set("token",a).set("token_type_hint","refresh_token"),l=n.http.post(r,p,{headers:c})):l=Object(C.a)(null),Object(U.a)([i,l]).subscribe((function(t){n.logOut(),e(t),n.logger.info("Token successfully revoked")}),(function(e){n.logger.error("Error revoking token",e),n.eventsSubject.next(new me("token_revoke_error",e)),t(e)}))}))}},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275inject"](l.NgZone),l["\u0275\u0275inject"](i.b),l["\u0275\u0275inject"](oe,8),l["\u0275\u0275inject"](le,8),l["\u0275\u0275inject"](fe,8),l["\u0275\u0275inject"](pe),l["\u0275\u0275inject"](ie),l["\u0275\u0275inject"](ye,8),l["\u0275\u0275inject"](r.e))},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(fe),Ie=function(){return function(){}}(),_e=function(){return function(){}}(),be=function(){function e(){}return e.prototype.handleError=function(e){return Object(L.a)(e)},e}(),we=function(){function e(e,t,n,r){this.authStorage=e,this.oAuthService=t,this.errorHandler=n,this.moduleConfig=r}return e.prototype.checkUrl=function(e){return this.moduleConfig.resourceServer.customUrlValidation?this.moduleConfig.resourceServer.customUrlValidation(e):!this.moduleConfig.resourceServer.allowedUrls||!!this.moduleConfig.resourceServer.allowedUrls.find((function(t){return e.startsWith(t)}))},e.prototype.intercept=function(e,t){var n,r,i=this,o=e.url.toLowerCase();return this.moduleConfig&&this.moduleConfig.resourceServer&&this.checkUrl(o)?this.moduleConfig.resourceServer.sendAccessToken?Object(j.a)(Object(C.a)(this.oAuthService.getAccessToken()).pipe(Object(H.a)((function(e){return!!e}))),this.oAuthService.events.pipe(Object(H.a)((function(e){return"token_received"===e.type})),(n=this.oAuthService.waitForTokenInMsec||0,void 0===r&&(r=F.a),function(e,t,n){return void 0===n&&(n=F.a),function(r){var i=D(e),o=i?+e-n.now():Math.abs(e);return r.lift(new Z(o,i,t,n))}}(n,Object(L.a)(new $),r)),Object(Y.a)((function(e){return Object(C.a)(null)})),Object(X.a)((function(e){return i.oAuthService.getAccessToken()})))).pipe(Object(te.a)(1),Object(ne.a)((function(n){if(n){var r=e.headers.set("Authorization","Bearer "+n);e=e.clone({headers:r})}return t.handle(e).pipe(Object(Y.a)((function(e){return i.errorHandler.handleError(e)})))}))):t.handle(e).pipe(Object(Y.a)((function(e){return i.errorHandler.handleError(e)}))):t.handle(e)},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](oe),l["\u0275\u0275inject"](Se),l["\u0275\u0275inject"](_e),l["\u0275\u0275inject"](Ie,8))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),Te=function(){function e(){}return e.prototype.validateSignature=function(e){return Promise.resolve(null)},e.prototype.validateAtHash=function(e){return Promise.resolve(!0)},e}();function Ee(){return console}function Ce(){return"undefined"!=typeof sessionStorage?sessionStorage:new ae}var xe,Oe,ke,Ae,Re=function(){function e(){}var t;return t=e,e.forRoot=function(e,n){return void 0===e&&(e=null),void 0===n&&(n=Te),{ngModule:t,providers:[Se,pe,{provide:ie,useFactory:Ee},{provide:oe,useFactory:Ce},{provide:le,useClass:n},{provide:ye,useClass:ve},{provide:_e,useClass:be},{provide:Ie,useValue:e},{provide:i.a,useClass:we,multi:!0}]}},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c]]}),e}(),Pe=n("5756"),Ne=function(){function e(){}return e.createNewGuid=function(){var t=window.crypto;if(t&&t.getRandomValues){var n=new Uint8Array(16);return t.getRandomValues(n),n[6]|=64,n[6]&=79,n[8]|=128,n[8]&=191,e.decimalToHex(n[0])+e.decimalToHex(n[1])+e.decimalToHex(n[2])+e.decimalToHex(n[3])+"-"+e.decimalToHex(n[4])+e.decimalToHex(n[5])+"-"+e.decimalToHex(n[6])+e.decimalToHex(n[7])+"-"+e.decimalToHex(n[8])+e.decimalToHex(n[9])+"-"+e.decimalToHex(n[10])+e.decimalToHex(n[11])+e.decimalToHex(n[12])+e.decimalToHex(n[13])+e.decimalToHex(n[14])+e.decimalToHex(n[15])}for(var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",i="0123456789abcdef",o=0,a="",s=0;s<36;s++)"-"!==r[s]&&"4"!==r[s]&&(o=16*Math.random()|0),"x"===r[s]?a+=i[o]:"y"===r[s]?(o&=3,a+=i[o|=8]):a+=r[s];return a},e.isGuid=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},e.decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},e.base64Encode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))})))},e.base64Decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Invalid base64 string")}return decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},e.deserialize=function(e){var t,n=/\+/g,r=/([^&=]+)=([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(n," "))},o={};for(t=r.exec(e);t;)o[i(t[1])]=i(t[2]),t=r.exec(e);return o},e}(),Ue=function(){function e(){}return Object.defineProperty(e,"libraryName",{get:function(){return"Msal.js"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"claims",{get:function(){return"claims"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clientId",{get:function(){return"clientId"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"adalIdToken",{get:function(){return"adal.idtoken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cachePrefix",{get:function(){return"msal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"scopes",{get:function(){return"scopes"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"no_account",{get:function(){return"NO_ACCOUNT"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"consumersUtid",{get:function(){return"9188040d-6c67-4c5b-b112-36a304b66dad"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"upn",{get:function(){return"upn"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt_select_account",{get:function(){return"&prompt=select_account"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt_none",{get:function(){return"&prompt=none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt",{get:function(){return"prompt"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"response_mode_fragment",{get:function(){return"&response_mode=fragment"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"resourceDelimiter",{get:function(){return"|"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cacheDelimiter",{get:function(){return"."},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpWidth",{get:function(){return this._popUpWidth},set:function(e){this._popUpWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpHeight",{get:function(){return this._popUpHeight},set:function(e){this._popUpHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"login",{get:function(){return"LOGIN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"renewToken",{get:function(){return"RENEW_TOKEN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"unknown",{get:function(){return"UNKNOWN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"homeAccountIdentifier",{get:function(){return"homeAccountIdentifier"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"common",{get:function(){return"common"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"openidScope",{get:function(){return"openid"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"profileScope",{get:function(){return"profile"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"interactionTypeRedirect",{get:function(){return"redirectInteraction"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"interactionTypePopup",{get:function(){return"popupInteraction"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"inProgress",{get:function(){return"inProgress"},enumerable:!0,configurable:!0}),e._popUpWidth=483,e._popUpHeight=600,e}();!function(e){e.SCOPE="scope",e.ERROR="error",e.ERROR_DESCRIPTION="error_description",e.ACCESS_TOKEN="access_token",e.ID_TOKEN="id_token",e.EXPIRES_IN="expires_in",e.SESSION_STATE="session_state",e.CLIENT_INFO="client_info"}(xe||(xe={})),function(e){e.AUTHORITY="authority",e.ACQUIRE_TOKEN_ACCOUNT="acquireTokenAccount",e.SESSION_STATE="session.state",e.STATE_LOGIN="state.login",e.STATE_ACQ_TOKEN="state.acquireToken",e.STATE_RENEW="state.renew",e.NONCE_IDTOKEN="nonce.idtoken",e.LOGIN_REQUEST="login.request",e.RENEW_STATUS="token.renew.status",e.URL_HASH="urlHash",e.INTERACTION_STATUS="interaction_status",e.REDIRECT_REQUEST="redirect_request"}(Oe||(Oe={})),function(e){e.IDTOKEN="idtoken",e.CLIENT_INFO="client.info"}(ke||(ke={})),function(e){e.LOGIN_ERROR="login.error",e.ERROR="error",e.ERROR_DESC="error.description"}(Ae||(Ae={}));var Le,je={"login.windows.net":"login.windows.net","login.chinacloudapi.cn":"login.chinacloudapi.cn","login.cloudgovapi.us":"login.cloudgovapi.us","login.microsoftonline.com":"login.microsoftonline.com","login.microsoftonline.de":"login.microsoftonline.de","login.microsoftonline.us":"login.microsoftonline.us"};!function(e){e.ACCOUNT="account",e.SID="sid",e.LOGIN_HINT="login_hint",e.ID_TOKEN="id_token",e.DOMAIN_HINT="domain_hint",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers",e.ACCOUNT_ID="accountIdentifier",e.HOMEACCOUNT_ID="homeAccountIdentifier",e.LOGIN_REQ="login_req",e.DOMAIN_REQ="domain_req"}(Le||(Le={}));var He,Me=[Le.SID,Le.LOGIN_HINT],qe={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none"},Fe=function(e){function t(n,r){var i=e.call(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i.errorCode=n,i.errorMessage=r,i.name="AuthError",i}return p.d(t,e),t.createUnexpectedError=function(e){return new t("unexpected_error","Unexpected error in authentication.: "+e)},t.createNoWindowObjectError=function(e){return new t("no_window_object","No window object available. Details: "+e)},t}(Error),De=function(){function e(){}return e.isEmpty=function(e){return void 0===e||!e||0===e.length},e}(),Be="Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",ze=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.name="ClientAuthError",Object.setPrototypeOf(i,t.prototype),i}return p.d(t,e),t.createEndpointResolutionError=function(e){var n="Error: could not resolve endpoints. Please check network and try again.";return e&&!De.isEmpty(e)&&(n+=" Details: "+e),new t("endpoints_resolution_error",n)},t.createMultipleMatchingTokensInCacheError=function(e){return new t("multiple_matching_tokens","Cache error for scope "+e+": The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements like authority..")},t.createMultipleAuthoritiesInCacheError=function(e){return new t("multiple_authorities","Cache error for scope "+e+": Multiple authorities found in the cache. Pass authority in the API overload..")},t.createPopupWindowError=function(e){var n=Be;return e&&!De.isEmpty(e)&&(n+=" Details: "+e),new t("popup_window_error",n)},t.createTokenRenewalTimeoutError=function(e){return new t("token_renewal_error","URL navigated to is "+e+", Token renewal operation failed due to timeout.")},t.createInvalidIdTokenError=function(e){return new t("invalid_id_token","Invalid ID token format. Given token: "+e)},t.createInvalidStateError=function(e,n){return new t("invalid_state_error","Invalid state. "+e+", state expected : "+n+".")},t.createNonceMismatchError=function(e,n){return new t("nonce_mismatch_error","Nonce is not matching, Nonce received:  "+e+", nonce expected : "+n+".")},t.createLoginInProgressError=function(){return new t("login_progress_error","Login_In_Progress: Error during login call - login is already in progress.")},t.createAcquireTokenInProgressError=function(){return new t("acquiretoken_progress_error","AcquireToken_In_Progress: Error during login call - login is already in progress.")},t.createUserCancelledError=function(){return new t("user_cancelled","User cancelled the flow.")},t.createErrorInCallbackFunction=function(e){return new t("callback_error","Error occurred in token received callback function. "+e+".")},t.createUserLoginRequiredError=function(){return new t("user_login_error","User login is required.")},t.createUserDoesNotExistError=function(){return new t("user_non_existent","User object does not exist. Please call a login API.")},t.createClientInfoDecodingError=function(e){return new t("client_info_decoding_error","The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause. Failed with error: "+e)},t.createClientInfoNotPopulatedError=function(e){return new t("client_info_not_populated_error","The service did not populate client_info in the response, Please verify with the service team Failed with error: "+e)},t.createIdTokenNullOrEmptyError=function(e){return new t("null_or_empty_id_token","The idToken is null or empty. Please review the trace to determine the root cause. Raw ID Token Value: "+e)},t.createIdTokenParsingError=function(e){return new t("id_token_parsing_error","ID token cannot be parsed. Please review stack trace to determine root cause. Failed with error: "+e)},t.createTokenEncodingError=function(e){return new t("token_encoding_error","The token to be decoded is not encoded correctly. Attempted to decode: "+e)},t.createInvalidInteractionTypeError=function(){return new t("invalid_interaction_type","The interaction type passed to the handler was incorrect or unknown")},t.createCacheParseError=function(e){return new t("cannot_parse_cache","invalid key: "+e+", The cached token key is not a valid JSON and cannot be parsed")},t.createBlockTokenRequestsInHiddenIframeError=function(){return new t("block_token_requests","Token calls are blocked in hidden iframes")},t}(Fe),Ge={code:"invalid_authority_type",desc:"The given authority is not a valid type of authority supported by MSAL. Please see here for valid authorities: <insert URL here>."},Ke={code:"authority_uri_insecure",desc:"Authority URIs must use https."},Ve={code:"authority_uri_invalid_path",desc:"Given authority URI is invalid."},We={code:"unsupported_authority_validation",desc:"The authority validation is not supported for this authority type."},Qe={code:"b2c_authority_uri_invalid_path",desc:"The given URI for the B2C authority is invalid."},Xe=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.name="ClientConfigurationError",Object.setPrototypeOf(i,t.prototype),i}return p.d(t,e),t.createNoSetConfigurationError=function(){return new t("no_config_set","Configuration has not been set. Please call the UserAgentApplication constructor with a valid Configuration object.")},t.createStorageNotSupportedError=function(e){return new t("storage_not_supported","The value for the cacheLocation is not supported. Given location: "+e)},t.createRedirectCallbacksNotSetError=function(){return new t("no_redirect_callbacks","No redirect callbacks have been set. Please call handleRedirectCallback() with the appropriate function arguments before continuing. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics.")},t.createInvalidCallbackObjectError=function(e){return new t("invalid_callback_object","The object passed for the callback was invalid. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics. Given value for callback function: "+e)},t.createEmptyScopesArrayError=function(e){return new t("empty_input_scopes_error","Scopes cannot be passed as empty array. Given value: "+e+".")},t.createScopesNonArrayError=function(e){return new t("nonarray_input_scopes_error","Scopes cannot be passed as non-array. Given value: "+e+".")},t.createClientIdSingleScopeError=function(e){return new t("clientid_input_scopes_error","Client ID can only be provided as a single scope. Given value: "+e+".")},t.createScopesRequiredError=function(e){return new t("scopes_required","Scopes are required to obtain an access token. Given value: "+e)},t.createInvalidPromptError=function(e){return new t("invalid_prompt_value","Supported prompt values are 'login', 'select_account', 'consent' and 'none' Given value: "+e)},t.createClaimsRequestParsingError=function(e){return new t("claims_request_parsing_error","Could not parse the given claims request object. Given value: "+e)},t.createEmptyRequestError=function(){return new t("empty_request_error","Request object is required.")},t.createInvalidCorrelationIdError=function(){return new t("invalid_guid_sent_as_correlationId","Please set the correlationId as a valid guid")},t.createTelemetryConfigError=function(e){var n={applicationName:"string",applicationVersion:"string",telemetryEmitter:"function"};return new t("telemetry_config_error","Telemetry config is not configured with required values mising values: "+Object.keys(n).reduce((function(t,r){return e[r]?t:t.concat([r+" ("+n[r]+")"])}),[]).join(","))},t}(ze),Je=function(){function e(){}return e.isIntersectingScopes=function(e,t){e=this.convertToLowerCase(e);for(var n=0;n<t.length;n++)if(e.indexOf(t[n].toLowerCase())>-1)return!0;return!1},e.containsScope=function(e,t){return e=this.convertToLowerCase(e),t.every((function(t){return e.indexOf(t.toString().toLowerCase())>=0}))},e.convertToLowerCase=function(e){return e.map((function(e){return e.toLowerCase()}))},e.removeElement=function(e,t){return e.filter((function(e){return e!==t}))},e.parseScope=function(e){var t="";if(e)for(var n=0;n<e.length;++n)t+=n!==e.length-1?e[n]+" ":e[n];return t},e.validateInputScope=function(e,t,n){if(e){if(!Array.isArray(e))throw Xe.createScopesNonArrayError(e);if(e.length<1)throw Xe.createEmptyScopesArrayError(e.toString());if(e.indexOf(n)>-1&&e.length>1)throw Xe.createClientIdSingleScopeError(e.toString())}else if(t)throw Xe.createScopesRequiredError(e)},e.getScopeFromState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},e.appendScopes=function(e,t){return e?t?e.concat(t):e:null},e}(),Ye=function(){function e(){}return e.createNavigateUrl=function(e){var t=this.createNavigationUrlString(e),n=e.authorityInstance.AuthorizationEndpoint;return n.indexOf("?")<0?n+="?":n+="&",""+n+t.join("&")},e.createNavigationUrlString=function(e){var t=e.scopes;-1===t.indexOf(e.clientId)&&t.push(e.clientId);var n=[];return n.push("response_type="+e.responseType),this.translateclientIdUsedInScope(t,e.clientId),n.push("scope="+encodeURIComponent(Je.parseScope(t))),n.push("client_id="+encodeURIComponent(e.clientId)),n.push("redirect_uri="+encodeURIComponent(e.redirectUri)),n.push("state="+encodeURIComponent(e.state)),n.push("nonce="+encodeURIComponent(e.nonce)),n.push("client_info=1"),n.push("x-client-SKU="+e.xClientSku),n.push("x-client-Ver="+e.xClientVer),e.promptValue&&n.push("prompt="+encodeURIComponent(e.promptValue)),e.claimsValue&&n.push("claims="+encodeURIComponent(e.claimsValue)),e.queryParameters&&n.push(e.queryParameters),e.extraQueryParameters&&n.push(e.extraQueryParameters),n.push("client-request-id="+encodeURIComponent(e.correlationId)),n},e.translateclientIdUsedInScope=function(e,t){var n=e.indexOf(t);n>=0&&(e.splice(n,1),-1===e.indexOf("openid")&&e.push("openid"),-1===e.indexOf("profile")&&e.push("profile"))},e.getDefaultRedirectUri=function(){return window.location.href.split("?")[0].split("#")[0]},e.replaceTenantPath=function(e,t){e=e.toLowerCase();var n=this.GetUrlComponents(e),r=n.PathSegments;return!t||0===r.length||r[0]!==Ue.common&&r[0]!==Le.ORGANIZATIONS||(r[0]=t),this.constructAuthorityUriFromObject(n,r)},e.constructAuthorityUriFromObject=function(e,t){return this.CanonicalizeUri(e.Protocol+"//"+e.HostNameAndPort+"/"+t.join("/"))},e.GetUrlComponents=function(e){if(!e)throw"Url required";var t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=e.match(t);if(!n||n.length<6)throw"Valid url required";var r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5]},i=r.AbsolutePath.split("/");return i=i.filter((function(e){return e&&e.length>0})),r.PathSegments=i,r},e.CanonicalizeUri=function(t){return t&&(t=t.toLowerCase()),t&&!e.endsWith(t,"/")&&(t+="/"),t},e.endsWith=function(e,t){return!(!e||!t)&&-1!==e.indexOf(t,e.length-t.length)},e.urlRemoveQueryStringParameter=function(e,t){if(De.isEmpty(e))return e;var n=new RegExp("(\\&"+t+"=)[^&]+");return e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+&"),e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+"),e.replace(n,"")},e.getHashFromUrl=function(e){var t=e.indexOf("#"),n=e.indexOf("#/");return n>-1?e.substring(n+2):t>-1?e.substring(t+1):e},e.urlContainsHash=function(t){var n=e.deserializeHash(t);return n.hasOwnProperty(xe.ERROR_DESCRIPTION)||n.hasOwnProperty(xe.ERROR)||n.hasOwnProperty(xe.ACCESS_TOKEN)||n.hasOwnProperty(xe.ID_TOKEN)},e.deserializeHash=function(t){var n=e.getHashFromUrl(t);return Ne.deserialize(n)},e.getHostFromUri=function(e){return String(e).replace(/^(https?:)\/\//,"").split("/")[0]},e}(),$e=function(e,t,n,r,i){this.authority=Ye.CanonicalizeUri(e),this.clientId=t,this.scopes=n,this.homeAccountIdentifier=Ne.base64Encode(r)+"."+Ne.base64Encode(i)},Ze=function(e,t,n,r){this.accessToken=e,this.idToken=t,this.expiresIn=n,this.homeAccountIdentifier=r},et=function(){function e(e,t,n,r,i,o,a){this.authorityInstance=e,this.clientId=t,this.nonce=Ne.createNewGuid(),this.scopes=i?i.slice():[t],this.state=o,this.correlationId=a,this.xClientSku="MSAL.JS",this.xClientVer="1.2.2",this.responseType=n,this.redirectUri=r}return Object.defineProperty(e.prototype,"authority",{get:function(){return this.authorityInstance?this.authorityInstance.CanonicalAuthority:null},enumerable:!0,configurable:!0}),e.prototype.populateQueryParams=function(t,n,r){var i={};n&&(n.prompt&&(this.promptValue=n.prompt),n.claimsRequest&&(this.claimsValue=n.claimsRequest),e.isSSOParam(n)&&(i=this.constructUnifiedCacheQueryParameter(n,null))),r&&(i=this.constructUnifiedCacheQueryParameter(null,r)),i=this.addHintParameters(t,i);var o=n.extraQueryParameters;this.queryParameters=e.generateQueryParametersString(i),this.extraQueryParameters=e.generateQueryParametersString(o)},e.prototype.constructUnifiedCacheQueryParameter=function(e,t){var n,r,i={};if(e)if(e.account){var o=e.account;o.sid?(n=Le.SID,r=o.sid):o.userName&&(n=Le.LOGIN_HINT,r=o.userName)}else e.sid?(n=Le.SID,r=e.sid):e.loginHint&&(n=Le.LOGIN_HINT,r=e.loginHint);else t&&(t.hasOwnProperty(Ue.upn)?(n=Le.ID_TOKEN,r=t.upn):(n=Le.ORGANIZATIONS,r=null));return i=this.addSSOParameter(n,r),e&&e.account&&e.account.homeAccountIdentifier&&(i=this.addSSOParameter(Le.HOMEACCOUNT_ID,e.account.homeAccountIdentifier,i)),i},e.prototype.addHintParameters=function(e,t){return e&&!t[Le.SID]&&(!t[Le.LOGIN_HINT]&&e.sid&&this.promptValue===qe.NONE?t=this.addSSOParameter(Le.SID,e.sid,t):!t[Le.LOGIN_HINT]&&e.userName&&!De.isEmpty(e.userName)&&(t=this.addSSOParameter(Le.LOGIN_HINT,e.userName,t)),!t[Le.DOMAIN_REQ]&&!t[Le.LOGIN_REQ]&&(t=this.addSSOParameter(Le.HOMEACCOUNT_ID,e.homeAccountIdentifier,t))),t},e.prototype.addSSOParameter=function(e,t,n){if(n||(n={}),!t)return n;switch(e){case Le.SID:n[Le.SID]=t;break;case Le.ID_TOKEN:n[Le.LOGIN_HINT]=t,n[Le.DOMAIN_HINT]=Le.ORGANIZATIONS;break;case Le.LOGIN_HINT:n[Le.LOGIN_HINT]=t;break;case Le.ORGANIZATIONS:n[Le.DOMAIN_HINT]=Le.ORGANIZATIONS;break;case Le.CONSUMERS:n[Le.DOMAIN_HINT]=Le.CONSUMERS;break;case Le.HOMEACCOUNT_ID:var r=t.split("."),i=Ne.base64Decode(r[0]),o=Ne.base64Decode(r[1]);n[Le.LOGIN_REQ]=i,n[Le.DOMAIN_REQ]=o,n[Le.DOMAIN_HINT]=o===Ue.consumersUtid?Le.CONSUMERS:Le.ORGANIZATIONS;break;case Le.LOGIN_REQ:n[Le.LOGIN_REQ]=t;break;case Le.DOMAIN_REQ:n[Le.DOMAIN_REQ]=t}return n},e.generateQueryParametersString=function(e){var t=null;return e&&Object.keys(e).forEach((function(n){null==t?t=n+"="+encodeURIComponent(e[n]):t+="&"+n+"="+encodeURIComponent(e[n])})),t},e.isSSOParam=function(e){return e&&(e.account||e.sid||e.loginHint)},e}(),tt=function(){function e(e){if(!e||De.isEmpty(e))return this.uid="",void(this.utid="");try{var t=Ne.base64Decode(e),n=JSON.parse(t);n&&(n.hasOwnProperty("uid")&&(this.uid=n.uid),n.hasOwnProperty("utid")&&(this.utid=n.utid))}catch(r){throw ze.createClientInfoDecodingError(r)}}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid?this._uid:""},set:function(e){this._uid=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"utid",{get:function(){return this._utid?this._utid:""},set:function(e){this._utid=e},enumerable:!0,configurable:!0}),e}(),nt=function(){function e(){}return e.decodeJwt=function(e){if(De.isEmpty(e))return null;var t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);return!t||t.length<4?null:{header:t[1],JWSPayload:t[2],JWSSig:t[3]}},e.extractIdToken=function(e){var t=this.decodeJwt(e);if(!t)return null;try{var n=Ne.base64Decode(t.JWSPayload);return n?JSON.parse(n):null}catch(r){}return null},e}(),rt=function(e){if(De.isEmpty(e))throw ze.createIdTokenNullOrEmptyError(e);try{this.rawIdToken=e,this.claims=nt.extractIdToken(e),this.claims&&(this.claims.hasOwnProperty("iss")&&(this.issuer=this.claims.iss),this.claims.hasOwnProperty("oid")&&(this.objectId=this.claims.oid),this.claims.hasOwnProperty("sub")&&(this.subject=this.claims.sub),this.claims.hasOwnProperty("tid")&&(this.tenantId=this.claims.tid),this.claims.hasOwnProperty("ver")&&(this.version=this.claims.ver),this.claims.hasOwnProperty("preferred_username")&&(this.preferredName=this.claims.preferred_username),this.claims.hasOwnProperty("name")&&(this.name=this.claims.name),this.claims.hasOwnProperty("nonce")&&(this.nonce=this.claims.nonce),this.claims.hasOwnProperty("exp")&&(this.expiration=this.claims.exp),this.claims.hasOwnProperty("home_oid")&&(this.homeObjectId=this.claims.home_oid),this.claims.hasOwnProperty("sid")&&(this.sid=this.claims.sid),this.claims.hasOwnProperty("cloud_instance_host_name")&&(this.cloudInstance=this.claims.cloud_instance_host_name))}catch(t){throw ze.createIdTokenParsingError(t)}},it=function(e,t){this.key=e,this.value=t},ot=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.clientId=t,i.rollbackEnabled=!0,i.migrateCacheEntries(r),i}return p.d(t,e),t.prototype.migrateCacheEntries=function(t){var n=this,r=Ue.cachePrefix+"."+ke.CLIENT_INFO,i=Ue.cachePrefix+"."+Ae.ERROR,o=Ue.cachePrefix+"."+Ae.ERROR_DESC,a=[e.prototype.getItem.call(this,Ue.cachePrefix+"."+ke.IDTOKEN),e.prototype.getItem.call(this,r),e.prototype.getItem.call(this,i),e.prototype.getItem.call(this,o)];[ke.IDTOKEN,ke.CLIENT_INFO,Ae.ERROR,Ae.ERROR_DESC].forEach((function(e,r){return n.duplicateCacheEntry(e,a[r],t)}))},t.prototype.duplicateCacheEntry=function(e,t,n){t&&this.setItem(e,t,n)},t.prototype.generateCacheKey=function(e,t){try{return JSON.parse(e),e}catch(n){return 0===e.indexOf(""+Ue.cachePrefix)||0===e.indexOf(Ue.adalIdToken)?e:t?Ue.cachePrefix+"."+this.clientId+"."+e:Ue.cachePrefix+"."+e}},t.prototype.setItem=function(t,n,r,i){e.prototype.setItem.call(this,this.generateCacheKey(t,!0),n,r),this.rollbackEnabled&&e.prototype.setItem.call(this,this.generateCacheKey(t,!1),n,r)},t.prototype.getItem=function(t,n){return e.prototype.getItem.call(this,this.generateCacheKey(t,!0),n)},t.prototype.removeItem=function(t){e.prototype.removeItem.call(this,this.generateCacheKey(t,!0)),this.rollbackEnabled&&e.prototype.removeItem.call(this,this.generateCacheKey(t,!1))},t.prototype.resetCacheItems=function(){var t,n=window[this.cacheLocation];for(t in n)n.hasOwnProperty(t)&&-1!==t.indexOf(Ue.cachePrefix)&&e.prototype.removeItem.call(this,t)},t.prototype.resetTempCacheItems=function(e){var t,n=window[this.cacheLocation];for(t in n)e&&-1===t.indexOf(e)||this.tokenRenewalInProgress(e)||(this.removeItem(t),this.setItemCookie(t,"",-1),this.clearMsalCookie(e));this.removeItem(Oe.INTERACTION_STATUS),this.removeItem(Oe.REDIRECT_REQUEST)},t.prototype.setItemCookie=function(t,n,r){e.prototype.setItemCookie.call(this,this.generateCacheKey(t,!0),n,r),this.rollbackEnabled&&e.prototype.setItemCookie.call(this,this.generateCacheKey(t,!1),n,r)},t.prototype.getItemCookie=function(t){return e.prototype.getItemCookie.call(this,this.generateCacheKey(t,!0))},t.prototype.getAllAccessTokens=function(e,t){var n=this;return Object.keys(window[this.cacheLocation]).reduce((function(r,i){if(i.match(e)&&i.match(t)&&i.match(Ue.scopes)){var o=n.getItem(i);if(o)try{var a=JSON.parse(i),s=new it(a,JSON.parse(o));return r.concat([s])}catch(c){throw ze.createCacheParseError(i)}}return r}),[])},t.prototype.tokenRenewalInProgress=function(e){var t=this.getItem(Oe.RENEW_STATUS+"|"+e);return!(!t||t!==Ue.inProgress)},t.prototype.clearMsalCookie=function(e){this.clearItemCookie(Oe.NONCE_IDTOKEN+"|"+e),this.clearItemCookie(Oe.STATE_LOGIN+"|"+e),this.clearItemCookie(Oe.LOGIN_REQUEST+"|"+e),this.clearItemCookie(Oe.STATE_ACQ_TOKEN+"|"+e)},t.generateAcquireTokenAccountKey=function(e,t){return""+Oe.ACQUIRE_TOKEN_ACCOUNT+Ue.resourceDelimiter+e+Ue.resourceDelimiter+t},t.generateAuthorityKey=function(e){return""+Oe.AUTHORITY+Ue.resourceDelimiter+e},t}(function(){function e(e){if(!window)throw Fe.createNoWindowObjectError("Browser storage class could not find window object");if(void 0===window[e]||null==window[e])throw Xe.createStorageNotSupportedError(e);this.cacheLocation=e}return e.prototype.setItem=function(e,t,n){window[this.cacheLocation].setItem(e,t),n&&this.setItemCookie(e,t)},e.prototype.getItem=function(e,t){return t&&this.getItemCookie(e)?this.getItemCookie(e):window[this.cacheLocation].getItem(e)},e.prototype.removeItem=function(e){return window[this.cacheLocation].removeItem(e)},e.prototype.clear=function(){return window[this.cacheLocation].clear()},e.prototype.setItemCookie=function(e,t,n){var r=e+"="+t+";path=/;";n&&(r+="expires="+this.getCookieExpirationTime(n)+";"),document.cookie=r},e.prototype.getItemCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},e.prototype.clearItemCookie=function(e){this.setItemCookie(e,"",-1)},e.prototype.getCookieExpirationTime=function(e){var t=new Date;return new Date(t.getTime()+24*e*60*60*1e3).toUTCString()},e}()),at=function(){function e(e,t,n,r,i,o,a){this.accountIdentifier=e,this.homeAccountIdentifier=t,this.userName=n,this.name=r,this.idToken=i,this.idTokenClaims=i,this.sid=o,this.environment=a}return e.createAccount=function(t,n){var r,i=t.objectId||t.subject,o=n?n.uid:"",a=n?n.utid:"";return De.isEmpty(o)||De.isEmpty(a)||(r=Ne.base64Encode(o)+"."+Ne.base64Encode(a)),new e(i,r,t.preferredName,t.name,t.claims,t.sid,t.issuer)},e.compareAccounts=function(e,t){return!!(e&&t&&e.homeAccountIdentifier&&t.homeAccountIdentifier&&e.homeAccountIdentifier===t.homeAccountIdentifier)},e}(),st=function(){function e(){}return e.isInIframe=function(){return window.parent!==window},e.isInPopup=function(){return!(!window.opener||window.opener===window)},e.monitorWindowForHash=function(t,n,r,i){return new Promise((function(o,a){var s=n/e.POLLING_INTERVAL_MS,c=0,l=setInterval((function(){if(t.closed)return clearInterval(l),void a(ze.createUserCancelledError());var e;try{e=t.location.href}catch(n){}if(i)c++;else{if(!e||"about:blank"===e)return;c++}e&&Ye.urlContainsHash(e)?(clearInterval(l),o(t.location.hash)):c>s&&(clearInterval(l),a(ze.createTokenRenewalTimeoutError(r)))}),e.POLLING_INTERVAL_MS)}))},e.loadFrame=function(e,t,n,r){var i=this;return r.info("LoadFrame: "+t),new Promise((function(o,a){setTimeout((function(){var n=i.loadFrameSync(e,t,r);n?o(n):a("Unable to load iframe with name: "+t)}),n)}))},e.loadFrameSync=function(t,n,r){var i=e.addHiddenIFrame(n,r);return i?(""!==i.src&&"about:blank"!==i.src||(i.src=t,r.infoPii("Frame Name : "+n+" Navigated to: "+t)),i):null},e.addHiddenIFrame=function(e,t){if(void 0===e)return null;t.info("Add msal frame to document:"+e);var n=document.getElementById(e);if(!n){if(document.createElement&&document.documentElement&&-1===window.navigator.userAgent.indexOf("MSIE 5.0")){var r=document.createElement("iframe");r.setAttribute("id",e),r.style.visibility="hidden",r.style.position="absolute",r.style.width=r.style.height="0",r.style.border="0",r.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),n=document.getElementsByTagName("body")[0].appendChild(r)}else document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeend","<iframe name='"+e+"' id='"+e+"' style='display:none'></iframe>");window.frames&&window.frames[e]&&(n=window.frames[e])}return n},e.removeHiddenIframe=function(e){document.body===e.parentNode&&document.body.removeChild(e)},e.getIframeWithHash=function(e){var t=document.getElementsByTagName("iframe");return Array.apply(null,Array(t.length)).map((function(e,n){return t.item(n)})).filter((function(t){try{return t.contentWindow.location.hash===e}catch(n){return!1}}))[0]},e.getPopups=function(){return window.openedWindows||(window.openedWindows=[]),window.openedWindows},e.getPopUpWithHash=function(t){return e.getPopups().filter((function(e){try{return e.location.hash===t}catch(n){return!1}}))[0]},e.trackPopup=function(t){e.getPopups().push(t)},e.closePopups=function(){e.getPopups().forEach((function(e){return e.close()}))},e.blockReloadInHiddenIframes=function(){if(Ye.urlContainsHash(window.location.hash)&&e.isInIframe())throw ze.createBlockTokenRequestsInHiddenIframeError()},e.checkIfBackButtonIsPressed=function(e){var t=e.getItem(Oe.REDIRECT_REQUEST);if(t&&!Ye.urlContainsHash(window.location.hash)){var n=t.split(Ue.resourceDelimiter);e.resetTempCacheItems(n.length>1?n[n.length-1]:null)}},e.POLLING_INTERVAL_MS=50,e}(),ct=function(){function e(){}return e.parseExpiresIn=function(e){return e||(e="3599"),parseInt(e,10)},e.now=function(){return Math.round((new Date).getTime()/1e3)},e}(),lt=function(){function e(){}return e.validateRequest=function(e,t,n,r,i){if(!t&&!e)throw Xe.createEmptyRequestError();if(r==Ue.interactionTypeRedirect&&!i)throw Xe.createRedirectCallbacksNotSetError();var o,a;e&&(o=t?Je.appendScopes(e.scopes,e.extraScopesToConsent):e.scopes,Je.validateInputScope(o,!t,n),this.validatePromptParameter(e.prompt),a=this.validateEQParameters(e.extraQueryParameters,e.claimsRequest),this.validateClaimsRequest(e.claimsRequest));var s=this.validateAndGenerateState(e&&e.state),c=this.validateAndGenerateCorrelationId(e&&e.correlationId);return p.a({},e,{extraQueryParameters:a,scopes:o,state:s,correlationId:c})},e.validatePromptParameter=function(e){if(e&&[qe.LOGIN,qe.SELECT_ACCOUNT,qe.CONSENT,qe.NONE].indexOf(e)<0)throw Xe.createInvalidPromptError(e)},e.validateEQParameters=function(e,t){var n=p.a({},e);return n?(t&&delete n[Ue.claims],Me.forEach((function(e){n[e]&&delete n[e]})),n):null},e.validateClaimsRequest=function(e){if(e)try{JSON.parse(e)}catch(t){throw Xe.createClaimsRequestParsingError(t)}},e.validateAndGenerateState=function(e){return De.isEmpty(e)?Ne.createNewGuid():Ne.createNewGuid()+"|"+e},e.validateAndGenerateCorrelationId=function(e){if(e&&!Ne.isGuid(e))throw Xe.createInvalidCorrelationIdError();return Ne.isGuid(e)?e:Ne.createNewGuid()},e}(),pt=function(){function e(){}return e.setResponseIdToken=function(e,t){if(!e)return null;if(!t)return e;var n=Number(t.expiration);return n&&!e.expiresOn&&(e.expiresOn=new Date(1e3*n)),p.a({},e,{idToken:t,idTokenClaims:t.claims,uniqueId:t.objectId||t.subject,tenantId:t.tenantId})},e}(),ut=function(){function e(){}return e.prototype.sendRequestAsync=function(e,t,n){var r=this;return new Promise((function(n,i){var o=new XMLHttpRequest;if(o.open(t,e,!0),o.onload=function(e){var t;(o.status<200||o.status>=300)&&i(r.handleError(o.responseText));try{t=JSON.parse(o.responseText)}catch(a){i(r.handleError(o.responseText))}n(t)},o.onerror=function(e){i(o.status)},"GET"!==t)throw"not implemented";o.send()}))},e.prototype.handleError=function(e){var t;try{if((t=JSON.parse(e)).error)return t.error;throw e}catch(n){return e}},e}();!function(e){e[e.Aad=0]="Aad",e[e.Adfs=1]="Adfs",e[e.B2C=2]="B2C"}(He||(He={}));var dt,ht=function(e){function t(t,n){return e.call(this,t,n)||this}return p.d(t,e),Object.defineProperty(t.prototype,"AadInstanceDiscoveryEndpointUrl",{get:function(){return t.AadInstanceDiscoveryEndpoint+"?api-version=1.0&authorization_endpoint="+this.CanonicalAuthority+"oauth2/v2.0/authorize"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AuthorityType",{get:function(){return He.Aad},enumerable:!0,configurable:!0}),t.prototype.GetOpenIdConfigurationEndpointAsync=function(){return p.b(this,void 0,void 0,(function(){return p.e(this,(function(e){return!this.IsValidationEnabled||this.IsInTrustedHostList(this.CanonicalAuthorityUrlComponents.HostNameAndPort)?[2,this.DefaultOpenIdConfigurationEndpoint]:[2,(new ut).sendRequestAsync(this.AadInstanceDiscoveryEndpointUrl,"GET",!0).then((function(e){return e.tenant_discovery_endpoint}))]}))}))},t.prototype.IsInTrustedHostList=function(e){return je[e.toLowerCase()]},t.AadInstanceDiscoveryEndpoint="https://login.microsoftonline.com/common/discovery/instance",t}(function(){function e(e,t){this.IsValidationEnabled=t,this.CanonicalAuthority=e,this.validateAsUri()}return Object.defineProperty(e.prototype,"Tenant",{get:function(){return this.CanonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AuthorizationEndpoint",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.AuthorizationEndpoint.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EndSessionEndpoint",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.EndSessionEndpoint.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SelfSignedJwtAudience",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.Issuer.replace("{tenant}",this.Tenant)},enumerable:!0,configurable:!0}),e.prototype.validateResolved=function(){if(!this.tenantDiscoveryResponse)throw"Please call ResolveEndpointsAsync first"},Object.defineProperty(e.prototype,"CanonicalAuthority",{get:function(){return this.canonicalAuthority},set:function(e){this.canonicalAuthority=Ye.CanonicalizeUri(e),this.canonicalAuthorityUrlComponents=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CanonicalAuthorityUrlComponents",{get:function(){return this.canonicalAuthorityUrlComponents||(this.canonicalAuthorityUrlComponents=Ye.GetUrlComponents(this.CanonicalAuthority)),this.canonicalAuthorityUrlComponents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DefaultOpenIdConfigurationEndpoint",{get:function(){return this.CanonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:!0,configurable:!0}),e.prototype.validateAsUri=function(){var e;try{e=this.CanonicalAuthorityUrlComponents}catch(t){throw Ge}if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw Ke;if(!e.PathSegments||e.PathSegments.length<1)throw Ve},e.prototype.DiscoverEndpoints=function(e){return(new ut).sendRequestAsync(e,"GET",!0).then((function(e){return{AuthorizationEndpoint:e.authorization_endpoint,EndSessionEndpoint:e.end_session_endpoint,Issuer:e.issuer}}))},e.prototype.resolveEndpointsAsync=function(){return p.b(this,void 0,void 0,(function(){var e,t;return p.e(this,(function(n){switch(n.label){case 0:return[4,this.GetOpenIdConfigurationEndpointAsync()];case 1:return e=n.sent(),t=this,[4,this.DiscoverEndpoints(e)];case 2:return t.tenantDiscoveryResponse=n.sent(),[2,this]}}))}))},e}()),mt=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=Ye.GetUrlComponents(t),o=i.PathSegments;if(o.length<3)throw Qe;return r.CanonicalAuthority="https://"+i.HostNameAndPort+"/"+o[0]+"/"+o[1]+"/"+o[2]+"/",r}return p.d(t,e),Object.defineProperty(t.prototype,"AuthorityType",{get:function(){return He.B2C},enumerable:!0,configurable:!0}),t.prototype.GetOpenIdConfigurationEndpointAsync=function(){return p.b(this,void 0,void 0,(function(){return p.e(this,(function(e){if(!this.IsValidationEnabled||this.IsInTrustedHostList(this.CanonicalAuthorityUrlComponents.HostNameAndPort))return[2,this.DefaultOpenIdConfigurationEndpoint];throw We}))}))},t.B2C_PREFIX="tfp",t}(ht),ft=function(){function e(){}return e.DetectAuthorityFromUrl=function(e){switch(e=Ye.CanonicalizeUri(e),Ye.GetUrlComponents(e).PathSegments[0]){case"tfp":return He.B2C;default:return He.Aad}},e.CreateInstance=function(t,n){if(De.isEmpty(t))return null;switch(e.DetectAuthorityFromUrl(t)){case He.B2C:return new mt(t,n);case He.Aad:return new ht(t,n);default:throw Ge}},e}();!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose"}(dt||(dt={}));var gt=function(){function e(e,t){void 0===t&&(t={}),this.level=dt.Info;var n=t.correlationId,r=void 0===n?"":n,i=t.level,o=void 0===i?dt.Info:i,a=t.piiLoggingEnabled,s=void 0!==a&&a;this.localCallback=e,this.correlationId=r,this.level=o,this.piiLoggingEnabled=s}return e.prototype.logMessage=function(e,t,n){if(!(e>this.level||!this.piiLoggingEnabled&&n)){var r,i=(new Date).toUTCString();r=De.isEmpty(this.correlationId)?i+":1.2.2-"+dt[e]+" "+t:i+":"+this.correlationId+"-1.2.2-"+dt[e]+" "+t,this.executeCallback(e,r,n)}},e.prototype.executeCallback=function(e,t,n){this.localCallback&&this.localCallback(e,t,n)},e.prototype.error=function(e){this.logMessage(dt.Error,e,!1)},e.prototype.errorPii=function(e){this.logMessage(dt.Error,e,!0)},e.prototype.warning=function(e){this.logMessage(dt.Warning,e,!1)},e.prototype.warningPii=function(e){this.logMessage(dt.Warning,e,!0)},e.prototype.info=function(e){this.logMessage(dt.Info,e,!1)},e.prototype.infoPii=function(e){this.logMessage(dt.Info,e,!0)},e.prototype.verbose=function(e){this.logMessage(dt.Verbose,e,!1)},e.prototype.verbosePii=function(e){this.logMessage(dt.Verbose,e,!0)},e.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled},e}(),yt={clientId:"",authority:null,validateAuthority:!0,redirectUri:function(){return Ye.getDefaultRedirectUri()},postLogoutRedirectUri:function(){return Ye.getDefaultRedirectUri()},navigateToLoginRequestUrl:!0},vt={cacheLocation:"sessionStorage",storeAuthStateInCookie:!1},St={logger:new gt(null),loadFrameTimeout:6e3,tokenRenewalOffsetSeconds:300,navigateFrameWait:500},It={isAngular:!1,unprotectedResources:new Array,protectedResourceMap:new Map},_t=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.name="ServerError",Object.setPrototypeOf(i,t.prototype),i}return p.d(t,e),t.createServerUnavailableError=function(){return new t("server_unavailable","Server is temporarily unavailable.")},t.createUnknownServerError=function(e){return new t("unknown_server_error",e)},t}(Fe),bt={code:"interaction_required"},wt={code:"consent_required"},Tt={code:"login_required"},Et=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.name="InteractionRequiredAuthError",Object.setPrototypeOf(i,t.prototype),i}return p.d(t,e),t.isInteractionRequiredError=function(e){return e&&[bt.code,wt.code,Tt.code].indexOf(e)>-1},t.createLoginRequiredAuthError=function(e){return new t(Tt.code,e)},t.createInteractionRequiredAuthError=function(e){return new t(bt.code,e)},t.createConsentRequiredAuthError=function(e){return new t(wt.code,e)},t}(_t);function Ct(e){return{uniqueId:"",tenantId:"",tokenType:"",idToken:null,idTokenClaims:null,accessToken:"",scopes:null,expiresOn:null,account:null,accountState:e,fromCache:!1}}var xt,Ot,kt=function(e){return Ne.base64Encode(e)},At=function(e){return"msal."+(e||"")},Rt=function(){function e(e,t){var n;this.startTimestamp=Date.now(),this.eventId=Ne.createNewGuid(),this.event=((n={})[At("event_name")]=e,n[At("start_time")]=this.startTimestamp,n[At("elapsed_time")]=-1,n["Microsoft.MSAL.correlation_id"]=t,n)}return e.prototype.setElapsedTime=function(e){this.event[At("elapsed_time")]=e},e.prototype.stop=function(){this.setElapsedTime(+Date.now()-+this.startTimestamp)},Object.defineProperty(e.prototype,"telemetryCorrelationId",{get:function(){return this.event["Microsoft.MSAL.correlation_id"]},set:function(e){this.event["Microsoft.MSAL.correlation_id"]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventName",{get:function(){return this.event[At("event_name")]},enumerable:!0,configurable:!0}),e.prototype.get=function(){return p.a({},this.event,{eventId:this.eventId})},e}(),Pt=function(e){function t(t,n,r,i){var o=e.call(this,At("default_event"),n)||this;return o.event[At("client_id")]=r,o.event[At("sdk_plaform")]=t.sdk,o.event[At("sdk_version")]=t.sdkVersion,o.event[At("application_name")]=t.applicationName,o.event[At("application_version")]=t.applicationVersion,o.event[At("effective_connection_speed")]=t.networkInformation&&t.networkInformation.connectionSpeed,o.event.Microsoft_MSAL_ui_event_count=o.getEventCount(At("ui_event"),i),o.event.Microsoft_MSAL_http_event_count=o.getEventCount(At("http_event"),i),o.event.Microsoft_MSAL_cache_event_count=o.getEventCount(At("cache_event"),i),o}return p.d(t,e),t.prototype.getEventCount=function(e,t){return t[e]?t[e]:0},t}(Rt),Nt=function(e){return e.telemetryCorrelationId+"-"+e.eventId+"-"+e.eventName},Ut=function(){function e(e,t){this.completedEvents={},this.inProgressEvents={},this.eventCountByCorrelationId={},this.onlySendFailureTelemetry=!1,this.telemetryPlatform=p.a({sdk:Ue.libraryName,sdkVersion:"1.2.2",networkInformation:{connectionSpeed:navigator&&navigator.connection&&navigator.connection.effectiveType}},e.platform),this.clientId=e.clientId,this.onlySendFailureTelemetry=e.onlySendFailureTelemetry,this.telemetryEmitter=t}return e.getTelemetrymanagerStub=function(e){return new this({platform:{applicationName:"UnSetStub",applicationVersion:"0.0"},clientId:e},(function(){}))},e.prototype.startEvent=function(e){if(this.telemetryEmitter){var t=Nt(e);this.inProgressEvents[t]=e}},e.prototype.stopEvent=function(e){var t=Nt(e);this.telemetryEmitter&&this.inProgressEvents[t]&&(e.stop(),this.incrementEventCount(e),this.completedEvents[e.telemetryCorrelationId]=(this.completedEvents[e.telemetryCorrelationId]||[]).concat([e]),delete this.inProgressEvents[t])},e.prototype.flush=function(e){var t=this;if(this.telemetryEmitter&&this.completedEvents[e]){var n=this.getOrphanedEvents(e);n.forEach((function(e){return t.incrementEventCount(e)}));var r=this.completedEvents[e].concat(n);delete this.completedEvents[e];var i=this.eventCountByCorrelationId[e];if(delete this.eventCountByCorrelationId[e],r&&r.length){var o=new Pt(this.telemetryPlatform,e,this.clientId,i),a=r.concat([o]);this.telemetryEmitter(a.map((function(e){return e.get()})))}}},e.prototype.incrementEventCount=function(e){var t,n=e.eventName,r=this.eventCountByCorrelationId[e.telemetryCorrelationId];r?r[n]=r[n]?r[n]+1:1:this.eventCountByCorrelationId[e.telemetryCorrelationId]=((t={})[n]=1,t)},e.prototype.getOrphanedEvents=function(e){var t=this;return Object.keys(this.inProgressEvents).reduce((function(n,r){if(-1!==r.indexOf(e)){var i=t.inProgressEvents[r];return delete t.inProgressEvents[r],n.concat([i])}return n}),[])},e}(),Lt=At("authority"),jt=At("authority_type"),Ht=At("ui_behavior"),Mt=At("tenant_id"),qt=At("user_id"),Ft=At("was_successful"),Dt=At("api_error_code"),Bt=At("login_hint");!function(e){e[e.AcquireTokenRedirect=2001]="AcquireTokenRedirect",e[e.AcquireTokenSilent=2002]="AcquireTokenSilent",e[e.AcquireTokenPopup=2003]="AcquireTokenPopup",e[e.LoginRedirect=2004]="LoginRedirect",e[e.LoginPopup=2005]="LoginPopup"}(xt||(xt={})),function(e){e.AcquireTokenRedirect="AcquireTokenRedirect",e.AcquireTokenSilent="AcquireTokenSilent",e.AcquireTokenPopup="AcquireTokenPopup",e.LoginRedirect="LoginRedirect",e.LoginPopup="LoginPopup"}(Ot||(Ot={}));var zt,Gt=function(e){function t(t,n){var r=e.call(this,At("api_event"),t)||this;return r.logger=n,r}return p.d(t,e),Object.defineProperty(t.prototype,"apiEventIdentifier",{set:function(e){this.event["msal.api_telem_id"]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"apiCode",{set:function(e){this.event["msal.api_id"]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authority",{set:function(e){this.event[Lt]=function(e){var t=Ye.GetUrlComponents(e);if(!je[t.HostNameAndPort.toLocaleLowerCase()])return null;var n=t.PathSegments;if(n&&n.length>=2){var r=n[1]===mt.B2C_PREFIX?2:1;r<n.length&&(n[r]="<tenant>")}return t.Protocol+"//"+t.HostNameAndPort+"/"+n.join("/")}(e).toLowerCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"apiErrorCode",{set:function(e){this.event[Dt]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tenantId",{set:function(e){this.event[Mt]=this.logger.isPiiLoggingEnabled()&&e?kt(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"accountId",{set:function(e){this.event[qt]=this.logger.isPiiLoggingEnabled()&&e?kt(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wasSuccessful",{get:function(){return!0===this.event[Ft]},set:function(e){this.event[Ft]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loginHint",{set:function(e){this.event[Bt]=this.logger.isPiiLoggingEnabled()&&e?kt(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authorityType",{set:function(e){this.event[jt]=e.toLowerCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"promptType",{set:function(e){this.event[Ht]=e.toLowerCase()},enumerable:!0,configurable:!0}),t}(Rt),Kt=function(){function e(e){var t,n,r,i,o,a,s;this.authResponseCallback=null,this.tokenReceivedCallback=null,this.errorReceivedCallback=null,this.config=(r=void 0===(n=(t=e).cache)?{}:n,o=void 0===(i=t.system)?{}:i,s=void 0===(a=t.framework)?{}:a,{auth:p.a({},yt,t.auth),cache:p.a({},vt,r),system:p.a({},St,o),framework:p.a({},It,s)}),this.redirectCallbacksSet=!1,this.logger=this.config.system.logger,this.clientId=this.config.auth.clientId,this.inCookie=this.config.cache.storeAuthStateInCookie,this.telemetryManager=this.getTelemetryManagerFromConfig(this.config.system.telemetry,this.clientId),this.authority=this.config.auth.authority||"https://login.microsoftonline.com/common",this.cacheStorage=new ot(this.clientId,this.config.cache.cacheLocation,this.inCookie),window.activeRenewals={},window.renewStates=[],window.callbackMappedToRenewStates={},window.promiseMappedToRenewStates={},window.msal=this;var c=window.location.hash,l=Ye.urlContainsHash(c);st.checkIfBackButtonIsPressed(this.cacheStorage),!l||st.isInIframe()||st.isInPopup()||this.handleAuthenticationResponse(c)}return Object.defineProperty(e.prototype,"authority",{get:function(){return this.authorityInstance.CanonicalAuthority},set:function(e){this.authorityInstance=ft.CreateInstance(e,this.config.auth.validateAuthority)},enumerable:!0,configurable:!0}),e.prototype.getAuthorityInstance=function(){return this.authorityInstance},e.prototype.handleRedirectCallback=function(e,t){if(!e)throw this.redirectCallbacksSet=!1,Xe.createInvalidCallbackObjectError(e);t?(this.tokenReceivedCallback=e,this.errorReceivedCallback=t,this.logger.warning("This overload for callback is deprecated - please change the format of the callbacks to a single callback as shown: (err: AuthError, response: AuthResponse).")):this.authResponseCallback=e,this.redirectCallbacksSet=!0;var n=this.cacheStorage.getItem(Oe.URL_HASH);n&&this.processCallBack(n,null)},e.prototype.urlContainsHash=function(e){return Ye.urlContainsHash(e)},e.prototype.authResponseHandler=function(e,t,n){if(e===Ue.interactionTypeRedirect)this.errorReceivedCallback?this.tokenReceivedCallback(t):this.authResponseCallback&&this.authResponseCallback(null,t);else{if(e!==Ue.interactionTypePopup)throw ze.createInvalidInteractionTypeError();n(t)}},e.prototype.authErrorHandler=function(e,t,n,r){if(this.cacheStorage.removeItem(Oe.INTERACTION_STATUS),e===Ue.interactionTypeRedirect)this.errorReceivedCallback?this.errorReceivedCallback(t,n.accountState):this.authResponseCallback(t,n);else{if(e!==Ue.interactionTypePopup)throw ze.createInvalidInteractionTypeError();r(t)}},e.prototype.loginRedirect=function(e){var t=lt.validateRequest(e,!0,this.clientId,Ue.interactionTypeRedirect,this.redirectCallbacksSet);this.acquireTokenInteractive(Ue.interactionTypeRedirect,!0,t,null,null)},e.prototype.acquireTokenRedirect=function(e){var t=lt.validateRequest(e,!1,this.clientId,Ue.interactionTypeRedirect,this.redirectCallbacksSet);this.acquireTokenInteractive(Ue.interactionTypeRedirect,!1,t,null,null)},e.prototype.loginPopup=function(e){var t=this,n=lt.validateRequest(e,!0,this.clientId,Ue.interactionTypePopup);return new Promise((function(e,r){t.acquireTokenInteractive(Ue.interactionTypePopup,!0,n,e,r)})).catch((function(e){throw t.cacheStorage.resetTempCacheItems(n.state),e}))},e.prototype.acquireTokenPopup=function(e){var t=this,n=lt.validateRequest(e,!1,this.clientId,Ue.interactionTypePopup);return new Promise((function(e,r){t.acquireTokenInteractive(Ue.interactionTypePopup,!1,n,e,r)})).catch((function(e){throw t.cacheStorage.resetTempCacheItems(n.state),e}))},e.prototype.acquireTokenInteractive=function(e,t,n,r,i){var o=this;st.blockReloadInHiddenIframes();var a=this.cacheStorage.getItem(Oe.INTERACTION_STATUS);if(e===Ue.interactionTypeRedirect&&this.cacheStorage.setItem(Oe.REDIRECT_REQUEST,""+Ue.inProgress+Ue.resourceDelimiter+n.state),a===Ue.inProgress){var s=t?ze.createLoginInProgressError():ze.createAcquireTokenInProgressError(),c=Ct(this.getAccountState(n.state));return this.cacheStorage.resetTempCacheItems(n.state),void this.authErrorHandler(e,s,c,i)}var l=n&&n.account&&!t?n.account:this.getAccount();if(l||et.isSSOParam(n))this.acquireTokenHelper(l,e,t,n,r,i);else{if(!t)return this.logger.info("User login is required"),c=Ct(this.getAccountState(n.state)),this.cacheStorage.resetTempCacheItems(n.state),void this.authErrorHandler(e,ze.createUserLoginRequiredError(),c,i);if(this.extractADALIdToken()&&!n.scopes){this.logger.info("ADAL's idToken exists. Extracting login information from ADAL's idToken ");var p=this.buildIDTokenRequest(n);this.silentLogin=!0,this.acquireTokenSilent(p).then((function(t){o.silentLogin=!1,o.logger.info("Unified cache call is successful"),o.authResponseHandler(e,t,r)}),(function(a){o.silentLogin=!1,o.logger.error("Error occurred during unified cache ATS: "+a),o.acquireTokenHelper(null,e,t,n,r,i)}))}else this.acquireTokenHelper(null,e,t,n,r,i)}},e.prototype.acquireTokenHelper=function(e,t,n,r,i,o){var a=this;this.cacheStorage.setItem(Oe.INTERACTION_STATUS,Ue.inProgress);var s,c,l=r.scopes?r.scopes.join(" ").toLowerCase():this.clientId.toLowerCase(),u=r&&r.authority?ft.CreateInstance(r.authority,this.config.auth.validateAuthority):this.authorityInstance;if(t===Ue.interactionTypePopup){try{c=this.openPopup("about:blank","msal",Ue.popUpWidth,Ue.popUpHeight),st.trackPopup(c)}catch(d){this.logger.info("popup_window_error:"+Be),this.cacheStorage.setItem(Ae.ERROR,"popup_window_error"),this.cacheStorage.setItem(Ae.ERROR_DESC,Be),o&&o(ze.createPopupWindowError())}if(!c)return}u.resolveEndpointsAsync().then((function(){return p.b(a,void 0,void 0,(function(){var a,d,h,m,f;return p.e(this,(function(p){switch(p.label){case 0:if(a=n?"id_token":this.getTokenType(e,r.scopes,!1),d=r.redirectStartPage||window.location.href,s=new et(u,this.clientId,a,this.getRedirectUri(r&&r.redirectUri),r.scopes,r.state,r.correlationId),this.updateCacheEntries(s,e,d),s.populateQueryParams(e,r),h=Ye.createNavigateUrl(s)+Ue.response_mode_fragment,t===Ue.interactionTypeRedirect)n||this.cacheStorage.setItem(""+Oe.STATE_ACQ_TOKEN+Ue.resourceDelimiter+r.state,s.state,this.inCookie);else{if(t!==Ue.interactionTypePopup)throw ze.createInvalidInteractionTypeError();window.renewStates.push(s.state),window.requestType=n?Ue.login:Ue.renewToken,this.registerCallback(s.state,l,i,o)}if(this.navigateWindow(h,c),!c)return[3,4];p.label=1;case 1:return p.trys.push([1,3,,4]),[4,st.monitorWindowForHash(c,this.config.system.loadFrameTimeout,h)];case 2:return m=p.sent(),this.handleAuthenticationResponse(m),this.cacheStorage.removeItem(Oe.INTERACTION_STATUS),this.logger.info("Closing popup window"),this.config.framework.isAngular&&(this.broadcast("msal:popUpHashChanged",m),st.closePopups()),[3,4];case 3:return f=p.sent(),o&&o(f),this.config.framework.isAngular?this.broadcast("msal:popUpClosed",f.errorCode+Ue.resourceDelimiter+f.errorMessage):(this.cacheStorage.removeItem(Oe.INTERACTION_STATUS),c.close()),[3,4];case 4:return[2]}}))}))})).catch((function(e){a.logger.warning("could not resolve endpoints"),a.cacheStorage.resetTempCacheItems(r.state),a.authErrorHandler(t,ze.createEndpointResolutionError(e.toString),Ct(r.state),o),c&&c.close()}))},e.prototype.acquireTokenSilent=function(e){var t=this,n=e.correlationId||Ne.createNewGuid(),r=new Gt(n,this.logger);r.apiEventIdentifier=Ot.AcquireTokenSilent,r.apiCode=xt.AcquireTokenSilent,this.telemetryManager.startEvent(r);var i=lt.validateRequest(e,!1,this.clientId);return new Promise((function(e,n){st.blockReloadInHiddenIframes();var r=i.scopes.join(" ").toLowerCase(),o=i.account||t.getAccount(),a=t.cacheStorage.getItem(Ue.adalIdToken);if(!o&&!i.sid&&!i.loginHint&&De.isEmpty(a))return t.logger.info("User login is required"),n(ze.createUserLoginRequiredError());var s=t.getTokenType(o,i.scopes,!0),c=new et(ft.CreateInstance(i.authority,t.config.auth.validateAuthority),t.clientId,s,t.getRedirectUri(i.redirectUri),i.scopes,i.state,i.correlationId);if(et.isSSOParam(i)||o)c.populateQueryParams(o,i);else if(!o&&!De.isEmpty(a)){var l=nt.extractIdToken(a);t.logger.verbose("ADAL's idToken exists. Extracting login information from ADAL's idToken "),c.populateQueryParams(o,null,l)}var p,u,d=i.claimsRequest||c.claimsValue;if(!d&&!i.forceRefresh)try{u=t.getCachedToken(c,o)}catch(h){p=h}return u?(t.logger.info("Token is already in cache for scope:"+r),e(u),null):p?(t.logger.infoPii(p.errorCode+":"+p.errorMessage),n(p),null):(t.logger.verbose(d?"Skipped cache lookup since claims were given.":i.forceRefresh?"Skipped cache lookup since request.forceRefresh option was set to true":"Token is not in cache for scope:"+r),c.authorityInstance||(c.authorityInstance=i.authority?ft.CreateInstance(i.authority,t.config.auth.validateAuthority):t.authorityInstance),c.authorityInstance.resolveEndpointsAsync().then((function(){window.activeRenewals[r]?(t.logger.verbose("Renew token for scope: "+r+" is in progress. Registering callback"),t.registerCallback(window.activeRenewals[r],r,e,n)):i.scopes&&i.scopes.indexOf(t.clientId)>-1&&1===i.scopes.length?(t.logger.verbose("renewing idToken"),t.silentLogin=!0,t.renewIdToken(i.scopes,e,n,o,c)):(t.logger.verbose("renewing accesstoken"),t.renewToken(i.scopes,e,n,o,c))})).catch((function(e){return t.logger.warning("could not resolve endpoints"),n(ze.createEndpointResolutionError(e.toString())),null})))})).then((function(e){return r.wasSuccessful=!0,e})).catch((function(e){throw t.cacheStorage.resetTempCacheItems(i.state),r.apiErrorCode=e.errorCode,r.wasSuccessful=!1,e})).finally((function(){t.telemetryManager.stopEvent(r),t.telemetryManager.flush(n)}))},e.prototype.openPopup=function(e,t,n,r){try{var i=window.screenLeft?window.screenLeft:window.screenX,o=window.screenTop?window.screenTop:window.screenY,a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=window.open(e,t,"width="+n+", height="+r+", top="+(s/2-r/2+o)+", left="+(a/2-n/2+i));if(!c)throw ze.createPopupWindowError();return c.focus&&c.focus(),c}catch(l){throw this.logger.error("error opening popup "+l.message),this.cacheStorage.removeItem(Oe.INTERACTION_STATUS),ze.createPopupWindowError(l.toString())}},e.prototype.loadIframeTimeout=function(e,t,n){return p.b(this,void 0,void 0,(function(){var r,i,o,a,s;return p.e(this,(function(c){switch(c.label){case 0:return r=window.activeRenewals[n],this.logger.verbose("Set loading state to pending for: "+n+":"+r),this.cacheStorage.setItem(""+Oe.RENEW_STATUS+Ue.resourceDelimiter+r,Ue.inProgress),this.config.system.navigateFrameWait?[4,st.loadFrame(e,t,this.config.system.navigateFrameWait,this.logger)]:[3,2];case 1:return o=c.sent(),[3,3];case 2:o=st.loadFrameSync(e,t,this.logger),c.label=3;case 3:i=o,c.label=4;case 4:return c.trys.push([4,6,,7]),[4,st.monitorWindowForHash(i.contentWindow,this.config.system.loadFrameTimeout,e,!0)];case 5:return(a=c.sent())&&this.handleAuthenticationResponse(a),[3,7];case 6:throw s=c.sent(),this.cacheStorage.getItem(""+Oe.RENEW_STATUS+Ue.resourceDelimiter+r)===Ue.inProgress&&(this.logger.verbose("Loading frame has timed out after: "+this.config.system.loadFrameTimeout/1e3+" seconds for scope "+n+":"+r),r&&window.callbackMappedToRenewStates[r]&&window.callbackMappedToRenewStates[r](null,s),this.cacheStorage.removeItem(""+Oe.RENEW_STATUS+Ue.resourceDelimiter+r)),st.removeHiddenIframe(i),s;case 7:return st.removeHiddenIframe(i),[2]}}))}))},e.prototype.navigateWindow=function(e,t){if(!e||De.isEmpty(e))throw this.logger.info("Navigate url is empty"),Fe.createUnexpectedError("Navigate url is empty");var n=t||window;this.logger.infoPii(t?"Navigated Popup window to:"+e:"Navigate to:"+e),n.location.assign(e)},e.prototype.registerCallback=function(e,t,n,r){var i=this;window.activeRenewals[t]=e,window.promiseMappedToRenewStates[e]||(window.promiseMappedToRenewStates[e]=[]),window.promiseMappedToRenewStates[e].push({resolve:n,reject:r}),window.callbackMappedToRenewStates[e]||(window.callbackMappedToRenewStates[e]=function(n,r){window.activeRenewals[t]=null;for(var o=0;o<window.promiseMappedToRenewStates[e].length;++o)try{if(r)window.promiseMappedToRenewStates[e][o].reject(r);else{if(!n)throw i.cacheStorage.resetTempCacheItems(e),Fe.createUnexpectedError("Error and response are both null");window.promiseMappedToRenewStates[e][o].resolve(n)}}catch(a){i.logger.warning(a)}window.promiseMappedToRenewStates[e]=null,window.callbackMappedToRenewStates[e]=null})},e.prototype.logout=function(){var e=this;this.clearCache(),this.account=null;var t="";this.getPostLogoutRedirectUri()&&(t="post_logout_redirect_uri="+encodeURIComponent(this.getPostLogoutRedirectUri())),this.authorityInstance.resolveEndpointsAsync().then((function(n){e.navigateWindow(n.EndSessionEndpoint?n.EndSessionEndpoint+"?"+t:e.authority+"oauth2/v2.0/logout?"+t)}))},e.prototype.clearCache=function(){window.renewStates=[];for(var e=this.cacheStorage.getAllAccessTokens(Ue.clientId,Ue.homeAccountIdentifier),t=0;t<e.length;t++)this.cacheStorage.removeItem(JSON.stringify(e[t].key));this.cacheStorage.resetCacheItems(),this.cacheStorage.clearMsalCookie()},e.prototype.clearCacheForScope=function(e){for(var t=this.cacheStorage.getAllAccessTokens(Ue.clientId,Ue.homeAccountIdentifier),n=0;n<t.length;n++){var r=t[n];r.value.accessToken===e&&this.cacheStorage.removeItem(JSON.stringify(r.key))}},e.prototype.isCallback=function(e){return this.logger.info("isCallback will be deprecated in favor of urlContainsHash in MSAL.js v2.0."),Ye.urlContainsHash(e)},e.prototype.processCallBack=function(e,t,n){var r,i;this.logger.info("Processing the callback from redirect response"),t||(t=this.getResponseState(e));try{r=this.saveTokenFromHash(e,t)}catch(a){i=a}this.cacheStorage.removeItem(Oe.URL_HASH);try{this.cacheStorage.clearMsalCookie(t.state);var o=this.getAccountState(t.state);if(r){if(t.requestType===Ue.renewToken||r.accessToken?(window.parent!==window?this.logger.verbose("Window is in iframe, acquiring token silently"):this.logger.verbose("acquiring token interactive in progress"),r.tokenType=xe.ACCESS_TOKEN):t.requestType===Ue.login&&(r.tokenType=xe.ID_TOKEN),!n)return void this.authResponseHandler(Ue.interactionTypeRedirect,r)}else if(!n)return this.cacheStorage.resetTempCacheItems(t.state),void this.authErrorHandler(Ue.interactionTypeRedirect,i,Ct(o));n(r,i)}catch(a){throw this.logger.error("Error occurred in token received callback function: "+a),ze.createErrorInCallbackFunction(a.toString())}},e.prototype.handleAuthenticationResponse=function(e){var t=e||window.location.hash,n=st.getIframeWithHash(t),r=st.getPopUpWithHash(t),i=!(!n&&!r),o=this.getResponseState(t),a=null;if(this.logger.info("Returned from redirect url"),i)a=window.callbackMappedToRenewStates[o.state];else{if(a=null,this.config.auth.navigateToLoginRequestUrl){if(this.cacheStorage.setItem(Oe.URL_HASH,t),window.parent===window){var s=this.cacheStorage.getItem(""+Oe.LOGIN_REQUEST+Ue.resourceDelimiter+o.state,this.inCookie);s&&"null"!==s?window.location.href=s:(this.logger.error("Unable to get valid login request url from cache, redirecting to home page"),window.location.href="/")}return}if(window.location.hash="",!this.redirectCallbacksSet)return void this.cacheStorage.setItem(Oe.URL_HASH,t)}this.processCallBack(t,o,a),i&&st.closePopups()},e.prototype.getResponseState=function(e){var t,n=Ye.deserializeHash(e);if(!n)throw Fe.createUnexpectedError("Hash was not parsed correctly.");if(!n.hasOwnProperty("state"))throw Fe.createUnexpectedError("Hash does not contain state.");if((t={requestType:Ue.unknown,state:n.state,stateMatch:!1}).state===this.cacheStorage.getItem(""+Oe.STATE_LOGIN+Ue.resourceDelimiter+t.state,this.inCookie)||t.state===this.silentAuthenticationState)return t.requestType=Ue.login,t.stateMatch=!0,t;if(t.state===this.cacheStorage.getItem(""+Oe.STATE_ACQ_TOKEN+Ue.resourceDelimiter+t.state,this.inCookie))return t.requestType=Ue.renewToken,t.stateMatch=!0,t;if(!t.stateMatch){t.requestType=window.requestType;for(var r=window.renewStates,i=0;i<r.length;i++)if(r[i]===t.state){t.stateMatch=!0;break}}return t},e.prototype.getCachedToken=function(e,t){var n=null,r=e.scopes,i=this.cacheStorage.getAllAccessTokens(this.clientId,t?t.homeAccountIdentifier:null);if(0===i.length)return null;var o=[];if(e.authority){for(a=0;a<i.length;a++)c=(s=i[a]).key.scopes.split(" "),Je.containsScope(c,r)&&Ye.CanonicalizeUri(s.key.authority)===e.authority&&o.push(s);if(0===o.length)return null;if(1!==o.length)throw ze.createMultipleMatchingTokensInCacheError(r.toString());n=o[0]}else{for(var a=0;a<i.length;a++){var s,c=(s=i[a]).key.scopes.split(" ");Je.containsScope(c,r)&&o.push(s)}if(1===o.length)e.authorityInstance=ft.CreateInstance((n=o[0]).key.authority,this.config.auth.validateAuthority);else{if(o.length>1)throw ze.createMultipleMatchingTokensInCacheError(r.toString());var l=this.getUniqueAuthority(i,"authority");if(l.length>1)throw ze.createMultipleAuthoritiesInCacheError(r.toString());e.authorityInstance=ft.CreateInstance(l[0],this.config.auth.validateAuthority)}}if(null!=n){var p=Number(n.value.expiresIn),u=this.config.system.tokenRenewalOffsetSeconds||300;if(p&&p>ct.now()+u){var d=new rt(n.value.idToken);if(!t&&!(t=this.getAccount()))throw Fe.createUnexpectedError("Account should not be null here.");var h=this.getAccountState(e.state),m={uniqueId:"",tenantId:"",tokenType:n.value.idToken===n.value.accessToken?xe.ID_TOKEN:xe.ACCESS_TOKEN,idToken:d,idTokenClaims:d.claims,accessToken:n.value.accessToken,scopes:n.key.scopes.split(" "),expiresOn:new Date(1e3*p),account:t,accountState:h,fromCache:!0};return pt.setResponseIdToken(m,d),m}return this.cacheStorage.removeItem(JSON.stringify(o[0].key)),null}return null},e.prototype.getUniqueAuthority=function(e,t){var n=[],r=[];return e.forEach((function(e){e.key.hasOwnProperty(t)&&-1===r.indexOf(e.key[t])&&(r.push(e.key[t]),n.push(e.key[t]))})),n},e.prototype.extractADALIdToken=function(){var e=this.cacheStorage.getItem(Ue.adalIdToken);return De.isEmpty(e)?null:nt.extractIdToken(e)},e.prototype.renewToken=function(e,t,n,r,i){var o=e.join(" ").toLowerCase();this.logger.verbose("renewToken is called for scope:"+o);var a="msalRenewFrame"+o,s=st.addHiddenIFrame(a,this.logger);this.updateCacheEntries(i,r),this.logger.verbose("Renew token Expected state: "+i.state);var c=Ye.urlRemoveQueryStringParameter(Ye.createNavigateUrl(i),Ue.prompt)+Ue.prompt_none+Ue.response_mode_fragment;window.renewStates.push(i.state),window.requestType=Ue.renewToken,this.registerCallback(i.state,o,t,n),this.logger.infoPii("Navigate to:"+c),s.src="about:blank",this.loadIframeTimeout(c,a,o).catch((function(e){return n(e)}))},e.prototype.renewIdToken=function(e,t,n,r,i){this.logger.info("renewidToken is called");var o=st.addHiddenIFrame("msalIdTokenFrame",this.logger);this.updateCacheEntries(i,r),this.logger.verbose("Renew Idtoken Expected state: "+i.state);var a=Ye.urlRemoveQueryStringParameter(Ye.createNavigateUrl(i),Ue.prompt)+Ue.prompt_none+Ue.response_mode_fragment;this.silentLogin?(window.requestType=Ue.login,this.silentAuthenticationState=i.state):(window.requestType=Ue.renewToken,window.renewStates.push(i.state)),this.registerCallback(i.state,this.clientId,t,n),this.logger.infoPii("Navigate to:"+a),o.src="about:blank",this.loadIframeTimeout(a,"msalIdTokenFrame",this.clientId).catch((function(e){return n(e)}))},e.prototype.saveAccessToken=function(e,t,n,r,i){var o,a,s=p.a({},e),c=new tt(r);if(n.hasOwnProperty(xe.SCOPE)){for(var l=(o=n[xe.SCOPE]).split(" "),u=this.cacheStorage.getAllAccessTokens(this.clientId,t),d=0;d<u.length;d++){var h=u[d];if(h.key.homeAccountIdentifier===e.account.homeAccountIdentifier){var m=h.key.scopes.split(" ");Je.isIntersectingScopes(m,l)&&this.cacheStorage.removeItem(JSON.stringify(h.key))}}var f=ct.parseExpiresIn(n[xe.EXPIRES_IN]);a=ct.now()+f;var g=new $e(t,this.clientId,o,c.uid,c.utid),y=new Ze(n[xe.ACCESS_TOKEN],i.rawIdToken,a.toString(),r);this.cacheStorage.setItem(JSON.stringify(g),JSON.stringify(y)),s.accessToken=n[xe.ACCESS_TOKEN],s.scopes=l}else g=new $e(t,this.clientId,o=this.clientId,c.uid,c.utid),a=Number(i.expiration),y=new Ze(n[xe.ID_TOKEN],n[xe.ID_TOKEN],a.toString(),r),this.cacheStorage.setItem(JSON.stringify(g),JSON.stringify(y)),s.scopes=[o],s.accessToken=n[xe.ID_TOKEN];return a?s.expiresOn=new Date(1e3*a):this.logger.error("Could not parse expiresIn parameter"),s},e.prototype.saveTokenFromHash=function(e,t){this.logger.info("State status:"+t.stateMatch+"; Request type:"+t.requestType);var n,r={uniqueId:"",tenantId:"",tokenType:"",idToken:null,idTokenClaims:null,accessToken:null,scopes:[],expiresOn:null,account:null,accountState:"",fromCache:!1},i=Ye.deserializeHash(e),o="",a="",s=null;if(i.hasOwnProperty(xe.ERROR_DESCRIPTION)||i.hasOwnProperty(xe.ERROR)){if(this.logger.infoPii("Error :"+i[xe.ERROR]+"; Error description:"+i[xe.ERROR_DESCRIPTION]),this.cacheStorage.setItem(Ae.ERROR,i[xe.ERROR]),this.cacheStorage.setItem(Ae.ERROR_DESC,i[xe.ERROR_DESCRIPTION]),t.requestType===Ue.login&&(this.cacheStorage.setItem(Ae.LOGIN_ERROR,i[xe.ERROR_DESCRIPTION]+":"+i[xe.ERROR]),o=ot.generateAuthorityKey(t.state)),t.requestType===Ue.renewToken){o=ot.generateAuthorityKey(t.state);var c,l=this.getAccount();c=l&&!De.isEmpty(l.homeAccountIdentifier)?l.homeAccountIdentifier:Ue.no_account,a=ot.generateAcquireTokenAccountKey(c,t.state)}var p=i[xe.ERROR_DESCRIPTION];n=Et.isInteractionRequiredError(i[xe.ERROR])||Et.isInteractionRequiredError(p)?new Et(i[xe.ERROR],i[xe.ERROR_DESCRIPTION]):new _t(i[xe.ERROR],i[xe.ERROR_DESCRIPTION])}else if(t.stateMatch){this.logger.info("State is right"),i.hasOwnProperty(xe.SESSION_STATE)&&this.cacheStorage.setItem(""+Oe.SESSION_STATE+Ue.resourceDelimiter+t.state,i[xe.SESSION_STATE]),r.accountState=this.getAccountState(t.state);var u="";if(i.hasOwnProperty(xe.ACCESS_TOKEN)){this.logger.info("Fragment has access token"),r.accessToken=i[xe.ACCESS_TOKEN],i.hasOwnProperty(xe.SCOPE)&&(r.scopes=i[xe.SCOPE].split(" ")),i.hasOwnProperty(xe.ID_TOKEN)?(s=new rt(i[xe.ID_TOKEN]),r.idToken=s,r.idTokenClaims=s.claims):(s=new rt(this.cacheStorage.getItem(ke.IDTOKEN)),r=pt.setResponseIdToken(r,s));var d,h=this.populateAuthority(t.state,this.inCookie,this.cacheStorage,s);if(!i.hasOwnProperty(xe.CLIENT_INFO))throw this.logger.warning("ClientInfo not received in the response from AAD"),ze.createClientInfoNotPopulatedError("ClientInfo not received in the response from the server");r.account=at.createAccount(s,new tt(u=i[xe.CLIENT_INFO])),d=r.account&&!De.isEmpty(r.account.homeAccountIdentifier)?r.account.homeAccountIdentifier:Ue.no_account,a=ot.generateAcquireTokenAccountKey(d,t.state);var m=ot.generateAcquireTokenAccountKey(Ue.no_account,t.state),f=this.cacheStorage.getItem(a),g=void 0;De.isEmpty(f)?De.isEmpty(this.cacheStorage.getItem(m))||(r=this.saveAccessToken(r,h,i,u,s)):(g=JSON.parse(f),r.account&&g&&at.compareAccounts(r.account,g)?(r=this.saveAccessToken(r,h,i,u,s),this.logger.info("The user object received in the response is the same as the one passed in the acquireToken request")):this.logger.warning("The account object created from the response is not the same as the one passed in the acquireToken request"))}i.hasOwnProperty(xe.ID_TOKEN)&&(this.logger.info("Fragment has id token"),s=new rt(i[xe.ID_TOKEN]),r=pt.setResponseIdToken(r,s),i.hasOwnProperty(xe.CLIENT_INFO)?u=i[xe.CLIENT_INFO]:this.logger.warning("ClientInfo not received in the response from AAD"),h=this.populateAuthority(t.state,this.inCookie,this.cacheStorage,s),this.account=at.createAccount(s,new tt(u)),r.account=this.account,s&&s.nonce?s.nonce!==this.cacheStorage.getItem(""+Oe.NONCE_IDTOKEN+Ue.resourceDelimiter+t.state,this.inCookie)?(this.account=null,this.cacheStorage.setItem(Ae.LOGIN_ERROR,"Nonce Mismatch. Expected Nonce: "+this.cacheStorage.getItem(""+Oe.NONCE_IDTOKEN+Ue.resourceDelimiter+t.state,this.inCookie)+",Actual Nonce: "+s.nonce),this.logger.error("Nonce Mismatch.Expected Nonce: "+this.cacheStorage.getItem(""+Oe.NONCE_IDTOKEN+Ue.resourceDelimiter+t.state,this.inCookie)+",Actual Nonce: "+s.nonce),n=ze.createNonceMismatchError(this.cacheStorage.getItem(""+Oe.NONCE_IDTOKEN+Ue.resourceDelimiter+t.state,this.inCookie),s.nonce)):(this.cacheStorage.setItem(ke.IDTOKEN,i[xe.ID_TOKEN]),this.cacheStorage.setItem(ke.CLIENT_INFO,u),this.saveAccessToken(r,h,i,u,s)):(o=t.state,a=t.state,this.logger.error("Invalid id_token received in the response"),n=ze.createInvalidIdTokenError(s),this.cacheStorage.setItem(Ae.ERROR,n.errorCode),this.cacheStorage.setItem(Ae.ERROR_DESC,n.errorMessage)))}else{o=t.state,a=t.state;var y=this.cacheStorage.getItem(""+Oe.STATE_LOGIN+Ue.resourceDelimiter+t.state,this.inCookie);this.logger.error("State Mismatch.Expected State: "+y+",Actual State: "+t.state),n=ze.createInvalidStateError(t.state,y),this.cacheStorage.setItem(Ae.ERROR,n.errorCode),this.cacheStorage.setItem(Ae.ERROR_DESC,n.errorMessage)}if(this.cacheStorage.removeItem(""+Oe.RENEW_STATUS+Ue.resourceDelimiter+t.state),this.cacheStorage.resetTempCacheItems(t.state),this.inCookie&&(this.cacheStorage.setItemCookie(o,"",-1),this.cacheStorage.clearMsalCookie(t.state)),n)throw n;if(!r)throw Fe.createUnexpectedError("Response is null");return r},e.prototype.populateAuthority=function(e,t,n,r){var i=ot.generateAuthorityKey(e),o=n.getItem(i,t);return De.isEmpty(o)?o:Ye.replaceTenantPath(o,r.tenantId)},e.prototype.getAccount=function(){if(this.account)return this.account;var e=this.cacheStorage.getItem(ke.IDTOKEN),t=this.cacheStorage.getItem(ke.CLIENT_INFO);if(!De.isEmpty(e)&&!De.isEmpty(t)){var n=new rt(e),r=new tt(t);return this.account=at.createAccount(n,r),this.account}return null},e.prototype.getAccountState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return e},e.prototype.getAllAccounts=function(){for(var e=[],t=this.cacheStorage.getAllAccessTokens(Ue.clientId,Ue.homeAccountIdentifier),n=0;n<t.length;n++){var r=new rt(t[n].value.idToken),i=new tt(t[n].value.homeAccountIdentifier),o=at.createAccount(r,i);e.push(o)}return this.getUniqueAccounts(e)},e.prototype.getUniqueAccounts=function(e){if(!e||e.length<=1)return e;for(var t=[],n=[],r=0;r<e.length;++r)e[r].homeAccountIdentifier&&-1===t.indexOf(e[r].homeAccountIdentifier)&&(t.push(e[r].homeAccountIdentifier),n.push(e[r]));return n},e.prototype.broadcast=function(e,t){var n=new CustomEvent(e,{detail:t});window.dispatchEvent(n)},e.prototype.getCachedTokenInternal=function(e,t,n,r){var i=t||this.getAccount();if(!i)return null;var o=this.authorityInstance?this.authorityInstance:ft.CreateInstance(this.authority,this.config.auth.validateAuthority),a=this.getTokenType(i,e,!0),s=new et(o,this.clientId,a,this.getRedirectUri(),e,n,r);return this.getCachedToken(s,t)},e.prototype.getScopesForEndpoint=function(e){if(this.config.framework.unprotectedResources.length>0)for(var t=0;t<this.config.framework.unprotectedResources.length;t++)if(e.indexOf(this.config.framework.unprotectedResources[t])>-1)return null;if(this.config.framework.protectedResourceMap.size>0)for(var n=0,r=Array.from(this.config.framework.protectedResourceMap.keys());n<r.length;n++){var i=r[n];if(e.indexOf(i)>-1)return this.config.framework.protectedResourceMap.get(i)}return e.indexOf("http://")>-1||e.indexOf("https://")>-1?Ye.getHostFromUri(e)===Ye.getHostFromUri(this.getRedirectUri())?new Array(this.clientId):null:new Array(this.clientId)},e.prototype.getLoginInProgress=function(){return!!this.cacheStorage.getItem(Oe.URL_HASH)||this.cacheStorage.getItem(Oe.INTERACTION_STATUS)===Ue.inProgress},e.prototype.setInteractionInProgress=function(e){e?this.cacheStorage.setItem(Oe.INTERACTION_STATUS,Ue.inProgress):this.cacheStorage.removeItem(Oe.INTERACTION_STATUS)},e.prototype.setloginInProgress=function(e){this.setInteractionInProgress(e)},e.prototype.getAcquireTokenInProgress=function(){return this.cacheStorage.getItem(Oe.INTERACTION_STATUS)===Ue.inProgress},e.prototype.setAcquireTokenInProgress=function(e){this.setInteractionInProgress(e)},e.prototype.getLogger=function(){return this.logger},e.prototype.setLogger=function(e){this.logger=e},e.prototype.getRedirectUri=function(e){return e||("function"==typeof this.config.auth.redirectUri?this.config.auth.redirectUri():this.config.auth.redirectUri)},e.prototype.getPostLogoutRedirectUri=function(){return"function"==typeof this.config.auth.postLogoutRedirectUri?this.config.auth.postLogoutRedirectUri():this.config.auth.postLogoutRedirectUri},e.prototype.getCurrentConfiguration=function(){if(!this.config)throw Xe.createNoSetConfigurationError();return this.config},e.prototype.getTokenType=function(e,t,n){return n?at.compareAccounts(e,this.getAccount())?t.indexOf(this.config.auth.clientId)>-1?"id_token":"token":t.indexOf(this.config.auth.clientId)>-1?"id_token":"id_token token":at.compareAccounts(e,this.getAccount())?t.indexOf(this.clientId)>-1?"id_token":"token":"id_token token"},e.prototype.setAccountCache=function(e,t){var n=e?this.getAccountId(e):Ue.no_account,r=ot.generateAcquireTokenAccountKey(n,t);this.cacheStorage.setItem(r,JSON.stringify(e))},e.prototype.setAuthorityCache=function(e,t){var n=ot.generateAuthorityKey(e);this.cacheStorage.setItem(n,Ye.CanonicalizeUri(t),this.inCookie)},e.prototype.updateCacheEntries=function(e,t,n){n?(this.cacheStorage.setItem(""+Oe.LOGIN_REQUEST+Ue.resourceDelimiter+e.state,n,this.inCookie),this.cacheStorage.setItem(""+Oe.STATE_LOGIN+Ue.resourceDelimiter+e.state,e.state,this.inCookie)):this.setAccountCache(t,e.state),this.setAuthorityCache(e.state,e.authority),this.cacheStorage.setItem(""+Oe.NONCE_IDTOKEN+Ue.resourceDelimiter+e.state,e.nonce,this.inCookie)},e.prototype.getAccountId=function(e){return De.isEmpty(e.homeAccountIdentifier)?Ue.no_account:e.homeAccountIdentifier},e.prototype.buildIDTokenRequest=function(e){return{scopes:[this.clientId],authority:this.authority,account:this.getAccount(),extraQueryParameters:e.extraQueryParameters}},e.prototype.getTelemetryManagerFromConfig=function(e,t){if(!e)return Ut.getTelemetrymanagerStub(t);var n=e.applicationName,r=e.applicationVersion,i=e.telemetryEmitter;if(!n||!r||!i)throw Xe.createTelemetryConfigError(e);return new Ut({platform:{applicationName:n,applicationVersion:r},clientId:t},i)},e}(),Vt=n("QkXj"),Wt=n("Bde+"),Qt=n("XrkE"),Xt=(zt=function(e,t){return(zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}zt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Jt=function(e){function t(t){var n=e.call(this)||this;return n.initialized=!1,n.name=t.name,n.clientId=t.clientId,n.additionalParams=t.additionalParams,n.icon=t.name.toLowerCase(),n}return Xt(t,e),t.FACEBOOK="Facebook",t.GOOGLE="Google",t.MICROSOFT="Microsoft",t.OPENID="OpenIdConnect",t.WSFEDERATION="WsFederation",t}(b.bb),Yt=function(){function e(e,t,n,r,i,o,a,s){this._tokenAuthService=e,this._router=t,this._messageService=n,this._tokenService=r,this._logService=i,this.oauthService=o,this.spinnerService=a,this._localStorageService=s,this.externalLoginProviders=[],this.localizationSourceName=y.a.localization.defaultLocalizationSourceName,this.clear()}return e.prototype.authenticate=function(t,n,r){var i=this;t=t||function(){i.spinnerService.hide()};var o=this;this._localStorageService.getItem(e.twoFactorRememberClientTokenName,(function(e,i){o.authenticateModel.twoFactorRememberClientToken=null==i?void 0:i.token,o.authenticateModel.singleSignIn=_.a.getSingleSignIn(),o.authenticateModel.returnUrl=_.a.getReturnUrl(),o.authenticateModel.captchaResponse=r,o._tokenAuthService.authenticate(o.authenticateModel).subscribe({next:function(e){o.processAuthenticateResult(e,n),t()},error:function(e){t()}})}))},e.prototype.externalAuthenticate=function(e){var t=this;this.ensureExternalLoginProviderInitialized(e,(function(){if(e.name===Jt.FACEBOOK)FB.login((function(e){t.facebookLoginStatusChangeCallback(e)}),{scope:"email"});else if(e.name===Jt.GOOGLE)gapi.auth2.getAuthInstance().signIn().then((function(){t.googleLoginStatusChangeCallback(gapi.auth2.getAuthInstance().isSignedIn.get())}));else if(e.name===Jt.MICROSOFT){var n=["user.read"];t.spinnerService.show(),t.MSAL.loginPopup({scopes:n}).then((function(e){t.MSAL.acquireTokenSilent({scopes:n}).then((function(e){t.microsoftLoginCallback(e),t.spinnerService.hide()})).catch((function(e){abp.log.error(e),abp.message.error(t.localization.localize("CouldNotValidateExternalUser",t.localizationSourceName))}))}))}}))},e.prototype.init=function(){this.initExternalLoginProviders()},e.prototype.processAuthenticateResult=function(e,t){this.authenticateResult=e,e.shouldResetPassword?(this._router.navigate(["account/reset-password"],{queryParams:{userId:e.userId,tenantId:abp.session.tenantId,resetCode:e.passwordResetCode}}),this.clear()):e.requiresTwoFactorVerification?this._router.navigate(["account/send-code"]):e.accessToken?(e.returnUrl&&!t&&(t=e.returnUrl),this.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,e.refreshToken,e.refreshTokenExpireInSeconds,this.rememberMe,e.twoFactorRememberClientToken,t)):(this._logService.warn("Unexpected authenticateResult!"),this._router.navigate(["account/login"]))},e.prototype.login=function(t,n,r,i,o,a,s,c){var l=a?new Date((new Date).getTime()+1e3*r):void 0;if(this._tokenService.setToken(t,l),i&&a){var p=a?new Date((new Date).getTime()+1e3*o):void 0;this._tokenService.setRefreshToken(i,p)}if(this._localStorageService.setItem(y.a.authorization.encrptedAuthTokenName,{token:n,expireDate:l}),s&&this._localStorageService.setItem(e.twoFactorRememberClientTokenName,{token:s,expireDate:new Date((new Date).getTime()+31536e6)}),c)location.href=c;else{var u=_.a.initialUrl;u.indexOf("/account")>0&&(u=y.a.appBaseUrl),location.href=u}},e.prototype.clear=function(){this.authenticateModel=new b.j,this.authenticateModel.rememberClient=!1,this.authenticateResult=null,this.rememberMe=!1},e.prototype.initExternalLoginProviders=function(e){var t=this;this._tokenAuthService.getExternalAuthenticationProviders().subscribe((function(n){t.externalLoginProviders=S.map(n,(function(e){return new Jt(e)})),e&&e()}))},e.prototype.ensureExternalLoginProviderInitialized=function(e,t){var n=this;if(e.initialized)t();else if(e.name===Jt.FACEBOOK)(new w.a).load("//connect.facebook.net/en_US/sdk.js").then((function(){FB.init({appId:e.clientId,cookie:!1,xfbml:!0,version:"v2.5"}),FB.getLoginStatus((function(e){n.facebookLoginStatusChangeCallback(e),"connected"!==e.status&&t()}))}));else if(e.name===Jt.GOOGLE)(new w.a).load("https://apis.google.com/js/api.js").then((function(){gapi.load("client:auth2",(function(){gapi.client.init({clientId:e.clientId,scope:"openid profile email"}).then((function(){t()}))}))}));else if(e.name===Jt.MICROSOFT)this.MSAL=new Kt({auth:{clientId:e.clientId,redirectUri:y.a.appBaseUrl}}),t();else if(e.name===Jt.OPENID){var r=this.getOpenIdConnectConfig(e);this.oauthService.configure(r),this.oauthService.initImplicitFlow("openIdConnect=1")}else if(e.name===Jt.WSFEDERATION){var i=this.getWsFederationConnectConfig(e);this.wsFederationAuthenticationContext=new Pe(i),this.wsFederationAuthenticationContext.login()}},e.prototype.getWsFederationConnectConfig=function(e){var t={clientId:e.clientId,popUp:!0,callback:this.wsFederationLoginStatusChangeCallback.bind(this)};return e.additionalParams.Tenant&&(t.tenant=e.additionalParams.Tenant),t},e.prototype.getOpenIdConnectConfig=function(e){var t=new fe;return t.loginUrl=e.additionalParams.LoginUrl,t.issuer=e.additionalParams.Authority,t.skipIssuerCheck="false"===e.additionalParams.ValidateIssuer,t.clientId=e.clientId,t.responseType="id_token",t.redirectUri=window.location.origin+"/account/login",t.scope="openid profile",t.requestAccessToken=!1,t},e.prototype.facebookLoginStatusChangeCallback=function(e){var t=this;if("connected"===e.status){var n=new b.ab;n.authProvider=Jt.FACEBOOK,n.providerAccessCode=e.authResponse.accessToken,n.providerKey=e.authResponse.userID,n.singleSignIn=_.a.getSingleSignIn(),n.returnUrl=_.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(n).subscribe((function(e){e.waitingForActivation?t._messageService.info("You have successfully registered. Waiting for activation!"):t.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,e.refreshToken,e.refreshTokenExpireInSeconds,!1,"",e.returnUrl)}))}},e.prototype.openIdConnectLoginCallback=function(e){var t=this;this.initExternalLoginProviders((function(){var e=S.filter(t.externalLoginProviders,{name:"OpenIdConnect"})[0],n=t.getOpenIdConnectConfig(e);t.oauthService.configure(n),t.spinnerService.show(),t.oauthService.tryLogin().then((function(){var e=t.oauthService.getIdentityClaims(),n=new b.ab;n.authProvider=Jt.OPENID,n.providerAccessCode=t.oauthService.getIdToken(),n.providerKey=e.sub,n.singleSignIn=_.a.getSingleSignIn(),n.returnUrl=_.a.getReturnUrl(),t._tokenAuthService.externalAuthenticate(n).pipe(Object(T.a)((function(){t.spinnerService.hide()}))).subscribe((function(e){e.waitingForActivation?t._messageService.info("You have successfully registered. Waiting for activation!"):t.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,e.refreshToken,e.refreshTokenExpireInSeconds,!1,"",e.returnUrl)}))}))}))},e.prototype.googleLoginStatusChangeCallback=function(e){var t=this;if(e){var n=new b.ab;n.authProvider=Jt.GOOGLE,n.providerAccessCode=gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token,n.providerKey=gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getId(),n.singleSignIn=_.a.getSingleSignIn(),n.returnUrl=_.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(n).subscribe((function(e){e.waitingForActivation?t._messageService.info("You have successfully registered. Waiting for activation!"):t.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,e.refreshToken,e.refreshTokenExpireInSeconds,!1,"",e.returnUrl)}))}},e.prototype.wsFederationLoginStatusChangeCallback=function(e,t,n,r){var i=this,o=this.wsFederationAuthenticationContext.getCachedUser(),a=new b.ab;a.authProvider=Jt.WSFEDERATION,a.providerAccessCode=t,a.providerKey=o.profile.sub,a.singleSignIn=_.a.getSingleSignIn(),a.returnUrl=_.a.getReturnUrl(),this._tokenAuthService.externalAuthenticate(a).subscribe((function(e){if(e.waitingForActivation)return i._messageService.info("You have successfully registered. Waiting for activation!"),void i._router.navigate(["account/login"]);i.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,e.refreshToken,e.refreshTokenExpireInSeconds,!1,"",e.returnUrl)}))},e.prototype.microsoftLoginCallback=function(e){var t=this,n=new b.ab;n.authProvider=Jt.MICROSOFT,n.providerAccessCode=e.accessToken,n.providerKey=e.idToken.objectId.replace(new RegExp("-","gm"),"").replace(/^0*/g,""),n.singleSignIn=_.a.getSingleSignIn(),n.returnUrl=_.a.getReturnUrl(),this.spinnerService.show(),this._tokenAuthService.externalAuthenticate(n).subscribe((function(e){e.waitingForActivation?t._messageService.info("You have successfully registered. Waiting for activation!"):(t.login(e.accessToken,e.encryptedAccessToken,e.expireInSeconds,e.refreshToken,e.refreshTokenExpireInSeconds,!1,"",e.returnUrl),t.spinnerService.hide())}))},e.twoFactorRememberClientTokenName="TwoFactorRememberClientToken",e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](b.Bc),l["\u0275\u0275inject"](f.e),l["\u0275\u0275inject"](Wt.h),l["\u0275\u0275inject"](Wt.m),l["\u0275\u0275inject"](Wt.g),l["\u0275\u0275inject"](Se),l["\u0275\u0275inject"](Qt.c),l["\u0275\u0275inject"](Vt.a))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(),$t=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Zt(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",3),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).changeLanguage(e)})),l["\u0275\u0275element"](1,"i"),l["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;l["\u0275\u0275propertyInterpolate"]("title",r.displayName),l["\u0275\u0275advance"](1),l["\u0275\u0275classMap"](r.icon),l["\u0275\u0275attribute"]("aria-label",r.displayName)}}function en(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",1),l["\u0275\u0275template"](1,Zt,2,5,"div",2),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",n.languages)}}var tn=function(e){function t(t){var n=e.call(this,t)||this;return n.languages=[],n}return $t(t,e),t.prototype.ngOnInit=function(){this.languages=S.filter(abp.localization.languages,(function(e){return!1===e.isDisabled})),this.currentLanguage=abp.localization.currentLanguage},t.prototype.changeLanguage=function(e){abp.utils.setCookieValue("Abp.Localization.CultureName",e.name,new Date((new Date).getTime()+15768e7),abp.appPath),location.reload()},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["language-switch"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[["class","ml-1 mx-auto",4,"ngIf"],[1,"ml-1","mx-auto"],["class","btn language-switch-btn btn-clean btn-icon p-0 m-0",3,"title","click",4,"ngFor","ngForOf"],[1,"btn","language-switch-btn","btn-clean","btn-icon","p-0","m-0",3,"title","click"]],template:function(e,t){1&e&&l["\u0275\u0275template"](0,en,2,1,"div",0),2&e&&l["\u0275\u0275property"]("ngIf",t.languages.length>1)},directives:[r.n,r.m],styles:[".language-switch-btn[_ngcontent-%COMP%] { width: auto; height: auto; }"]}),t}(v.a),nn=n("GWLn"),rn=n("S8ex"),on=n("kPyj"),an=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sn=["tenantChangeModal"],cn=["tenancyNameInput"];function ln(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"span",24),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](2,1,"TenancyNameRequired")," "))}var pn=function(e){return{edited:e}};function un(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"form",5,6),l["\u0275\u0275listener"]("ngSubmit",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().save()})),l["\u0275\u0275elementStart"](2,"div",7),l["\u0275\u0275elementStart"](3,"h5",8),l["\u0275\u0275elementStart"](4,"span"),l["\u0275\u0275text"](5),l["\u0275\u0275pipe"](6,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"button",9),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().close()})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"div",10),l["\u0275\u0275elementStart"](9,"div",11),l["\u0275\u0275elementStart"](10,"label",12),l["\u0275\u0275text"](11),l["\u0275\u0275pipe"](12,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"div",13),l["\u0275\u0275elementStart"](14,"span",14),l["\u0275\u0275elementStart"](15,"label"),l["\u0275\u0275elementStart"](16,"input",15),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().isSwitchToTenant=e}))("change",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().switchToTenant(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](17,"span"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](18,"div",16),l["\u0275\u0275elementStart"](19,"label",12),l["\u0275\u0275elementStart"](20,"label"),l["\u0275\u0275text"](21),l["\u0275\u0275pipe"](22,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](23,"label",13),l["\u0275\u0275elementStart"](24,"input",17,18),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().tenancyName=e})),l["\u0275\u0275pipe"](26,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](27,ln,3,3,"span",19),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](28,"div",20),l["\u0275\u0275elementStart"](29,"button",21),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().close()})),l["\u0275\u0275text"](30),l["\u0275\u0275pipe"](31,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](32,"button",22),l["\u0275\u0275element"](33,"i",23),l["\u0275\u0275elementStart"](34,"span"),l["\u0275\u0275text"](35),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275reference"](1),i=l["\u0275\u0275reference"](25),o=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](6,16,"ChangeTenant")),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](12,18,"SwitchToTenant")),l["\u0275\u0275advance"](5),l["\u0275\u0275propertyInterpolate"]("value",o.isSwitchToTenant?"true":"false"),l["\u0275\u0275property"]("ngModel",o.isSwitchToTenant),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](22,20,"TenancyName")),l["\u0275\u0275advance"](3),l["\u0275\u0275propertyInterpolate"]("placeholder",o.isSwitchToTenant?l["\u0275\u0275pipeBind1"](26,22,"EnterTenancyName"):""),l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](26,pn,o.tenancyName))("ngModel",o.tenancyName)("disabled",!o.isSwitchToTenant),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",o.isSwitchToTenant&&!i.pristine&&!o.tenancyName),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",o.saving),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](31,24,"Cancel")," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",!r.form.valid)("buttonBusy",o.saving)("busyText",o.l("ProcessingWithThreeDot")),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](o.submitButtonText)}}var dn=function(){return{backdrop:"static"}},hn=function(e){function t(t,n){var r=e.call(this,n)||this;return r._accountService=t,r.tenancyName="",r.tenancyNameBuffer="",r.submitButtonText="",r.isSwitchToTenant=!1,r.active=!1,r.saving=!1,r}return an(t,e),t.prototype.focusTenancyNameInput=function(){setTimeout((function(){document.getElementById("tenancyNameInput").focus()}),100)},t.prototype.updateSubmitButtonText=function(){this.submitButtonText=this.l(this.isSwitchToTenant?"SwitchToTheTenant":"SwitchToTheHost")},t.prototype.show=function(e){this.tenancyName=e,this.isSwitchToTenant=!!e,this.updateSubmitButtonText(),this.active=!0,this.modal.show()},t.prototype.onShown=function(){this.focusTenancyNameInput()},t.prototype.switchToTenant=function(e){e.target.checked?(this.tenancyName=this.tenancyNameBuffer,this.focusTenancyNameInput()):(this.tenancyNameBuffer=this.tenancyName,this.tenancyName=""),this.updateSubmitButtonText()},t.prototype.save=function(){var e=this;if(!this.tenancyName)return abp.multiTenancy.setTenantIdCookie(void 0),this.close(),void location.reload();var t=new b.tb;t.tenancyName=this.tenancyName,this.saving=!0,this._accountService.isTenantAvailable(t).pipe(Object(T.a)((function(){e.saving=!1}))).subscribe((function(t){switch(t.state){case b.oc.Available:return abp.multiTenancy.setTenantIdCookie(t.tenantId),e.close(),void location.reload();case b.oc.InActive:e.message.warn(e.l("TenantIsNotActive",e.tenancyName)),e.focusTenancyNameInput();break;case b.oc.NotFound:e.message.warn(e.l("ThereIsNoTenantDefinedWithName{0}",e.tenancyName)),e.focusTenancyNameInput()}}))},t.prototype.close=function(){this.active=!1,this.modal.hide()},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](b.b),l["\u0275\u0275directiveInject"](l.Injector))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["tenantChangeModal"]],viewQuery:function(e,t){var n;1&e&&(l["\u0275\u0275staticViewQuery"](sn,!0),l["\u0275\u0275staticViewQuery"](cn,!0)),2&e&&(l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.modal=n.first),l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.tenancyNameInput=n.first))},features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:3,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","tenantChangeModal","aria-hidden","true",1,"modal","fade",3,"config","onShown"],["tenantChangeModal","bs-modal"],[1,"modal-dialog"],[1,"modal-content"],["novalidate","","class","form form-label-right",3,"ngSubmit",4,"ngIf"],["novalidate","",1,"form","form-label-right",3,"ngSubmit"],["changeTenantForm","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-hidden","true",1,"close",3,"click"],[1,"modal-body"],[1,"form-group","row","text-left","mb-0"],[1,"col-4","col-form-label"],[1,"col"],[1,"switch","switch-icon"],["checked","checked","name","SwitchToTenant","type","checkbox",3,"ngModel","value","ngModelChange","change"],[1,"form-group","row","mb-0"],["type","text","id","tenancyNameInput","name","tenancyNameInput","required","","maxlength","64",1,"form-control",3,"ngClass","ngModel","disabled","placeholder","ngModelChange"],["tenancyNameInput","ngModel"],["class","form-text text-danger text-left",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","font-weight-bold",3,"disabled","click"],["type","submit",1,"btn","btn-primary","font-weight-bold","save-button",3,"disabled","buttonBusy","busyText"],[1,"fa","fa-arrow-circle-right"],[1,"form-text","text-danger","text-left"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0,1),l["\u0275\u0275listener"]("onShown",(function(){return t.onShown()})),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"div",3),l["\u0275\u0275template"](4,un,36,28,"form",4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275property"]("config",l["\u0275\u0275pureFunction0"](2,dn)),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",t.active))},directives:[nn.a,r.n,a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.NgForm,a.CheckboxControlValueAccessor,a.NgControlStatus,a.NgModel,a.DefaultValueAccessor,a.RequiredValidator,a.MaxLengthValidator,r.k,rn.a],pipes:[on.a],encapsulation:2}),t}(v.a),mn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fn=["tenantChangeModal"];function gn(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span",4),l["\u0275\u0275elementStart"](1,"strong"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275propertyInterpolate"]("title",n.name),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.tenancyName)}}function yn(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](2,1,"NotSelected")))}function vn(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275template"](3,gn,3,2,"span",1),l["\u0275\u0275template"](4,yn,3,3,"span",0),l["\u0275\u0275text"](5," ("),l["\u0275\u0275elementStart"](6,"a",2),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().showChangeModal()})),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](8,") "),l["\u0275\u0275element"](9,"tenantChangeModal",null,3),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](2,4,"CurrentTenant"),": "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",r.tenancyName),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!r.tenancyName),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](r.l("Change"))}}var Sn=function(e){function t(t,n){var r=e.call(this,t)||this;return r._accountService=n,r}return mn(t,e),t.prototype.ngOnInit=function(){this.appSession.tenant&&(this.tenancyName=this.appSession.tenant.tenancyName,this.name=this.appSession.tenant.name)},Object.defineProperty(t.prototype,"isMultiTenancyEnabled",{get:function(){return abp.multiTenancy.isEnabled},enumerable:!0,configurable:!0}),t.prototype.showChangeModal=function(){this.tenantChangeModal.show(this.tenancyName)},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](b.b))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["tenant-change"]],viewQuery:function(e,t){var n;1&e&&l["\u0275\u0275viewQuery"](fn,!0),2&e&&l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.tenantChangeModal=n.first)},features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"title",4,"ngIf"],["href","javascript:;",3,"click"],["tenantChangeModal",""],[3,"title"]],template:function(e,t){1&e&&l["\u0275\u0275template"](0,vn,11,6,"span",0),2&e&&l["\u0275\u0275property"]("ngIf",t.isMultiTenancyEnabled)},directives:[r.n,hn],pipes:[on.a],encapsulation:2}),t}(v.a),In=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function _n(e,t){if(1&e&&l["\u0275\u0275element"](0,"img",17),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("src",n.appRootUrl()+"assets/common/images/app-logo-on-dark.svg",l["\u0275\u0275sanitizeUrl"])}}function bn(e,t){if(1&e&&l["\u0275\u0275element"](0,"img",17),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("src",n.remoteServiceBaseUrl+"/TenantCustomization/GetTenantLogo?skin=light&tenantId="+n.appSession.tenant.id+"&id="+n.appSession.tenant.logoId,l["\u0275\u0275sanitizeUrl"])}}function wn(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",11),l["\u0275\u0275elementStart"](1,"div",12),l["\u0275\u0275elementStart"](2,"a",13),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().goToHome()})),l["\u0275\u0275template"](3,_n,1,1,"img",14),l["\u0275\u0275template"](4,bn,1,1,"img",14),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"h3",15),l["\u0275\u0275text"](6," Base solution for your "),l["\u0275\u0275element"](7,"br"),l["\u0275\u0275text"](8," next web application. "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](9,"div",16),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",!r.appSession.tenant||!r.appSession.tenant.logoId),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",r.appSession.tenant&&r.appSession.tenant.logoId)}}function Tn(e,t){if(1&e&&l["\u0275\u0275element"](0,"img",17),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("src",n.appRootUrl()+"assets/common/images/app-logo-on-light.svg",l["\u0275\u0275sanitizeUrl"])}}function En(e,t){if(1&e&&l["\u0275\u0275element"](0,"img",17),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("src",n.remoteServiceBaseUrl+"/TenantCustomization/GetTenantLogo?skin=light&tenantId="+n.appSession.tenant.id+"&id="+n.appSession.tenant.logoId,l["\u0275\u0275sanitizeUrl"])}}function Cn(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"a",13),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().goToHome()})),l["\u0275\u0275template"](1,Tn,1,1,"img",14),l["\u0275\u0275template"](2,En,1,1,"img",14),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!r.appSession.tenant||!r.appSession.tenant.logoId),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",r.appSession.tenant&&r.appSession.tenant.logoId)}}function xn(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",18),l["\u0275\u0275element"](1,"tenant-change"),l["\u0275\u0275elementEnd"]())}var On=function(e){return{"login-content":e}},kn=function(e){function t(t,n,r,i,o){var a=e.call(this,t)||this;return a._router=n,a._loginService=r,a._uiCustomizationService=i,a.currentYear=I().year(),a.remoteServiceBaseUrl=y.a.remoteServiceBaseUrl,a.tenantChangeDisabledRoutes=["select-edition","buy","upgrade","extend","register-tenant","stripe-purchase","stripe-subscribe","stripe-update-subscription","paypal-purchase","stripe-payment-result","payment-completed","stripe-cancel-payment","session-locked"],a.viewContainerRef=o,a}return In(t,e),t.prototype.showTenantChange=function(){var e=this;return!!this._router.url&&!S.filter(this.tenantChangeDisabledRoutes,(function(t){return e._router.url.indexOf("/account/"+t)>=0})).length&&abp.multiTenancy.isEnabled&&!this.supportsTenancyNameInUrl()},t.prototype.useFullWidthLayout=function(){return this._router.url.indexOf("/account/select-edition")>=0},t.prototype.ngOnInit=function(){this._loginService.init(),document.body.className=this._uiCustomizationService.getAccountModuleBodyClass()},t.prototype.goToHome=function(){window.location.href="/"},t.prototype.getBgUrl=function(){return"url(./assets/metronic/themes/"+this.currentTheme.baseSettings.theme+"/images/bg/bg-4.jpg)"},t.prototype.supportsTenancyNameInUrl=function(){return y.a.appBaseUrlFormat&&y.a.appBaseUrlFormat.indexOf(y.a.tenancyNamePlaceHolderInUrl)>=0},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](f.e),l["\u0275\u0275directiveInject"](Yt),l["\u0275\u0275directiveInject"](g.a),l["\u0275\u0275directiveInject"](l.ViewContainerRef))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:12,vars:6,consts:[[1,"d-flex","flex-column","flex-root"],["id","kt_login",1,"login","login-1","login-signin-on","d-flex","flex-column","flex-lg-row","flex-column-fluid","bg-white"],["class","login-aside d-flex flex-column flex-row-auto","style","background-color: #F2C98A;",4,"ngIf"],[1,"flex-row-fluid","d-flex","flex-column","justify-content-center","position-relative","overflow-hidden","p-7","mx-auto",3,"ngClass"],[1,"d-flex","flex-column-fluid","flex-center"],[1,"login-form","login-signin"],[1,"pb-13","pt-lg-0","pt-5"],["href","","class","text-center mb-10",3,"click",4,"ngIf"],["class","login__signup-label tenant-change-box",4,"ngIf"],[1,"d-flex","justify-content-lg-start","justify-content-center","align-items-end","py-7","py-lg-0"],[1,"mx-auto"],[1,"login-aside","d-flex","flex-column","flex-row-auto",2,"background-color","#F2C98A"],[1,"d-flex","flex-column-auto","flex-column","pt-lg-40","pt-15"],["href","",1,"text-center","mb-10",3,"click"],["alt","logo","class","max-h-70px",3,"src",4,"ngIf"],[1,"font-weight-bolder","text-center","font-size-h4","font-size-h1-lg",2,"color","#986923"],[1,"aside-img","d-flex","flex-row-fluid","bgi-no-repeat","bgi-position-y-bottom","bgi-position-x-center",2,"background-image","url(/assets/metronic/assets/media/svg/illustrations/login-visual-1.svg)"],["alt","logo",1,"max-h-70px",3,"src"],[1,"login__signup-label","tenant-change-box"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275template"](2,wn,10,2,"div",2),l["\u0275\u0275elementStart"](3,"div",3),l["\u0275\u0275elementStart"](4,"div",4),l["\u0275\u0275elementStart"](5,"div",5),l["\u0275\u0275elementStart"](6,"div",6),l["\u0275\u0275template"](7,Cn,3,2,"a",7),l["\u0275\u0275template"](8,xn,2,0,"div",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](9,"router-outlet"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",9),l["\u0275\u0275element"](11,"language-switch",10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",!t.useFullWidthLayout()),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](4,On,!t.useFullWidthLayout())),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",t.useFullWidthLayout()),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.showTenantChange()))},directives:[r.n,r.k,f.j,tn,Sn],styles:[".login.login-1 .login-aside .aside-img{min-height:450px}.login.login-1 .login-forgot,.login.login-1 .login-signin,.login.login-1 .login-signup,.login.login-1.login-signin-on .login-signup{display:none}.login.login-1.login-signin-on .login-signin{display:block}.login.login-1.login-signin-on .login-forgot{display:none}.login.login-1.login-signup-on .login-signup{display:block}.login.login-1.login-forgot-on .login-signin,.login.login-1.login-forgot-on .login-signup,.login.login-1.login-signup-on .login-forgot,.login.login-1.login-signup-on .login-signin{display:none}.login.login-1.login-forgot-on .login-forgot{display:block}@media (min-width:992px){.login.login-1 .login-aside{width:100%;max-width:600px}.login.login-1 .login-content{width:100%;max-width:500px}.login.login-1 .login-content .login-form{width:100%;max-width:450px}}@media (min-width:992px) and (max-width:1399.98px){.login.login-1 .login-aside{width:100%;max-width:450px}}@media (max-width:991.98px){.login.login-1 .login-content .login-form{width:100%;max-width:400px}}@media (max-width:575.98px){.login.login-1 .aside-img{min-height:300px!important;background-size:400px}.login.login-1 .login-content .login-form{width:100%;max-width:100%}}.has-danger .form-control-feedback{color:#fd397a;margin-top:.2rem;font-size:.85rem;text-align:left}ul.text-danger{list-style:none;color:#f4516c;margin-top:.2rem;font-size:.85rem;text-align:left;padding-left:0}.captcha-container{margin:auto;width:70%}"],encapsulation:2}),t}(v.a),An=n("Qj9z"),Rn=function(){function e(e,t,n){this._permissionChecker=e,this._router=t,this._sessionService=n}return e.prototype.canActivate=function(e,t){return!(!e.queryParams.ss||"true"!==e.queryParams.ss)||!this._sessionService.user||(this._router.navigate([this.selectBestRoute()]),!1)},e.prototype.selectBestRoute=function(){return this._permissionChecker.isGranted("Pages.Administration.Host.Dashboard")?"/app/admin/hostDashboard":this._permissionChecker.isGranted("Pages.Tenant.Dashboard")?"/app/main/dashboard":"/app/notifications"},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](Wt.j),l["\u0275\u0275inject"](f.e),l["\u0275\u0275inject"](An.a))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(),Pn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nn=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o._accountService=n,o._router=r,o._activatedRoute=i,o.model=new b.c,o}return Pn(t,e),t.prototype.ngOnInit=function(){var e=this;this.waitMessage=this.l("PleaseWaitToConfirmYourEmailMessage"),this.model.c=this._activatedRoute.snapshot.queryParams.c,this._accountService.resolveTenantId(new b.Sb({c:this.model.c})).subscribe((function(t){e.appSession.changeTenantIfNeeded(t)||e._accountService.activateEmail(e.model).subscribe((function(){e.notify.success(e.l("YourEmailIsConfirmedMessage"),"",{onClose:function(){e._router.navigate(["account/login"])}})}))}))},t.prototype.parseTenantId=function(e){var t=e?parseInt(e,10):void 0;return NaN===t&&(t=void 0),t},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](b.b),l["\u0275\u0275directiveInject"](f.e),l["\u0275\u0275directiveInject"](f.a))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:1,consts:[[1,"login-form"],["role","alert",1,"alert","alert-success","text-center"],[1,"alert-text"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](t.waitMessage))},encapsulation:2}),t}(v.a),Un=n("FCZ4"),Ln=n("kgQi"),jn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hn=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i._accountService=n,i._router=r,i.model=new b.Yb,i.saving=!1,i}return jn(t,e),t.prototype.save=function(){var e=this;this.saving=!0,this._accountService.sendEmailActivationLink(this.model).pipe(Object(T.a)((function(){e.saving=!1}))).subscribe((function(){e.message.success(e.l("ActivationMailSentMessage"),e.l("MailSent")).then((function(){e._router.navigate(["account/login"])}))}))},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](b.b),l["\u0275\u0275directiveInject"](f.e))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:24,vars:22,consts:[[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],[1,"font-weight-bolder","text-dark","font-size-h4","font-size-h1-lg"],["method","post","novalidate","",1,"login-form","form",3,"ngSubmit"],["emailActivationForm","ngForm"],[1,"form-group"],["type","email","autocomplete","new-password","name","emailAddress","required","","maxlength","256","email","",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"ngModel","placeholder","ngModelChange"],["emailAddressInput","ngModel"],[3,"formCtrl"],[1,"pb-lg-0","pb-5"],["routerLink","/account/login","type","button",1,"btn","btn-light-primary","font-weight-bolder","font-size-h6","px-8","py-4","my-3",3,"disabled"],[1,"fa","fa-arrow-left"],["type","submit",1,"btn","btn-primary","font-weight-bolder","font-size-h6","px-8","py-4","my-3","mr-3",3,"disabled","buttonBusy","busyText"],[1,"fa","fa-check"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"h3",2),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"form",3,4),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.save()})),l["\u0275\u0275elementStart"](7,"p"),l["\u0275\u0275text"](8),l["\u0275\u0275pipe"](9,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",5),l["\u0275\u0275elementStart"](11,"input",6,7),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.model.emailAddress=e})),l["\u0275\u0275pipe"](13,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](14,"validation-messages",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"div",9),l["\u0275\u0275elementStart"](16,"button",10),l["\u0275\u0275element"](17,"i",11),l["\u0275\u0275text"](18),l["\u0275\u0275pipe"](19,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](20,"button",12),l["\u0275\u0275element"](21,"i",13),l["\u0275\u0275text"](22),l["\u0275\u0275pipe"](23,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275reference"](6),r=l["\u0275\u0275reference"](12);l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,12,"EmailActivation")," "),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](9,14,"SendEmailActivationLink_Information")," "),l["\u0275\u0275advance"](3),l["\u0275\u0275propertyInterpolate1"]("placeholder","",l["\u0275\u0275pipeBind1"](13,16,"EmailAddress")," *"),l["\u0275\u0275property"]("ngModel",t.model.emailAddress),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("formCtrl",r),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",t.saving),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](19,18,"Back"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",!n.form.valid)("buttonBusy",t.saving)("busyText",t.l("SavingWithThreeDot")),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](23,20,"Submit"),"")}},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.NgForm,a.DefaultValueAccessor,a.RequiredValidator,a.MaxLengthValidator,a.EmailValidator,a.NgControlStatus,a.NgModel,Ln.a,f.f,rn.a],pipes:[on.a],encapsulation:2,data:{animation:[Object(Un.a)()]}}),t}(v.a),Mn=n("ooh5"),qn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Fn(e,t){if(1&e&&l["\u0275\u0275element"](0,"validation-messages",22),2&e){l["\u0275\u0275nextContext"]();var n=l["\u0275\u0275reference"](9);l["\u0275\u0275property"]("formCtrl",n)}}function Dn(e,t){if(1&e&&l["\u0275\u0275element"](0,"validation-messages",22),2&e){l["\u0275\u0275nextContext"]();var n=l["\u0275\u0275reference"](14);l["\u0275\u0275property"]("formCtrl",n)}}function Bn(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",23),l["\u0275\u0275elementStart"](1,"div",24),l["\u0275\u0275element"](2,"span"),l["\u0275\u0275elementStart"](3,"span"),l["\u0275\u0275text"](4),l["\u0275\u0275pipe"](5,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](6,"span"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](5,1,"LoginWith")))}function zn(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"a",26),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).externalLogin(e)})),l["\u0275\u0275element"](1,"i"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;l["\u0275\u0275propertyInterpolate"]("title",r.name),l["\u0275\u0275advance"](1),l["\u0275\u0275classMapInterpolate1"]("fab fa-",r.icon,""),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",r.name," ")}}function Gn(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",15),l["\u0275\u0275template"](1,zn,3,5,"a",25),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",n.loginService.externalLoginProviders)}}function Kn(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275elementStart"](1,"a",27),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"span"),l["\u0275\u0275text"](5," | "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](3,1,"CreateAnAccount")))}function Vn(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275elementStart"](1,"a",28),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"span"),l["\u0275\u0275text"](5," | "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](3,1,"NewTenant")))}var Wn=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t)||this;return s.loginService=n,s._router=r,s._sessionService=i,s._sessionAppService=o,s._reCaptchaV3Service=a,s.submitting=!1,s.isMultiTenancyEnabled=s.multiTenancy.isEnabled,s.recaptchaSiteKey=y.a.recaptchaSiteKey,s}return qn(t,e),Object.defineProperty(t.prototype,"multiTenancySideIsTeanant",{get:function(){return this._sessionService.tenantId>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTenantSelfRegistrationAllowed",{get:function(){return this.setting.getBoolean("App.TenantManagement.AllowSelfRegistration")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSelfRegistrationAllowed",{get:function(){return!!this._sessionService.tenantId&&this.setting.getBoolean("App.UserManagement.AllowSelfRegistration")},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.loginService.init(),this._sessionService.userId>0&&_.a.getReturnUrl()&&_.a.getSingleSignIn()&&this._sessionAppService.updateUserSignInToken().subscribe((function(e){var t=_.a.getReturnUrl(),n=t+(t.indexOf("?")>=0?"&":"?")+"accessToken="+e.signInToken+"&userId="+e.encodedUserId+"&tenantId="+e.encodedTenantId;location.href=n}));var e=_.a.getQueryParametersUsingHash().state;e&&e.indexOf("openIdConnect")>=0&&this.loginService.openIdConnectLoginCallback({})},t.prototype.login=function(){var e=this,t=function(t){e.showMainSpinner(),e.submitting=!0,e.loginService.authenticate((function(){e.submitting=!1,e.hideMainSpinner()}),null,t)};this.useCaptcha?this._reCaptchaV3Service.execute(this.recaptchaSiteKey,"login",(function(e){t(e)})):t(null)},t.prototype.externalLogin=function(e){this.loginService.externalAuthenticate(e)},Object.defineProperty(t.prototype,"useCaptcha",{get:function(){return this.setting.getBoolean("App.UserManagement.UseCaptchaOnLogin")},enumerable:!0,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](Yt),l["\u0275\u0275directiveInject"](f.e),l["\u0275\u0275directiveInject"](Wt.d),l["\u0275\u0275directiveInject"](b.dc),l["\u0275\u0275directiveInject"](d))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:42,vars:35,consts:[[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],[1,"font-weight-bolder","text-dark","font-size-h4","font-size-h1-lg"],["method","post","method","post",1,"login-form","form",3,"ngSubmit"],["loginForm","ngForm"],[1,"form-group"],["autoFocus","","type","text","autocomplete","new-password","name","userNameOrEmailAddress","required","",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"ngModel","placeholder","ngModelChange"],["userNameOrEmailAddressInput","ngModel"],[3,"formCtrl",4,"ngIf"],["type","password","autocomplete","new-password","name","password","required","","maxlength","32",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"ngModel","placeholder","ngModelChange"],["passwordInput","ngModel"],[1,"form-group","d-flex","justify-content-between","mt-4"],[1,"checkbox","checkbox-outline"],["type","checkbox","name","rememberMe","value","true",3,"ngModel","ngModelChange"],["routerLink","/account/forgot-password","id","forget-password",1,"text-primary","font-size-h6","font-weight-bolder","text-hover-primary"],[1,"pb-lg-0","pb-5"],["type","submit",1,"btn","btn-block","btn-primary","font-weight-bolder","font-size-h6","px-8","py-4","my-3","mr-3",3,"disabled"],["class","mt-10 mb-2",4,"ngIf"],["class","pb-lg-0 pb-5",4,"ngIf"],[1,"mt-5"],[4,"ngIf"],["routerLink","/account/email-activation","id","email-activation-btn"],[3,"formCtrl"],[1,"mt-10","mb-2"],[1,"divider"],["class","btn btn-sm btn-light-primary font-weight-bolder py-2",3,"title","click",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-light-primary","font-weight-bolder","py-2",3,"title","click"],["routerLink","/account/register"],["routerLink","/account/select-edition"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"h3",2),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"form",3,4),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.login()})),l["\u0275\u0275elementStart"](7,"div",5),l["\u0275\u0275elementStart"](8,"input",6,7),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.loginService.authenticateModel.userNameOrEmailAddress=e})),l["\u0275\u0275pipe"](10,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](11,Fn,1,1,"validation-messages",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"div",5),l["\u0275\u0275elementStart"](13,"input",9,10),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.loginService.authenticateModel.password=e})),l["\u0275\u0275pipe"](15,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](16,Dn,1,1,"validation-messages",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"div",11),l["\u0275\u0275elementStart"](18,"label",12),l["\u0275\u0275elementStart"](19,"input",13),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.loginService.rememberMe=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](20),l["\u0275\u0275pipe"](21,"localize"),l["\u0275\u0275element"](22,"span"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](23,"a",14),l["\u0275\u0275text"](24),l["\u0275\u0275pipe"](25,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](26,"div",15),l["\u0275\u0275elementStart"](27,"button",16),l["\u0275\u0275text"](28),l["\u0275\u0275pipe"](29,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](30,Bn,7,3,"div",17),l["\u0275\u0275template"](31,Gn,2,1,"div",18),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](32,"div",19),l["\u0275\u0275elementStart"](33,"div"),l["\u0275\u0275elementStart"](34,"span"),l["\u0275\u0275text"](35),l["\u0275\u0275pipe"](36,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](37,Kn,6,3,"span",20),l["\u0275\u0275template"](38,Vn,6,3,"span",20),l["\u0275\u0275elementStart"](39,"a",21),l["\u0275\u0275text"](40),l["\u0275\u0275pipe"](41,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275reference"](6),r=l["\u0275\u0275reference"](9),i=l["\u0275\u0275reference"](14);l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,19,"LogIn")," "),l["\u0275\u0275advance"](5),l["\u0275\u0275propertyInterpolate1"]("placeholder","",l["\u0275\u0275pipeBind1"](10,21,"UserNameOrEmail")," *"),l["\u0275\u0275property"]("ngModel",t.loginService.authenticateModel.userNameOrEmailAddress),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",!r.touched),l["\u0275\u0275advance"](2),l["\u0275\u0275propertyInterpolate1"]("placeholder","",l["\u0275\u0275pipeBind1"](15,23,"Password")," *"),l["\u0275\u0275property"]("ngModel",t.loginService.authenticateModel.password),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",!i.touched),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngModel",t.loginService.rememberMe),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](21,25,"RememberMe")," "),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](25,27,"ForgotPassword")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("disabled",!n.form.valid),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](29,29,"LogIn")),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",(t.multiTenancySideIsTeanant||!t.isMultiTenancyEnabled)&&t.loginService.externalLoginProviders.length>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",(t.multiTenancySideIsTeanant||!t.isMultiTenancyEnabled)&&t.loginService.externalLoginProviders.length>0),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](36,31,"NotAMemberYet")," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.isSelfRegistrationAllowed),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!t.multiTenancySideIsTeanant&&t.isTenantSelfRegistrationAllowed),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](41,33,"EmailActivation"))}},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.NgForm,a.DefaultValueAccessor,Mn.a,a.RequiredValidator,a.NgControlStatus,a.NgModel,r.n,a.MaxLengthValidator,a.CheckboxControlValueAccessor,f.h,Ln.a,r.m],pipes:[on.a],styles:[".kt-login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding-right:.35rem;margin:0 5px 0 0!important}.kt-login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-openidconnect[_ngcontent-%COMP%]{background:url(/assets/common/images/social/openid.png) no-repeat;width:16px;height:16px}.kt-login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-wsfederation[_ngcontent-%COMP%]{background:url(/assets/common/images/social/adfs.png) no-repeat;width:16px;height:16px}"],data:{animation:[Object(Un.a)()]}}),t}(v.a),Qn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Xn(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"option",11),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;l["\u0275\u0275property"]("value",n),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](n)}}function Jn(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"form",4,5),l["\u0275\u0275listener"]("ngSubmit",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().submit()})),l["\u0275\u0275elementStart"](2,"p"),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"div",6),l["\u0275\u0275elementStart"](6,"select",7),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().selectedTwoFactorProvider=e})),l["\u0275\u0275template"](7,Xn,2,2,"option",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"div",9),l["\u0275\u0275elementStart"](9,"button",10),l["\u0275\u0275text"](10),l["\u0275\u0275pipe"](11,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](4,4,"SendSecurityCode_Information")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngModel",r.selectedTwoFactorProvider),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",r.loginService.authenticateResult.twoFactorAuthProviders),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](11,6,"Submit"))}}var Yn=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.loginService=n,o._tokenAuthService=r,o._router=i,o.submitting=!1,o}return Qn(t,e),t.prototype.canActivate=function(){return!!(this.loginService.authenticateModel&&this.loginService.authenticateResult&&this.loginService.authenticateResult.twoFactorAuthProviders&&this.loginService.authenticateResult.twoFactorAuthProviders.length)},t.prototype.ngOnInit=function(){this.canActivate()?this.selectedTwoFactorProvider=this.loginService.authenticateResult.twoFactorAuthProviders[0]:this._router.navigate(["account/login"])},t.prototype.submit=function(){var e=this,t=new b.bc;t.userId=this.loginService.authenticateResult.userId,t.provider=this.selectedTwoFactorProvider,this.submitting=!0,this._tokenAuthService.sendTwoFactorAuthCode(t).pipe(Object(T.a)((function(){return e.submitting=!1}))).subscribe((function(){e._router.navigate(["account/verify-code"])}))},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](Yt),l["\u0275\u0275directiveInject"](b.Bc),l["\u0275\u0275directiveInject"](f.e))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:5,consts:[[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],[1,"font-weight-bolder","text-dark","font-size-h4","font-size-h1-lg"],["class","login-form form","method","post",3,"ngSubmit",4,"ngIf"],["method","post",1,"login-form","form",3,"ngSubmit"],["twoFactorForm","ngForm"],[1,"form-group"],["autoFocus","","size","1","name","selectedTwoFactorProvider",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"pb-lg-0","pb-5"],["type","submit",1,"btn","btn-primary","font-weight-bolder","font-size-h6","px-8","py-4","my-3","mr-3"],[3,"value"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"h3",2),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](5,Jn,12,8,"form",3),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,3,"SendSecurityCode")," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.loginService.authenticateResult))},directives:[r.n,a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.NgForm,a.SelectControlValueAccessor,Mn.a,a.NgControlStatus,a.NgModel,r.m,a.NgSelectOption,a["\u0275angular_packages_forms_forms_x"]],pipes:[on.a],encapsulation:2,data:{animation:[Object(Un.a)()]}}),t}(v.a),$n=n("gI3B"),Zn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function er(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",12),l["\u0275\u0275elementStart"](1,"label",13),l["\u0275\u0275elementStart"](2,"input",14),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().loginService.authenticateModel.rememberClient=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275element"](5,"span"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngModel",r.loginService.authenticateModel.rememberClient),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](4,2,"RememberThisBrowser")," ")}}function tr(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span",15),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275pipe"](3,"localize"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate2"]("",l["\u0275\u0275pipeBind1"](2,2,"RemainingTime"),": ",l["\u0275\u0275pipeBind2"](3,4,"SecondShort{0}",n.remainingSeconds),".")}}var nr=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.loginService=n,o._reCaptchaV3Service=r,o._router=i,o.recaptchaSiteKey=y.a.recaptchaSiteKey,o.submitting=!1,o.remainingSeconds=90,o}return Zn(t,e),t.prototype.canActivate=function(){return!(!this.loginService.authenticateModel||!this.loginService.authenticateResult)},t.prototype.ngOnInit=function(){var e=this;if(this.canActivate()){var t=Object($n.a)(1e3,1e3);this.timerSubscription=t.subscribe((function(){e.remainingSeconds=e.remainingSeconds-1,0===e.remainingSeconds&&e.message.warn(e.l("TimeoutPleaseTryAgain")).then((function(){e.loginService.authenticateModel.twoFactorVerificationCode=null,e._router.navigate(["account/login"])}))}))}else this._router.navigate(["account/login"])},t.prototype.ngOnDestroy=function(){this.timerSubscription&&(this.timerSubscription.unsubscribe(),this.timerSubscription=null)},Object.defineProperty(t.prototype,"useCaptcha",{get:function(){return this.setting.getBoolean("App.UserManagement.UseCaptchaOnLogin")},enumerable:!0,configurable:!0}),t.prototype.submit=function(){var e=this,t=function(t){e.loginService.authenticateModel.twoFactorVerificationCode=e.code,e.loginService.authenticate((function(){}),null,t)};this.useCaptcha?this._reCaptchaV3Service.execute(this.recaptchaSiteKey,"login",(function(e){t(e)})):t(null)},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](Yt),l["\u0275\u0275directiveInject"](d),l["\u0275\u0275directiveInject"](f.e))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:15,consts:[[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],["method","post",1,"login-form","form",3,"ngSubmit"],["twoFactorForm","ngForm"],[1,"form-group"],["autoFocus","","type","password","autocomplete","new-password","name","code","required","","maxlength","16",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"ngModel","placeholder","ngModelChange"],["passwordInput","ngModel"],[3,"formCtrl"],["class","form-group mt-4",4,"ngIf"],[1,"pb-lg-0","pb-5"],["type","submit",1,"btn","btn-primary","font-weight-bolder","font-size-h6","px-8","py-4","my-3","mr-3",3,"disabled"],["class","remaining-time-counter ml-5",4,"ngIf"],[1,"form-group","mt-4"],[1,"checkbox","checkbox-outline"],["type","checkbox","name","rememberClient","value","true",3,"ngModel","ngModelChange"],[1,"remaining-time-counter","ml-5"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"h3"),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"form",2,3),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.submit()})),l["\u0275\u0275elementStart"](7,"div",4),l["\u0275\u0275elementStart"](8,"input",5,6),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.code=e})),l["\u0275\u0275pipe"](10,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](11,"validation-messages",7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](12,er,6,4,"div",8),l["\u0275\u0275elementStart"](13,"div",9),l["\u0275\u0275elementStart"](14,"button",10),l["\u0275\u0275text"](15),l["\u0275\u0275pipe"](16,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](17,tr,4,7,"span",11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275reference"](6),r=l["\u0275\u0275reference"](9);l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,9,"VerifySecurityCode")," "),l["\u0275\u0275advance"](5),l["\u0275\u0275propertyInterpolate1"]("placeholder","",l["\u0275\u0275pipeBind1"](10,11,"Code")," *"),l["\u0275\u0275property"]("ngModel",t.code),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("formCtrl",r),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf","true"===t.s("Abp.Zero.UserManagement.TwoFactorLogin.IsRememberBrowserEnabled")),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",!n.form.valid),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](16,13,"Submit")),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.remainingSeconds>=0)}},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.NgForm,a.DefaultValueAccessor,Mn.a,a.RequiredValidator,a.MaxLengthValidator,a.NgControlStatus,a.NgModel,Ln.a,r.n,a.CheckboxControlValueAccessor],pipes:[on.a],styles:[".remaining-time-counter[_ngcontent-%COMP%]{color:red}"],data:{animation:[Object(Un.a)()]}}),t}(v.a),rr=n("WroF"),ir=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),or=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o._accountService=n,o._appUrlService=r,o._router=i,o.model=new b.Zb,o.saving=!1,o}return ir(t,e),t.prototype.save=function(){var e=this;this.saving=!0,this._accountService.sendPasswordResetCode(this.model).pipe(Object(T.a)((function(){e.saving=!1}))).subscribe((function(){e.message.success(e.l("PasswordResetMailSentMessage"),e.l("MailSent")).then((function(){e._router.navigate(["account/login"])}))}))},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](b.b),l["\u0275\u0275directiveInject"](rr.a),l["\u0275\u0275directiveInject"](f.e))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:24,vars:22,consts:[[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],[1,"font-weight-bolder","text-dark","font-size-h4","font-size-h1-lg"],["method","post","novalidate","",1,"login-form","form",3,"ngSubmit"],["forgotPassForm","ngForm"],[1,"form-group"],["autoFocus","","type","text","autocomplete","new-password","name","emailAddress","required","","maxlength","256","email","",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"ngModel","placeholder","ngModelChange"],["emailAddressInput","ngModel"],[3,"formCtrl"],[1,"pb-lg-0","pb-5"],["routerLink","/account/login","type","button",1,"btn","btn-light-primary","font-weight-bolder","font-size-h6","px-8","py-4","my-3",3,"disabled"],[1,"fa","fa-arrow-left"],["type","submit",1,"btn","btn-primary","font-weight-bolder","font-size-h6","px-8","py-4","my-3","mr-3",3,"disabled","buttonBusy","busyText"],[1,"fa","fa-check"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"h3",2),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"form",3,4),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.save()})),l["\u0275\u0275elementStart"](7,"p"),l["\u0275\u0275text"](8),l["\u0275\u0275pipe"](9,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",5),l["\u0275\u0275elementStart"](11,"input",6,7),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.model.emailAddress=e})),l["\u0275\u0275pipe"](13,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](14,"validation-messages",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"div",9),l["\u0275\u0275elementStart"](16,"button",10),l["\u0275\u0275element"](17,"i",11),l["\u0275\u0275text"](18),l["\u0275\u0275pipe"](19,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](20,"button",12),l["\u0275\u0275element"](21,"i",13),l["\u0275\u0275text"](22),l["\u0275\u0275pipe"](23,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275reference"](6),r=l["\u0275\u0275reference"](12);l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,12,"ForgotPassword")," "),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](9,14,"SendPasswordResetLink_Information")," "),l["\u0275\u0275advance"](3),l["\u0275\u0275propertyInterpolate1"]("placeholder","",l["\u0275\u0275pipeBind1"](13,16,"EmailAddress")," *"),l["\u0275\u0275property"]("ngModel",t.model.emailAddress),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("formCtrl",r),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",t.saving),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](19,18,"Back"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",!n.form.valid)("buttonBusy",t.saving)("busyText",t.l("SavingWithThreeDot")),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](23,20,"Submit"),"")}},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.NgForm,a.DefaultValueAccessor,Mn.a,a.RequiredValidator,a.MaxLengthValidator,a.EmailValidator,a.NgControlStatus,a.NgModel,Ln.a,f.f,rn.a],pipes:[on.a],encapsulation:2,data:{animation:[Object(Un.a)()]}}),t}(v.a),ar=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ar(t,e),t}(b.Rb),cr=n("gGBz"),lr=n("KIW0"),pr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function ur(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ul",17),l["\u0275\u0275elementStart"](1,"li",18),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"li",18),l["\u0275\u0275text"](5),l["\u0275\u0275pipe"](6,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"li",18),l["\u0275\u0275text"](8),l["\u0275\u0275pipe"](9,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"li",18),l["\u0275\u0275text"](11),l["\u0275\u0275pipe"](12,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"li",18),l["\u0275\u0275text"](14),l["\u0275\u0275pipe"](15,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](),r=l["\u0275\u0275reference"](12);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("hidden",!r.errors.requireDigit),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](3,10,"PasswordComplexity_RequireDigit_Hint")),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireLowercase),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](6,12,"PasswordComplexity_RequireLowercase_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireUppercase),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](9,14,"PasswordComplexity_RequireUppercase_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireNonAlphanumeric),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](12,16,"PasswordComplexity_RequireNonAlphanumeric_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requiredLength),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](15,18,"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength)," ")}}function dr(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ul",17),l["\u0275\u0275elementStart"](1,"li",18),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"li",18),l["\u0275\u0275text"](5),l["\u0275\u0275pipe"](6,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"li",18),l["\u0275\u0275text"](8),l["\u0275\u0275pipe"](9,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"li",18),l["\u0275\u0275text"](11),l["\u0275\u0275pipe"](12,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"li",18),l["\u0275\u0275text"](14),l["\u0275\u0275pipe"](15,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"li",18),l["\u0275\u0275text"](17),l["\u0275\u0275pipe"](18,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](),r=l["\u0275\u0275reference"](18);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("hidden",!r.errors.requireDigit),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](3,12,"PasswordComplexity_RequireDigit_Hint")," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireLowercase),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](6,14,"PasswordComplexity_RequireLowercase_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireUppercase),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](9,16,"PasswordComplexity_RequireUppercase_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireNonAlphanumeric),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](12,18,"PasswordComplexity_RequireNonAlphanumeric_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requiredLength),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](15,20,"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength)," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",r.valid),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](18,23,"PasswordsDontMatch"))}}var hr=function(e){function t(t,n,r,i,o,a,s,c){var l=e.call(this,t)||this;return l._accountService=n,l._router=r,l._activatedRoute=i,l._loginService=o,l._reCaptchaV3Service=a,l._appUrlService=s,l._profileService=c,l.recaptchaSiteKey=y.a.recaptchaSiteKey,l.model=new sr,l.passwordComplexitySetting=new b.Gb,l.saving=!1,l}return pr(t,e),t.prototype.ngOnInit=function(){var e=this;this._profileService.getPasswordComplexitySetting().subscribe((function(t){e.passwordComplexitySetting=t.setting})),this._activatedRoute.snapshot.queryParams.c?(this.model.c=this._activatedRoute.snapshot.queryParams.c,this._accountService.resolveTenantId(new b.Sb({c:this.model.c})).subscribe((function(t){e.appSession.changeTenantIfNeeded(t)}))):(this.model.userId=this._activatedRoute.snapshot.queryParams.userId,this.model.resetCode=this._activatedRoute.snapshot.queryParams.resetCode,this.appSession.changeTenantIfNeeded(this.parseTenantId(this._activatedRoute.snapshot.queryParams.tenantId)))},Object.defineProperty(t.prototype,"useCaptcha",{get:function(){return this.setting.getBoolean("App.UserManagement.UseCaptchaOnLogin")},enumerable:!0,configurable:!0}),t.prototype.save=function(){var e=this;this.saving=!0,this._accountService.resetPassword(this.model).pipe(Object(T.a)((function(){e.saving=!1}))).subscribe((function(t){if(t.canLogin){var n=function(n){e.saving=!0,e._loginService.authenticateModel.userNameOrEmailAddress=t.userName,e._loginService.authenticateModel.password=e.model.password,e._loginService.authenticate((function(){e.saving=!1}),null,n)};e.useCaptcha?e._reCaptchaV3Service.execute(e.recaptchaSiteKey,"login",(function(e){n(e)})):n(null)}else e._router.navigate(["account/login"])}))},t.prototype.parseTenantId=function(e){var t=e?parseInt(e):void 0;return NaN===t&&(t=void 0),t},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](b.b),l["\u0275\u0275directiveInject"](f.e),l["\u0275\u0275directiveInject"](f.a),l["\u0275\u0275directiveInject"](Yt),l["\u0275\u0275directiveInject"](d),l["\u0275\u0275directiveInject"](rr.a),l["\u0275\u0275directiveInject"](b.Mb))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:31,vars:39,consts:[[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],[1,"font-weight-bolder","text-dark","font-size-h4","font-size-h1-lg"],["method","post",1,"login-form","form",3,"ngSubmit"],["resetPassForm","ngForm"],[1,"form-group"],["type","password","name","Password","validateEqual","PasswordRepeat","reverse","true","required","",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"ngModel","placeholder","requireDigit","requireLowercase","requireUppercase","requireNonAlphanumeric","requiredLength","ngModelChange"],["Password","ngModel"],[1,"form-group",3,"hidden"],["class","form-text text-danger",4,"ngIf"],["type","password","name","PasswordRepeat","validateEqual","Password","reverse","false","required","",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"ngModel","placeholder","requireDigit","requireLowercase","requireUppercase","requireNonAlphanumeric","requiredLength"],["PasswordRepeat","ngModel"],[1,"pb-lg-0","pb-5"],["routerLink","/account/login","type","button",1,"btn","btn-light-primary","font-weight-bolder","font-size-h6","px-8","py-4","my-3",3,"disabled"],[1,"fa","fa-arrow-left"],["type","submit",1,"btn","btn-primary","font-weight-bolder","font-size-h6","px-8","py-4","my-3","mr-3",3,"disabled","buttonBusy","busyText"],[1,"fa","fa-check"],[1,"form-text","text-danger"],[3,"hidden"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"h3",2),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"form",3,4),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.save()})),l["\u0275\u0275elementStart"](7,"p"),l["\u0275\u0275text"](8),l["\u0275\u0275pipe"](9,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",5),l["\u0275\u0275elementStart"](11,"input",6,7),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.model.password=e})),l["\u0275\u0275pipe"](13,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"div",8),l["\u0275\u0275template"](15,ur,16,21,"ul",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"div",5),l["\u0275\u0275element"](17,"input",10,11),l["\u0275\u0275pipe"](19,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](20,"div",8),l["\u0275\u0275template"](21,dr,19,25,"ul",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](22,"div",12),l["\u0275\u0275elementStart"](23,"button",13),l["\u0275\u0275element"](24,"i",14),l["\u0275\u0275text"](25),l["\u0275\u0275pipe"](26,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](27,"button",15),l["\u0275\u0275element"](28,"i",16),l["\u0275\u0275text"](29),l["\u0275\u0275pipe"](30,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275reference"](6),r=l["\u0275\u0275reference"](12),i=l["\u0275\u0275reference"](18);l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,27,"ChangePassword")," "),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](9,29,"PleaseEnterYourNewPassword")," "),l["\u0275\u0275advance"](3),l["\u0275\u0275propertyInterpolate"]("placeholder",l["\u0275\u0275pipeBind1"](13,31,"Password")),l["\u0275\u0275property"]("ngModel",t.model.password)("requireDigit",t.passwordComplexitySetting.requireDigit)("requireLowercase",t.passwordComplexitySetting.requireLowercase)("requireUppercase",t.passwordComplexitySetting.requireUppercase)("requireNonAlphanumeric",t.passwordComplexitySetting.requireNonAlphanumeric)("requiredLength",t.passwordComplexitySetting.requiredLength),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("hidden",n.form.valid||n.form.pristine),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",r.errors),l["\u0275\u0275advance"](2),l["\u0275\u0275propertyInterpolate"]("placeholder",l["\u0275\u0275pipeBind1"](19,33,"PasswordRepeat")),l["\u0275\u0275property"]("ngModel",t.model.passwordRepeat)("requireDigit",t.passwordComplexitySetting.requireDigit)("requireLowercase",t.passwordComplexitySetting.requireLowercase)("requireUppercase",t.passwordComplexitySetting.requireUppercase)("requireNonAlphanumeric",t.passwordComplexitySetting.requireNonAlphanumeric)("requiredLength",t.passwordComplexitySetting.requiredLength),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("hidden",n.form.valid||n.form.pristine),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",i.errors),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",t.saving),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](26,35,"Back"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",!n.form.valid)("buttonBusy",t.saving)("busyText",t.l("SavingWithThreeDot")),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](30,37,"Submit"),"")}},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.NgForm,a.DefaultValueAccessor,cr.a,a.RequiredValidator,a.NgControlStatus,a.NgModel,lr.a,r.n,f.f,rn.a],pipes:[on.a],encapsulation:2,data:{animation:[Object(Un.a)()]}}),t}(v.a),mr=function(){function e(){}return e.prototype.getPaymentGatewayType=function(e){return parseInt(e)===b.jc.Paypal?"Paypal":"Stripe"},e.prototype.getEditionPaymentType=function(e){return parseInt(e)===b.O.BuyNow?"BuyNow":parseInt(e)===b.O.Extend?"Extend":parseInt(e)===b.O.NewRegistration?"NewRegistration":"Upgrade"},e.prototype.getInitialSelectedPaymentPeriodType=function(e){return e.dailyPrice>0?b.Jb.Daily:e.weeklyPrice>0?b.Jb.Weekly:e.monthlyPrice>0?b.Jb.Monthly:e.annualPrice>0?b.Jb.Annual:void 0},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}(),fr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function gr(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",11),l["\u0275\u0275elementStart"](1,"label",12),l["\u0275\u0275elementStart"](2,"input",13),l["\u0275\u0275listener"]("change",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]();return e.onPaymentPeriodChangeChange(e.paymentPeriodType.Daily)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275pipe"](5,"number"),l["\u0275\u0275element"](6,"span"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("checked",r.selectedPaymentPeriodType==r.paymentPeriodType.Daily)("value",r.paymentPeriodType.Daily),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate3"](" ",l["\u0275\u0275pipeBind1"](4,5,"DailyPrice"),": ",r.appSession.application.currencySign,"",l["\u0275\u0275pipeBind2"](5,7,r.edition.dailyPrice,"1.2-2")," ")}}function yr(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",14),l["\u0275\u0275elementStart"](1,"label",12),l["\u0275\u0275elementStart"](2,"input",13),l["\u0275\u0275listener"]("change",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]();return e.onPaymentPeriodChangeChange(e.paymentPeriodType.Weekly)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275pipe"](5,"number"),l["\u0275\u0275element"](6,"span"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("checked",r.selectedPaymentPeriodType==r.paymentPeriodType.Weekly)("value",r.paymentPeriodType.Weekly),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate3"](" ",l["\u0275\u0275pipeBind1"](4,5,"WeeklyPrice"),": ",r.appSession.application.currencySign,"",l["\u0275\u0275pipeBind2"](5,7,r.edition.weeklyPrice,"1.2-2")," ")}}function vr(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",11),l["\u0275\u0275elementStart"](1,"label",12),l["\u0275\u0275elementStart"](2,"input",13),l["\u0275\u0275listener"]("change",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]();return e.onPaymentPeriodChangeChange(e.paymentPeriodType.Monthly)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275pipe"](5,"number"),l["\u0275\u0275element"](6,"span"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("checked",r.selectedPaymentPeriodType==r.paymentPeriodType.Monthly)("value",r.paymentPeriodType.Monthly),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate3"](" ",l["\u0275\u0275pipeBind1"](4,5,"MonthlyPrice"),": ",r.appSession.application.currencySign,"",l["\u0275\u0275pipeBind2"](5,7,r.edition.monthlyPrice,"1.2-2")," ")}}function Sr(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",14),l["\u0275\u0275elementStart"](1,"label",12),l["\u0275\u0275elementStart"](2,"input",13),l["\u0275\u0275listener"]("change",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]();return e.onPaymentPeriodChangeChange(e.paymentPeriodType.Annual)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275pipe"](5,"number"),l["\u0275\u0275element"](6,"span"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("checked",r.selectedPaymentPeriodType==r.paymentPeriodType.Annual)("value",r.paymentPeriodType.Annual),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate3"](" ",l["\u0275\u0275pipeBind1"](4,5,"AnnualPrice"),": ",r.appSession.application.currencySign,"",l["\u0275\u0275pipeBind2"](5,7,r.edition.annualPrice,"1.2-2")," ")}}function Ir(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",14),l["\u0275\u0275elementStart"](1,"label",15),l["\u0275\u0275elementStart"](2,"input",16),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().recurringPaymentEnabled=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275element"](5,"span"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngModel",r.recurringPaymentEnabled),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,2,"AutomaticallyBillMyAccount")," ")}}function _r(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",19),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().$implicit;return l["\u0275\u0275nextContext"]().checkout(e.gatewayType)})),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]().$implicit,i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](2,1,"CheckoutWith"+i.getPaymentGatewayType(r.gatewayType))," ")}}function br(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",17),l["\u0275\u0275template"](1,_r,3,3,"button",18),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.supportsRecurringPayments||!r.recurringPaymentEnabled)}}var wr=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t)||this;return s._activatedRoute=n,s._router=r,s._paymnetHelperService=i,s._paymentAppService=o,s._tenantRegistrationService=a,s.edition=new b.P,s.tenantId=abp.session.tenantId,s.paymentPeriodType=b.Jb,s.subscriptionPaymentGateway=b.jc,s.supportsRecurringPayments=!1,s.recurringPaymentEnabled=!1,s.editionId=0,s}return fr(t,e),t.prototype.ngOnInit=function(){var e=this,t=parseInt(this._activatedRoute.snapshot.queryParams.tenantId);abp.multiTenancy.setTenantIdCookie(t),this.editionPaymentType=this._activatedRoute.snapshot.queryParams.editionPaymentType,this.editionId=this._activatedRoute.snapshot.queryParams.editionId,this._tenantRegistrationService.getEdition(this.editionId).subscribe((function(t){e.edition=t,e.selectedPaymentPeriodType=e._paymnetHelperService.getInitialSelectedPaymentPeriodType(e.edition)})),this._paymentAppService.getActiveGateways(void 0).subscribe((function(t){e.paymentGateways=t,e.supportsRecurringPayments=t.some((function(e){return e.supportsRecurringPayments}))}))},t.prototype.checkout=function(e){var t=this,n={};n.editionId=this.editionId,n.editionPaymentType=this.editionPaymentType,n.paymentPeriodType=this.selectedPaymentPeriodType,n.recurringPaymentEnabled=this.recurringPaymentEnabled,n.subscriptionPaymentGatewayType=e,n.successUrl=y.a.remoteServiceBaseUrl+"/api/services/app/payment/"+this._paymnetHelperService.getEditionPaymentType(this.editionPaymentType)+"Succeed",n.errorUrl=y.a.remoteServiceBaseUrl+"/api/services/app/payment/PaymentFailed",this._paymentAppService.createPayment(n).subscribe((function(n){t._router.navigate(["account/"+t.getPaymentGatewayType(e).toLocaleLowerCase()+"-purchase"],{queryParams:{paymentId:n,redirectUrl:"account/register-tenant-result"}})}))},t.prototype.getPaymentGatewayType=function(e){return this._paymnetHelperService.getPaymentGatewayType(e)},t.prototype.onPaymentPeriodChangeChange=function(e){this.selectedPaymentPeriodType=e},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](f.a),l["\u0275\u0275directiveInject"](f.e),l["\u0275\u0275directiveInject"](mr),l["\u0275\u0275directiveInject"](b.Kb),l["\u0275\u0275directiveInject"](b.rc))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:19,vars:14,consts:[[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],[1,"font-weight-bolder","text-dark","font-size-h4","font-size-h1-lg"],["method","post",1,"login-form","form"],[1,"mb-5"],[1,"radio-inline"],["class","form-group mr-5",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"separator","separator-border-dashed"],[1,"pb-lg-0","pb-5"],["class","mb-2",4,"ngFor","ngForOf"],[1,"form-group","mr-5"],[1,"radio"],["type","radio","name","PaymentPeriodType",3,"checked","value","change"],[1,"form-group"],[1,"checkbox","mb-0"],["type","checkbox","name","RecurringPaymentEnabled",3,"ngModel","ngModelChange"],[1,"mb-2"],["class","btn btn-success btn-block",3,"click",4,"ngIf"],[1,"btn","btn-success","btn-block",3,"click"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"h3",2),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"form",3),l["\u0275\u0275elementStart"](6,"h4",4),l["\u0275\u0275text"](7),l["\u0275\u0275pipe"](8,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",5),l["\u0275\u0275template"](10,gr,7,10,"div",6),l["\u0275\u0275template"](11,yr,7,10,"div",7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"div",5),l["\u0275\u0275template"](13,vr,7,10,"div",6),l["\u0275\u0275template"](14,Sr,7,10,"div",7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](15,"div",8),l["\u0275\u0275template"](16,Ir,6,4,"div",7),l["\u0275\u0275elementStart"](17,"div",9),l["\u0275\u0275template"](18,br,2,1,"div",10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,10,"PaymentInfo")," "),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate2"]("",l["\u0275\u0275pipeBind1"](8,12,"Edition"),": ",t.edition.displayName,""),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",t.edition.dailyPrice>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.edition.weeklyPrice>0),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.edition.monthlyPrice>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.edition.annualPrice>0),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.supportsRecurringPayments),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",t.paymentGateways))},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.NgForm,r.n,r.m,a.CheckboxControlValueAccessor,a.NgControlStatus,a.NgModel],pipes:[on.a,r.f],encapsulation:2,data:{animation:[Object(Un.a)()]}}),t}(v.a),Tr=function(){function e(){}return e.prototype.isEditionFree=function(e){return!(e.dailyPrice||e.weeklyPrice||e.monthlyPrice||e.annualPrice)},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}(),Er=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Cr(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"div",10),l["\u0275\u0275elementStart"](2,"label",11),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,1,"RecurringSubscriptionUpgradeNote")," "))}function xr(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"div",10),l["\u0275\u0275elementStart"](2,"label",12),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"div",13),l["\u0275\u0275elementStart"](6,"p",14),l["\u0275\u0275text"](7),l["\u0275\u0275pipe"](8,"number"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,3,"Total")," "),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate2"](" ",n.appSession.application.currencySign,"",l["\u0275\u0275pipeBind2"](8,5,n.additionalPrice,"1.2-2")," ")}}function Or(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",15),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).checkout(e.gatewayType)})),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,i=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](2,1,"CheckoutWith"+i.getPaymentGatewayType(r.gatewayType))," ")}}function kr(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",1),l["\u0275\u0275elementStart"](1,"div",2),l["\u0275\u0275elementStart"](2,"h3",3),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"form",4),l["\u0275\u0275elementStart"](6,"h4",5),l["\u0275\u0275text"](7),l["\u0275\u0275pipe"](8,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](9,"div",6),l["\u0275\u0275template"](10,Cr,5,3,"div",7),l["\u0275\u0275template"](11,xr,9,8,"div",7),l["\u0275\u0275elementStart"](12,"div",8),l["\u0275\u0275template"](13,Or,3,3,"button",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,6,"PaymentInfo")," "),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](8,8,"Upgrade_Edition_Description",n.edition.displayName)," "),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",n.hasRecurringSubscription()),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!n.hasRecurringSubscription()),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",n.paymentGateways)}}var Ar=function(e){function t(t,n,r,i,o,a,s){var c=e.call(this,t)||this;return c._router=n,c._paymentHelperService=r,c._activatedRoute=i,c._paymentAppService=o,c._tenantRegistrationAppService=a,c._editionHelperService=s,c.subscriptionPaymentType=b.kc,c.subscriptionStartType=b.mc,c.edition=new b.P,c.tenantId=abp.session.tenantId,c.subscriptionPaymentGateway=b.jc,c.editionPaymentTypeCheck=b.O,c.showPaymentForm=!1,c}return Er(t,e),t.prototype.ngOnInit=function(){var e=this;this.showMainSpinner(),this.editionPaymentType=parseInt(this._activatedRoute.snapshot.queryParams.editionPaymentType),this.upgradeEditionId=this._activatedRoute.snapshot.queryParams.upgradeEditionId,this.appSession.tenant.edition.isFree?this._tenantRegistrationAppService.getEdition(this.upgradeEditionId).subscribe((function(t){e._editionHelperService.isEditionFree(t)?e._paymentAppService.switchBetweenFreeEditions(t.id).subscribe((function(){e.hideMainSpinner(),e._router.navigate(["app/admin/subscription-management"])})):(e.hideMainSpinner(),e.redirectToBuy())})):this._paymentAppService.hasAnyPayment().subscribe((function(t){if(!t)return e.hideMainSpinner(),void e.redirectToBuy();e._paymentAppService.getPaymentInfo(e.upgradeEditionId).subscribe((function(t){e.edition=t.edition,e.additionalPrice=Number(t.additionalPrice.toFixed(2)),e.additionalPrice<y.a.MinimumUpgradePaymentAmount?e._paymentAppService.upgradeSubscriptionCostsLessThenMinAmount(e.upgradeEditionId).subscribe((function(){e.spinnerService.hide(),e.showPaymentForm=!0,e._router.navigate(["app/admin/subscription-management"])})):(e.spinnerService.hide(),e.showPaymentForm=!0)})),e._paymentAppService.getLastCompletedPayment().subscribe((function(t){var n=new b.Ib;n.gatewayType=t.gateway,n.supportsRecurringPayments=!0,e.paymentGateways=[n],e.paymentPeriodType=t.paymentPeriodType,e.appSession.tenant.subscriptionPaymentType===e.subscriptionPaymentType.Manual&&e._paymentAppService.getActiveGateways(void 0).subscribe((function(t){e.paymentGateways=t}))}))}))},t.prototype.checkout=function(e){var t=this,n=new b.D;n.editionId=this.edition.id,n.editionPaymentType=this.editionPaymentType,n.paymentPeriodType=this.paymentPeriodType,n.recurringPaymentEnabled=this.hasRecurringSubscription(),n.subscriptionPaymentGatewayType=e,n.successUrl=y.a.remoteServiceBaseUrl+"/api/services/app/payment/"+this._paymentHelperService.getEditionPaymentType(this.editionPaymentType)+"Succeed",n.errorUrl=y.a.remoteServiceBaseUrl+"/api/services/app/payment/PaymentFailed",this._paymentAppService.createPayment(n).subscribe((function(n){t._router.navigate(["account/"+t.getPaymentGatewayType(e).toLocaleLowerCase()+"-purchase"],{queryParams:{paymentId:n,isUpgrade:!0,redirectUrl:"app/admin/subscription-management"}})}))},t.prototype.getPaymentGatewayType=function(e){return this._paymentHelperService.getPaymentGatewayType(e)},t.prototype.hasRecurringSubscription=function(){return this.appSession.tenant.subscriptionPaymentType!==this.subscriptionPaymentType.Manual},t.prototype.redirectToBuy=function(){this._router.navigate(["account/buy"],{queryParams:{tenantId:this.appSession.tenant.id,editionPaymentType:b.O.BuyNow,editionId:this.upgradeEditionId,subscriptionStartType:this.subscriptionStartType.Paid}})},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](f.e),l["\u0275\u0275directiveInject"](mr),l["\u0275\u0275directiveInject"](f.a),l["\u0275\u0275directiveInject"](b.Kb),l["\u0275\u0275directiveInject"](b.rc),l["\u0275\u0275directiveInject"](Tr))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[["class","login-form",4,"ngIf"],[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],[1,"font-weight-bolder","text-dark","font-size-h4","font-size-h1-lg"],["method","post",1,"login-form","form"],[1,"mb-2"],[1,"separator","separator-border-dashed"],[4,"ngIf"],[1,"pb-lg-0","pb-5"],["class","btn btn-success btn-block",3,"click",4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"col-sm-12"],[1,"col-sm-8"],[1,"col-sm-4","text-right"],["id","totalPrice",1,"font-weight-bolder"],[1,"btn","btn-success","btn-block",3,"click"]],template:function(e,t){1&e&&l["\u0275\u0275template"](0,kr,14,11,"div",0),2&e&&l["\u0275\u0275property"]("ngIf",t.showPaymentForm)},directives:[r.n,a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.NgForm,r.m],pipes:[on.a,r.f],encapsulation:2,data:{animation:[Object(Un.a)()]}}),t}(v.a),Rr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Pr(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",11),l["\u0275\u0275elementStart"](1,"label",12),l["\u0275\u0275elementStart"](2,"input",13),l["\u0275\u0275listener"]("change",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]();return e.onPaymentPeriodChangeChange(e.paymentPeriodType.Daily)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275pipe"](5,"number"),l["\u0275\u0275element"](6,"span"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("checked",r.selectedPaymentPeriodType===r.paymentPeriodType.Daily)("value",r.paymentPeriodType.Daily),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate3"]("",l["\u0275\u0275pipeBind1"](4,5,"DailyPrice"),": ",r.appSession.application.currencySign,"",l["\u0275\u0275pipeBind2"](5,7,r.edition.dailyPrice,"1.2-2")," ")}}function Nr(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",14),l["\u0275\u0275elementStart"](1,"label",12),l["\u0275\u0275elementStart"](2,"input",13),l["\u0275\u0275listener"]("change",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]();return e.onPaymentPeriodChangeChange(e.paymentPeriodType.Weekly)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275pipe"](5,"number"),l["\u0275\u0275element"](6,"span"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("checked",r.selectedPaymentPeriodType===r.paymentPeriodType.Weekly)("value",r.paymentPeriodType.Weekly),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate3"]("",l["\u0275\u0275pipeBind1"](4,5,"WeeklyPrice"),": ",r.appSession.application.currencySign,"",l["\u0275\u0275pipeBind2"](5,7,r.edition.weeklyPrice,"1.2-2")," ")}}function Ur(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",11),l["\u0275\u0275elementStart"](1,"label",12),l["\u0275\u0275elementStart"](2,"input",13),l["\u0275\u0275listener"]("change",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]();return e.onPaymentPeriodChangeChange(e.paymentPeriodType.Monthly)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275pipe"](5,"number"),l["\u0275\u0275element"](6,"span"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("checked",r.selectedPaymentPeriodType===r.paymentPeriodType.Monthly)("value",r.paymentPeriodType.Monthly),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate3"]("",l["\u0275\u0275pipeBind1"](4,5,"MonthlyPrice"),": ",r.appSession.application.currencySign,"",l["\u0275\u0275pipeBind2"](5,7,r.edition.monthlyPrice,"1.2-2")," ")}}function Lr(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",14),l["\u0275\u0275elementStart"](1,"label",12),l["\u0275\u0275elementStart"](2,"input",13),l["\u0275\u0275listener"]("change",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]();return e.onPaymentPeriodChangeChange(e.paymentPeriodType.Annual)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275pipe"](5,"number"),l["\u0275\u0275element"](6,"span"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("checked",r.selectedPaymentPeriodType===r.paymentPeriodType.Annual)("value",r.paymentPeriodType.Annual),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate3"]("",l["\u0275\u0275pipeBind1"](4,5,"AnnualPrice"),": ",r.appSession.application.currencySign,"",l["\u0275\u0275pipeBind2"](5,7,r.edition.annualPrice,"1.2-2")," ")}}function jr(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",15),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"]().checkout(e.gatewayType)})),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](2,1,"CheckoutWith"+i.getPaymentGatewayType(r.gatewayType))," ")}}var Hr=function(e){function t(t,n,r,i,o){var a=e.call(this,t)||this;return a._router=n,a._paymnetHelperService=r,a._activatedRoute=i,a._paymentAppService=o,a.edition=new b.P,a.tenantId=abp.session.tenantId,a.paymentPeriodType=b.Jb,a.subscriptionPaymentGateway=b.jc,a.editionPaymentTypeCheck=b.O,a}return Rr(t,e),t.prototype.ngOnInit=function(){var e=this;this.editionPaymentType=parseInt(this._activatedRoute.snapshot.queryParams.editionPaymentType),this._paymentAppService.getPaymentInfo(void 0).subscribe((function(t){e.edition=t.edition,e.additionalPrice=Number(t.additionalPrice.toFixed(2)),e.selectedPaymentPeriodType=e._paymnetHelperService.getInitialSelectedPaymentPeriodType(e.edition)})),this._paymentAppService.getActiveGateways(void 0).subscribe((function(t){e.paymentGateways=t}))},t.prototype.checkout=function(e){var t=this,n={};n.editionId=this.edition.id,n.editionPaymentType=this.editionPaymentType,n.paymentPeriodType=this.selectedPaymentPeriodType,n.recurringPaymentEnabled=!1,n.subscriptionPaymentGatewayType=e,n.successUrl=y.a.remoteServiceBaseUrl+"/api/services/app/payment/"+this._paymnetHelperService.getEditionPaymentType(this.editionPaymentType)+"Succeed",n.errorUrl=y.a.remoteServiceBaseUrl+"/api/services/app/payment/PaymentFailed",this._paymentAppService.createPayment(n).subscribe((function(n){t._router.navigate(["account/"+t.getPaymentGatewayType(e).toLocaleLowerCase()+"-purchase"],{queryParams:{paymentId:n,redirectUrl:"app/admin/subscription-management"}})}))},t.prototype.getPaymentGatewayType=function(e){return this._paymnetHelperService.getPaymentGatewayType(e)},t.prototype.onPaymentPeriodChangeChange=function(e){this.selectedPaymentPeriodType=e},t.prototype.isUpgrade=function(){return this.additionalPrice>0},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](f.e),l["\u0275\u0275directiveInject"](mr),l["\u0275\u0275directiveInject"](f.a),l["\u0275\u0275directiveInject"](b.Kb))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:13,consts:[[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],[1,"font-weight-bolder","text-dark","font-size-h4","font-size-h1-lg"],[1,"separator","separator-border-dashed"],["method","post",1,"login-form","form","mt-2"],[1,"mb-5"],[1,"radio-inline"],["class","form-group mr-2",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"pb-lg-0","pb-5"],["class","btn btn-success btn-block",3,"click",4,"ngFor","ngForOf"],[1,"form-group","mr-2"],[1,"radio"],["type","radio","name","PaymentPeriodType",1,"form-control",3,"checked","value","change"],[1,"form-group"],[1,"btn","btn-success","btn-block",3,"click"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"h3",2),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](5,"div",3),l["\u0275\u0275elementStart"](6,"form",4),l["\u0275\u0275elementStart"](7,"h4",5),l["\u0275\u0275text"](8),l["\u0275\u0275pipe"](9,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",6),l["\u0275\u0275template"](11,Pr,7,10,"div",7),l["\u0275\u0275template"](12,Nr,7,10,"div",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"div",6),l["\u0275\u0275template"](14,Ur,7,10,"div",7),l["\u0275\u0275template"](15,Lr,7,10,"div",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"div",9),l["\u0275\u0275template"](17,jr,3,3,"button",10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,8,"PaymentInfo")," "),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](9,10,"Extend_Edition_Description",t.edition.displayName)," "),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",t.edition.dailyPrice>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.edition.weeklyPrice>0),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.edition.monthlyPrice>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.edition.annualPrice>0),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",t.paymentGateways))},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.NgForm,r.n,r.m],pipes:[on.a,r.f],encapsulation:2,data:{animation:[Object(Un.a)()]}}),t}(v.a),Mr=function(){function e(){}return e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}(),qr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Fr(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",5),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](2,1,"ConfirmationMailSentPleaseClickLinkInTheEmail",n.model.emailAddress)," ")}}function Dr(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",6),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](2,1,"YourAccountIsWaitingToBeActivatedByAdmin")," "))}function Br(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",7),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275element"](3,"br"),l["\u0275\u0275elementStart"](4,"a",8),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](2,3,"TenantRegistrationLoginInfo"),""),l["\u0275\u0275advance"](3),l["\u0275\u0275propertyInterpolate"]("href",n.tenantUrl,l["\u0275\u0275sanitizeUrl"]),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](n.tenantUrl)}}var zr=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o._router=n,o._appUrlService=r,o._tenantRegistrationHelper=i,o.model=new b.Pb,o.saving=!1,o}return qr(t,e),t.prototype.ngOnInit=function(){this._tenantRegistrationHelper.registrationResult?(this.model=this._tenantRegistrationHelper.registrationResult,abp.multiTenancy.setTenantIdCookie(this.model.tenantId),this.tenantUrl=this._appUrlService.getAppRootUrlOfTenant(this.model.tenancyName)):this._router.navigate(["account/login"])},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](f.e),l["\u0275\u0275directiveInject"](rr.a),l["\u0275\u0275directiveInject"](Mr))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:23,consts:[[1,"login-form"],[1,"text-muted"],["class","alert alert-warning","role","alert",4,"ngIf"],["class","alert alert-primary","role","alert",4,"ngIf"],["class","alert alert-secondary","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-warning"],["role","alert",1,"alert","alert-primary"],["role","alert",1,"alert","alert-secondary"],[3,"href"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"h4"),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"ul"),l["\u0275\u0275elementStart"](5,"li"),l["\u0275\u0275elementStart"](6,"span",1),l["\u0275\u0275text"](7),l["\u0275\u0275pipe"](8,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"li"),l["\u0275\u0275elementStart"](11,"span",1),l["\u0275\u0275text"](12),l["\u0275\u0275pipe"](13,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](14),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"li"),l["\u0275\u0275elementStart"](16,"span",1),l["\u0275\u0275text"](17),l["\u0275\u0275pipe"](18,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](19),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](20,"li"),l["\u0275\u0275elementStart"](21,"span",1),l["\u0275\u0275text"](22),l["\u0275\u0275pipe"](23,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](24),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](25,"div"),l["\u0275\u0275template"](26,Fr,3,4,"div",2),l["\u0275\u0275template"](27,Dr,3,3,"div",3),l["\u0275\u0275template"](28,Br,6,5,"div",4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](3,13,"SuccessfullyRegistered")),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](8,15,"TenancyName"),":"),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",t.model.tenancyName,""),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](13,17,"TenantName"),":"),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",t.model.name,""),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](18,19,"UserName"),":"),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",t.model.userName,""),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](23,21,"EmailAddress"),":"),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",t.model.emailAddress,""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.model.isEmailConfirmationRequired),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!t.model.isActive),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.tenantUrl))},directives:[r.n],pipes:[on.a],encapsulation:2,data:{animation:[Object(Un.a)()]}}),t}(v.a),Gr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gr(t,e),t}(b.Ob),Vr=n("Xkw3"),Wr=function(){function e(e,t){this.el=e,this.zone=t,this.promptLabel="Enter a password",this.weakLabel="Weak",this.mediumLabel="Medium",this.strongLabel="Strong",this.feedback=!0}return Object.defineProperty(e.prototype,"showPassword",{set:function(e){this.el.nativeElement.type=e?"text":"password"},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){this.updateFilledState()},e.prototype.onInput=function(e){this.updateFilledState()},e.prototype.updateFilledState=function(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length},e.prototype.createPanel=function(){this.panel=document.createElement("div"),this.panel.className="ui-password-panel ui-widget ui-state-highlight ui-corner-all",this.meter=document.createElement("div"),this.meter.className="ui-password-meter",this.info=document.createElement("div"),this.info.className="ui-password-info",this.info.textContent=this.promptLabel,this.panel.appendChild(this.meter),this.panel.appendChild(this.info),this.panel.style.minWidth=Vr.a.getOuterWidth(this.el.nativeElement)+"px",document.body.appendChild(this.panel)},e.prototype.onFocus=function(e){var t=this;this.feedback&&(this.panel||this.createPanel(),this.panel.style.zIndex=String(++Vr.a.zindex),this.zone.runOutsideAngular((function(){setTimeout((function(){Vr.a.addClass(t.panel,"ui-password-panel-visible"),Vr.a.removeClass(t.panel,"ui-password-panel-hidden")}),1),Vr.a.absolutePosition(t.panel,t.el.nativeElement)})))},e.prototype.onBlur=function(e){var t=this;this.feedback&&(Vr.a.addClass(this.panel,"ui-password-panel-hidden"),Vr.a.removeClass(this.panel,"ui-password-panel-visible"),this.zone.runOutsideAngular((function(){setTimeout((function(){t.ngOnDestroy()}),150)})))},e.prototype.onKeyup=function(e){if(this.feedback){var t=e.target.value,n=null,r=null;if(0===t.length)n=this.promptLabel,r="0px 0px";else{var i=this.testStrength(t);i<30?(n=this.weakLabel,r="0px -10px"):i>=30&&i<80?(n=this.mediumLabel,r="0px -20px"):i>=80&&(n=this.strongLabel,r="0px -30px")}this.meter.style.backgroundPosition=r,this.info.textContent=n}},e.prototype.testStrength=function(e){var t,n=0;return t=e.match("[0-9]"),n+=25*this.normalize(t?t.length:1/4,1),t=e.match("[a-zA-Z]"),n+=10*this.normalize(t?t.length:.5,3),t=e.match("[!@#$%^&*?_~.,;=]"),n+=35*this.normalize(t?t.length:1/6,1),t=e.match("[A-Z]"),n+=30*this.normalize(t?t.length:1/6,1),(n*=e.length/8)>100?100:n},e.prototype.normalize=function(e,t){return e-t<=0?e/t:1+e/(e+t/4)*.5},Object.defineProperty(e.prototype,"disabled",{get:function(){return this.el.nativeElement.disabled},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.panel&&(document.body.removeChild(this.panel),this.panel=null,this.meter=null,this.info=null)},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](l.ElementRef),l["\u0275\u0275directiveInject"](l.NgZone))},e.\u0275dir=l["\u0275\u0275defineDirective"]({type:e,selectors:[["","pPassword",""]],hostVars:10,hostBindings:function(e,t){1&e&&l["\u0275\u0275listener"]("input",(function(e){return t.onInput(e)}))("focus",(function(e){return t.onFocus(e)}))("blur",(function(e){return t.onBlur(e)}))("keyup",(function(e){return t.onKeyup(e)})),2&e&&l["\u0275\u0275classProp"]("ui-inputtext",!0)("ui-corner-all",!0)("ui-state-default",!0)("ui-widget",!0)("ui-state-filled",t.filled)},inputs:{promptLabel:"promptLabel",weakLabel:"weakLabel",mediumLabel:"mediumLabel",strongLabel:"strongLabel",feedback:"feedback",showPassword:"showPassword"}}),e}(),Qr=function(){function e(){}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c]]}),e}(),Xr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Jr(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"h4",29),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate2"]("",l["\u0275\u0275pipeBind1"](2,2,"Edition"),": ",n.model.edition.displayName,"")}}function Yr(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"span",30),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](3,1,"TenantName_Regex_Description")))}function $r(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ul",17),l["\u0275\u0275elementStart"](1,"li",31),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"li",31),l["\u0275\u0275text"](5),l["\u0275\u0275pipe"](6,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"li",31),l["\u0275\u0275text"](8),l["\u0275\u0275pipe"](9,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"li",31),l["\u0275\u0275text"](11),l["\u0275\u0275pipe"](12,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"li",31),l["\u0275\u0275text"](14),l["\u0275\u0275pipe"](15,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](),r=l["\u0275\u0275reference"](33);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("hidden",!r.errors.requireDigit),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](3,10,"PasswordComplexity_RequireDigit_Hint")," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireLowercase),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](6,12,"PasswordComplexity_RequireLowercase_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireUppercase),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](9,14,"PasswordComplexity_RequireUppercase_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireNonAlphanumeric),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](12,16,"PasswordComplexity_RequireNonAlphanumeric_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requiredLength),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](15,18,"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength)," ")}}function Zr(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ul",17),l["\u0275\u0275elementStart"](1,"li",31),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"li",31),l["\u0275\u0275text"](5),l["\u0275\u0275pipe"](6,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"li",31),l["\u0275\u0275text"](8),l["\u0275\u0275pipe"](9,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"li",31),l["\u0275\u0275text"](11),l["\u0275\u0275pipe"](12,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"li",31),l["\u0275\u0275text"](14),l["\u0275\u0275pipe"](15,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"li",31),l["\u0275\u0275text"](17),l["\u0275\u0275pipe"](18,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](),r=l["\u0275\u0275reference"](39);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("hidden",!r.errors.requireDigit),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](3,12,"PasswordComplexity_RequireDigit_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireLowercase),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](6,14,"PasswordComplexity_RequireLowercase_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireUppercase),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](9,16,"PasswordComplexity_RequireUppercase_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireNonAlphanumeric),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](12,18,"PasswordComplexity_RequireNonAlphanumeric_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requiredLength),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](15,20,"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength)," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",r.valid),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](18,23,"PasswordsDontMatch"))}}var ei=function(e){function t(t,n,r,i,o,a,s){var c=e.call(this,t)||this;return c._tenantRegistrationService=n,c._router=r,c._profileService=i,c._tenantRegistrationHelper=o,c._activatedRoute=a,c._reCaptchaV3Service=s,c.model=new Kr,c.passwordComplexitySetting=new b.Gb,c.subscriptionStartType=b.mc,c.paymentPeriodType=b.Jb,c.selectedPaymentPeriodType=b.Jb.Monthly,c.subscriptionPaymentGateway=b.jc,c.paymentId="",c.recaptchaSiteKey=y.a.recaptchaSiteKey,c.saving=!1,c}return Xr(t,e),t.prototype.ngOnInit=function(){var e=this;this.model.editionId=this._activatedRoute.snapshot.queryParams.editionId,this.editionPaymentType=this._activatedRoute.snapshot.queryParams.editionPaymentType,this.model.editionId&&(this.model.subscriptionStartType=this._activatedRoute.snapshot.queryParams.subscriptionStartType),null==this.appSession.tenant?this._profileService.getPasswordComplexitySetting().subscribe((function(t){e.passwordComplexitySetting=t.setting})):this._router.navigate(["account/login"])},t.prototype.ngAfterViewInit=function(){var e=this;this.model.editionId&&this._tenantRegistrationService.getEdition(this.model.editionId).subscribe((function(t){e.model.edition=t}))},Object.defineProperty(t.prototype,"useCaptcha",{get:function(){return this.setting.getBoolean("App.TenantManagement.UseCaptchaOnRegistration")},enumerable:!0,configurable:!0}),t.prototype.save=function(){var e=this,t=function(t){e.saving=!0,e.model.captchaResponse=t,e._tenantRegistrationService.registerTenant(e.model).pipe(Object(T.a)((function(){e.saving=!1}))).subscribe((function(t){e.notify.success(e.l("SuccessfullyRegistered")),e._tenantRegistrationHelper.registrationResult=t,parseInt(e.model.subscriptionStartType.toString())===b.mc.Paid?e._router.navigate(["account/buy"],{queryParams:{tenantId:t.tenantId,editionId:e.model.editionId,subscriptionStartType:e.model.subscriptionStartType,editionPaymentType:e.editionPaymentType}}):e._router.navigate(["account/register-tenant-result"])}))};this.useCaptcha?this._reCaptchaV3Service.execute(this.recaptchaSiteKey,"register_tenant",(function(e){t(e)})):t(null)},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](b.rc),l["\u0275\u0275directiveInject"](f.e),l["\u0275\u0275directiveInject"](b.Mb),l["\u0275\u0275directiveInject"](Mr),l["\u0275\u0275directiveInject"](f.a),l["\u0275\u0275directiveInject"](d))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:52,vars:62,consts:[[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],[1,"font-weight-bolder","text-dark","font-size-h4","font-size-h1-lg"],["class","text-center",4,"ngIf"],[1,"separator","separator-border-dashed"],["role","form","novalidate","",1,"login-form","form","mt-2",3,"submit"],["registerForm","ngForm"],[1,"mt-2"],[1,"form-group"],["autoFocus","","type","text","name","tenancyName","required","","maxlength","64","pattern","^[a-zA-Z][a-zA-Z0-9_-]{1,}$",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"placeholder","ngModel","ngModelChange"],["tenancyName","ngModel"],[4,"ngIf"],["type","text","name","Name","required","","maxlength","128",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"placeholder","ngModel","ngModelChange"],["nameInput","ngModel"],[3,"formCtrl"],["type","email","name","adminEmailAddress","required","","maxlength","256","email","",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"placeholder","ngModel","ngModelChange"],["adminEmailAddressInput","ngModel"],[1,"form-text","text-danger"],["type","password","name","Password","validateEqual","PasswordRepeat","reverse","true","required","","pPassword","",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"ngModel","placeholder","requireDigit","requireLowercase","requireUppercase","requireNonAlphanumeric","requiredLength","promptLabel","weakLabel","mediumLabel","strongLabel","ngModelChange"],["Password","ngModel"],[1,"form-group",3,"hidden"],["class","form-text text-danger",4,"ngIf"],["type","password","name","PasswordRepeat","validateEqual","Password","reverse","false","required","",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"ngModel","placeholder","requireDigit","requireLowercase","requireUppercase","requireNonAlphanumeric","requiredLength"],["PasswordRepeat","ngModel"],[1,"pb-lg-0","pb-5"],["routerLink","/account/login","type","button",1,"btn","btn-light-primary","font-weight-bolder","font-size-h6","px-8","py-4","my-3",3,"disabled"],[1,"fa","fa-arrow-left"],["type","submit",1,"btn","btn-primary","font-weight-bolder","font-size-h6","px-8","py-4","my-3","mr-3",3,"disabled","buttonBusy","busyText"],[1,"fa","fa-check"],[1,"text-center"],[1,"form-text","text-danger","text-left"],[3,"hidden"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"h3",2),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](5,Jr,3,4,"h4",3),l["\u0275\u0275element"](6,"div",4),l["\u0275\u0275elementStart"](7,"form",5,6),l["\u0275\u0275listener"]("submit",(function(){return t.save()})),l["\u0275\u0275elementStart"](9,"h5",7),l["\u0275\u0275text"](10),l["\u0275\u0275pipe"](11,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"div",8),l["\u0275\u0275elementStart"](13,"input",9,10),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.model.tenancyName=e})),l["\u0275\u0275pipe"](15,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](16,Yr,4,3,"div",11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"div",8),l["\u0275\u0275elementStart"](18,"input",12,13),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.model.name=e})),l["\u0275\u0275pipe"](20,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](21,"validation-messages",14),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](22,"h5",7),l["\u0275\u0275text"](23),l["\u0275\u0275pipe"](24,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](25,"div",8),l["\u0275\u0275elementStart"](26,"input",15,16),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.model.adminEmailAddress=e})),l["\u0275\u0275pipe"](28,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](29,"span",17),l["\u0275\u0275element"](30,"validation-messages",14),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](31,"div",8),l["\u0275\u0275elementStart"](32,"input",18,19),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.model.adminPassword=e})),l["\u0275\u0275pipe"](34,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](35,"div",20),l["\u0275\u0275template"](36,$r,16,21,"ul",21),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](37,"div",8),l["\u0275\u0275element"](38,"input",22,23),l["\u0275\u0275pipe"](40,"localize"),l["\u0275\u0275elementStart"](41,"div",20),l["\u0275\u0275template"](42,Zr,19,25,"ul",21),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](43,"div",24),l["\u0275\u0275elementStart"](44,"button",25),l["\u0275\u0275element"](45,"i",26),l["\u0275\u0275text"](46),l["\u0275\u0275pipe"](47,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](48,"button",27),l["\u0275\u0275element"](49,"i",28),l["\u0275\u0275text"](50),l["\u0275\u0275pipe"](51,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275reference"](8),r=l["\u0275\u0275reference"](14),i=l["\u0275\u0275reference"](19),o=l["\u0275\u0275reference"](27),a=l["\u0275\u0275reference"](33),s=l["\u0275\u0275reference"](39);l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,42,"TenantSignUp")," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.model.edition),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](11,44,"TenantInformations")," "),l["\u0275\u0275advance"](3),l["\u0275\u0275propertyInterpolate1"]("placeholder","",l["\u0275\u0275pipeBind1"](15,46,"TenancyName")," *"),l["\u0275\u0275property"]("ngModel",t.model.tenancyName),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",!r.valid&&!r.pristine),l["\u0275\u0275advance"](2),l["\u0275\u0275propertyInterpolate1"]("placeholder","",l["\u0275\u0275pipeBind1"](20,48,"TenantName")," *"),l["\u0275\u0275property"]("ngModel",t.model.name),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("formCtrl",i),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](24,50,"AccountSettings")," "),l["\u0275\u0275advance"](3),l["\u0275\u0275propertyInterpolate1"]("placeholder","",l["\u0275\u0275pipeBind1"](28,52,"AdminEmailAddress")," *"),l["\u0275\u0275property"]("ngModel",t.model.adminEmailAddress),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("formCtrl",o),l["\u0275\u0275advance"](2),l["\u0275\u0275propertyInterpolate"]("placeholder",l["\u0275\u0275pipeBind1"](34,54,"AdminPassword")),l["\u0275\u0275property"]("ngModel",t.model.adminPassword)("requireDigit",t.passwordComplexitySetting.requireDigit)("requireLowercase",t.passwordComplexitySetting.requireLowercase)("requireUppercase",t.passwordComplexitySetting.requireUppercase)("requireNonAlphanumeric",t.passwordComplexitySetting.requireNonAlphanumeric)("requiredLength",t.passwordComplexitySetting.requiredLength)("promptLabel",t.l("PleaseEnterYourNewPassword"))("weakLabel",t.l("weak"))("mediumLabel",t.l("medium"))("strongLabel",t.l("strong")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("hidden",n.form.valid||n.form.pristine),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",a.errors),l["\u0275\u0275advance"](2),l["\u0275\u0275propertyInterpolate"]("placeholder",l["\u0275\u0275pipeBind1"](40,56,"PasswordRepeat")),l["\u0275\u0275property"]("ngModel",t.model.passwordRepeat)("requireDigit",t.passwordComplexitySetting.requireDigit)("requireLowercase",t.passwordComplexitySetting.requireLowercase)("requireUppercase",t.passwordComplexitySetting.requireUppercase)("requireNonAlphanumeric",t.passwordComplexitySetting.requireNonAlphanumeric)("requiredLength",t.passwordComplexitySetting.requiredLength),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("hidden",n.form.valid||n.form.pristine),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",s.errors),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",t.saving),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](47,58,"Back"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",!n.form.valid)("buttonBusy",t.saving)("busyText",t.l("SavingWithThreeDot")),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](51,60,"Submit"),"")}},directives:[r.n,a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.NgForm,a.DefaultValueAccessor,Mn.a,a.RequiredValidator,a.MaxLengthValidator,a.PatternValidator,a.NgControlStatus,a.NgModel,Ln.a,a.EmailValidator,cr.a,Wr,lr.a,f.f,rn.a],pipes:[on.a],encapsulation:2,data:{animation:[Object(Un.a)()]}}),t}(v.a),ti=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ni=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ti(t,e),t}(b.Nb),ri=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function ii(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ul",26),l["\u0275\u0275elementStart"](1,"li",27),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"li",27),l["\u0275\u0275text"](5),l["\u0275\u0275pipe"](6,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"li",27),l["\u0275\u0275text"](8),l["\u0275\u0275pipe"](9,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"li",27),l["\u0275\u0275text"](11),l["\u0275\u0275pipe"](12,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"li",27),l["\u0275\u0275text"](14),l["\u0275\u0275pipe"](15,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](),r=l["\u0275\u0275reference"](29);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("hidden",!r.errors.requireDigit),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](3,10,"PasswordComplexity_RequireDigit_Hint")," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireLowercase),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](6,12,"PasswordComplexity_RequireLowercase_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireUppercase),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](9,14,"PasswordComplexity_RequireUppercase_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireNonAlphanumeric),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](12,16,"PasswordComplexity_RequireNonAlphanumeric_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requiredLength),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](15,18,"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength)," ")}}function oi(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ul",26),l["\u0275\u0275elementStart"](1,"li",27),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"li",27),l["\u0275\u0275text"](5),l["\u0275\u0275pipe"](6,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"li",27),l["\u0275\u0275text"](8),l["\u0275\u0275pipe"](9,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"li",27),l["\u0275\u0275text"](11),l["\u0275\u0275pipe"](12,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"li",27),l["\u0275\u0275text"](14),l["\u0275\u0275pipe"](15,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"li",27),l["\u0275\u0275text"](17),l["\u0275\u0275pipe"](18,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](),r=l["\u0275\u0275reference"](35);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("hidden",!r.errors.requireDigit),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](3,12,"PasswordComplexity_RequireDigit_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireLowercase),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](6,14,"PasswordComplexity_RequireLowercase_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireUppercase),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](9,16,"PasswordComplexity_RequireUppercase_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requireNonAlphanumeric),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](12,18,"PasswordComplexity_RequireNonAlphanumeric_Hint"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",!r.errors.requiredLength),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](15,20,"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength)," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",r.valid),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](18,23,"PasswordsDontMatch"))}}var ai=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t)||this;return s._accountService=n,s._router=r,s._loginService=i,s._profileService=o,s._reCaptchaV3Service=a,s.model=new ni,s.passwordComplexitySetting=new b.Gb,s.recaptchaSiteKey=y.a.recaptchaSiteKey,s.saving=!1,s}return ri(t,e),t.prototype.ngOnInit=function(){var e=this;null!=this.appSession.tenant?this._profileService.getPasswordComplexitySetting().subscribe((function(t){e.passwordComplexitySetting=t.setting})):this._router.navigate(["account/login"])},Object.defineProperty(t.prototype,"useCaptcha",{get:function(){return this.setting.getBoolean("App.UserManagement.UseCaptchaOnRegistration")},enumerable:!0,configurable:!0}),t.prototype.save=function(){var e=this,t=function(t){e.saving=!0,e.model.captchaResponse=t,e._accountService.register(e.model).pipe(Object(T.a)((function(){e.saving=!1}))).subscribe((function(t){if(!t.canLogin)return e.notify.success(e.l("SuccessfullyRegistered")),void e._router.navigate(["account/login"]);e.saving=!0,e._loginService.authenticateModel.userNameOrEmailAddress=e.model.userName,e._loginService.authenticateModel.password=e.model.password,e._loginService.authenticate((function(){e.saving=!1}))}))};this.useCaptcha?this._reCaptchaV3Service.execute(this.recaptchaSiteKey,"register",(function(e){t(e)})):t(null)},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](b.b),l["\u0275\u0275directiveInject"](f.e),l["\u0275\u0275directiveInject"](Yt),l["\u0275\u0275directiveInject"](b.Mb),l["\u0275\u0275directiveInject"](d))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:48,vars:60,consts:[[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],[1,"font-weight-bolder","text-dark","font-size-h4","font-size-h1-lg"],["method","post","novalidate","",1,"login-form","form",3,"ngSubmit"],["registerForm","ngForm"],[1,"form-group"],["autoFocus","","type","text","name","Name","required","","maxlength","64",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"placeholder","ngModel","ngModelChange"],["nameInput","ngModel"],[3,"formCtrl"],["type","text","name","Surname","required","","maxlength","64",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"placeholder","ngModel","ngModelChange"],["surnameInput","ngModel"],["type","email","name","EmailAddress","required","","maxlength","256","pattern","^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"placeholder","ngModel","ngModelChange"],["emailAddressInput","ngModel"],["type","text","autocomplete","new-password","name","UserName","required","","maxlength","256",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"placeholder","ngModel","ngModelChange"],["userNameInput","ngModel"],["type","password","name","Password","validateEqual","PasswordRepeat","reverse","true","required","","pPassword","",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"ngModel","placeholder","requireDigit","requireLowercase","requireUppercase","requireNonAlphanumeric","requiredLength","promptLabel","weakLabel","mediumLabel","strongLabel","ngModelChange"],["Password","ngModel"],[1,"form-group",3,"hidden"],["class","form-text text-danger",4,"ngIf"],["type","password","name","PasswordRepeat","validateEqual","Password","reverse","false","required","",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"ngModel","placeholder","requireDigit","requireLowercase","requireUppercase","requireNonAlphanumeric","requiredLength"],["PasswordRepeat","ngModel"],[1,"pb-lg-0","pb-5"],["routerLink","/account/login","type","button",1,"btn","btn-light-primary","font-weight-bolder","font-size-h6","px-8","py-4","my-3",3,"disabled"],[1,"fa","fa-arrow-left"],["type","submit",1,"btn","btn-primary","font-weight-bolder","font-size-h6","px-8","py-4","my-3","mr-3",3,"disabled","buttonBusy","busyText"],[1,"fa","fa-check"],[1,"form-text","text-danger"],[3,"hidden"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"h3",2),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"form",3,4),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.save()})),l["\u0275\u0275elementStart"](7,"div",5),l["\u0275\u0275elementStart"](8,"input",6,7),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.model.name=e})),l["\u0275\u0275pipe"](10,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](11,"validation-messages",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"div",5),l["\u0275\u0275elementStart"](13,"input",9,10),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.model.surname=e})),l["\u0275\u0275pipe"](15,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](16,"validation-messages",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"div",5),l["\u0275\u0275elementStart"](18,"input",11,12),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.model.emailAddress=e})),l["\u0275\u0275pipe"](20,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](21,"validation-messages",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](22,"div",5),l["\u0275\u0275elementStart"](23,"input",13,14),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.model.userName=e})),l["\u0275\u0275pipe"](25,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](26,"validation-messages",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](27,"div",5),l["\u0275\u0275elementStart"](28,"input",15,16),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.model.password=e})),l["\u0275\u0275pipe"](30,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](31,"div",17),l["\u0275\u0275template"](32,ii,16,21,"ul",18),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](33,"div",5),l["\u0275\u0275element"](34,"input",19,20),l["\u0275\u0275pipe"](36,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](37,"div",17),l["\u0275\u0275template"](38,oi,19,25,"ul",18),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](39,"div",21),l["\u0275\u0275elementStart"](40,"button",22),l["\u0275\u0275element"](41,"i",23),l["\u0275\u0275text"](42),l["\u0275\u0275pipe"](43,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](44,"button",24),l["\u0275\u0275element"](45,"i",25),l["\u0275\u0275text"](46),l["\u0275\u0275pipe"](47,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275reference"](6),r=l["\u0275\u0275reference"](9),i=l["\u0275\u0275reference"](14),o=l["\u0275\u0275reference"](19),a=l["\u0275\u0275reference"](24),s=l["\u0275\u0275reference"](29),c=l["\u0275\u0275reference"](35);l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,42,"SignUp")," "),l["\u0275\u0275advance"](5),l["\u0275\u0275propertyInterpolate1"]("placeholder","",l["\u0275\u0275pipeBind1"](10,44,"Name")," *"),l["\u0275\u0275property"]("ngModel",t.model.name),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("formCtrl",r),l["\u0275\u0275advance"](2),l["\u0275\u0275propertyInterpolate1"]("placeholder","",l["\u0275\u0275pipeBind1"](15,46,"Surname")," *"),l["\u0275\u0275property"]("ngModel",t.model.surname),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("formCtrl",i),l["\u0275\u0275advance"](2),l["\u0275\u0275propertyInterpolate1"]("placeholder","",l["\u0275\u0275pipeBind1"](20,48,"EmailAddress")," *"),l["\u0275\u0275property"]("ngModel",t.model.emailAddress),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("formCtrl",o),l["\u0275\u0275advance"](2),l["\u0275\u0275propertyInterpolate1"]("placeholder","",l["\u0275\u0275pipeBind1"](25,50,"UserName")," *"),l["\u0275\u0275property"]("ngModel",t.model.userName),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("formCtrl",a),l["\u0275\u0275advance"](2),l["\u0275\u0275propertyInterpolate"]("placeholder",l["\u0275\u0275pipeBind1"](30,52,"Password")),l["\u0275\u0275property"]("ngModel",t.model.password)("requireDigit",t.passwordComplexitySetting.requireDigit)("requireLowercase",t.passwordComplexitySetting.requireLowercase)("requireUppercase",t.passwordComplexitySetting.requireUppercase)("requireNonAlphanumeric",t.passwordComplexitySetting.requireNonAlphanumeric)("requiredLength",t.passwordComplexitySetting.requiredLength)("promptLabel",t.l("PleaseEnterYourNewPassword"))("weakLabel",t.l("weak"))("mediumLabel",t.l("medium"))("strongLabel",t.l("strong")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("hidden",n.form.valid||n.form.pristine),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",s.errors),l["\u0275\u0275advance"](2),l["\u0275\u0275propertyInterpolate"]("placeholder",l["\u0275\u0275pipeBind1"](36,54,"PasswordRepeat")),l["\u0275\u0275property"]("ngModel",t.model.passwordRepeat)("requireDigit",t.passwordComplexitySetting.requireDigit)("requireLowercase",t.passwordComplexitySetting.requireLowercase)("requireUppercase",t.passwordComplexitySetting.requireUppercase)("requireNonAlphanumeric",t.passwordComplexitySetting.requireNonAlphanumeric)("requiredLength",t.passwordComplexitySetting.requiredLength),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("hidden",n.form.valid||n.form.pristine),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",c.errors),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",t.saving),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](43,56,"Back"),""),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",!n.form.valid)("buttonBusy",t.saving)("busyText",t.l("SavingWithThreeDot")),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](47,58,"Submit"),"")}},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.NgForm,a.DefaultValueAccessor,Mn.a,a.RequiredValidator,a.MaxLengthValidator,a.NgControlStatus,a.NgModel,Ln.a,a.PatternValidator,cr.a,Wr,lr.a,r.n,f.f,rn.a],pipes:[on.a],encapsulation:2,data:{animation:[Object(Un.a)()]}}),t}(v.a),si=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function ci(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",6),l["\u0275\u0275elementStart"](1,"div",7),l["\u0275\u0275element"](2,"i",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"div",9),l["\u0275\u0275text"](4),l["\u0275\u0275pipe"](5,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](5,1,"ThereIsNoEditionToUpgrade")))}function li(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"h4",24),l["\u0275\u0275elementStart"](1,"span"),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](3,1,"Free"),""))}function pi(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275element"](3,"br"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](2).$implicit,r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate3"]("",r.appSession.application.currencySign," ",n.edition.dailyPrice," ",l["\u0275\u0275pipeBind1"](2,3,"PerDay"),"")}}function ui(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275element"](3,"br"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](2).$implicit,r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate3"]("",r.appSession.application.currencySign," ",n.edition.weeklyPrice," ",l["\u0275\u0275pipeBind1"](2,3,"PerWeek"),"")}}function di(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275element"](3,"br"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](2).$implicit,r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate3"]("",r.appSession.application.currencySign," ",n.edition.monthlyPrice," ",l["\u0275\u0275pipeBind1"](2,3,"PerMonth")," ")}}function hi(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](2).$implicit,r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate3"]("",r.appSession.application.currencySign," ",n.edition.annualPrice," ",l["\u0275\u0275pipeBind1"](2,3,"PerYear"),"")}}function mi(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"h4",24),l["\u0275\u0275template"](1,pi,4,5,"span",25),l["\u0275\u0275template"](2,ui,4,5,"span",25),l["\u0275\u0275template"](3,di,4,5,"span",25),l["\u0275\u0275template"](4,hi,3,5,"span",25),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.edition.dailyPrice>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.edition.weeklyPrice>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.edition.monthlyPrice>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.edition.annualPrice>0)}}function fi(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span",28),l["\u0275\u0275element"](1,"i",29),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",n.displayName," ")}}function gi(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span",30),l["\u0275\u0275element"](1,"i",31),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",n.displayName," ")}}function yi(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span",28),l["\u0275\u0275element"](1,"i",29),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit,r=l["\u0275\u0275nextContext"]().$implicit,i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate2"](" ",n.displayName,":",i.getFeatureValueForEdition(n,r)," ")}}function vi(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span"),l["\u0275\u0275template"](1,fi,3,1,"span",26),l["\u0275\u0275template"](2,gi,3,1,"span",27),l["\u0275\u0275template"](3,yi,3,2,"span",26),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=l["\u0275\u0275nextContext"]().$implicit,i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",i.isTrueFalseFeature(n)&&i.featureEnabledForEdition(n,r)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",i.isTrueFalseFeature(n)&&!i.featureEnabledForEdition(n,r)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!i.isTrueFalseFeature(n))}}function Si(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",32),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().$implicit,t=l["\u0275\u0275nextContext"]();return t.upgrade(e.edition,t.editionPaymentType.Upgrade)})),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275elementEnd"]()}2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](2,1,"Upgrade")," "))}var Ii=function(){return["/account/register-tenant"]},_i=function(e,t){return{editionId:e,subscriptionStartType:t}};function bi(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"button",33),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit,r=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction0"](5,Ii))("queryParams",l["\u0275\u0275pureFunction2"](6,_i,n.edition.id,r.subscriptionStartType.Free)),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](2,3,"Start")," ")}}function wi(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"button",34),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit,r=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction0"](5,Ii))("queryParams",l["\u0275\u0275pureFunction2"](6,_i,n.edition.id,r.subscriptionStartType.Trial)),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](2,3,"FreeTrial")," ")}}var Ti=function(e,t,n){return{editionId:e,subscriptionStartType:t,editionPaymentType:n}};function Ei(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"button",35),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"localize"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit,r=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction0"](5,Ii))("queryParams",l["\u0275\u0275pureFunction3"](6,Ti,n.edition.id,r.subscriptionStartType.Paid,r.editionPaymentType.NewRegistration)),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](2,3,"BuyNow")," ")}}function Ci(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",10),l["\u0275\u0275elementStart"](1,"div",11),l["\u0275\u0275elementStart"](2,"span",12),l["\u0275\u0275namespaceSVG"](),l["\u0275\u0275elementStart"](3,"svg",13),l["\u0275\u0275element"](4,"polyline",14),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275namespaceHTML"](),l["\u0275\u0275elementStart"](5,"span",15),l["\u0275\u0275element"](6,"i"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"span",16),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](9,li,4,3,"h4",17),l["\u0275\u0275template"](10,mi,5,4,"h4",17),l["\u0275\u0275elementStart"](11,"p",18),l["\u0275\u0275template"](12,vi,4,3,"span",19),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](13,Si,3,3,"button",20),l["\u0275\u0275template"](14,bi,3,9,"button",21),l["\u0275\u0275template"](15,wi,3,9,"button",22),l["\u0275\u0275template"](16,Ei,3,10,"button",23),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=t.index,i=l["\u0275\u0275nextContext"]();l["\u0275\u0275classProp"]("border-left-md",r>0),l["\u0275\u0275advance"](6),l["\u0275\u0275classMapInterpolate1"]("fa ",i.editionIcons[r],""),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.edition.displayName),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",i.isFree(n.edition)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!i.isFree(n.edition)),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",i.editionsSelectOutput.allFeatures),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",i.isUserLoggedIn),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!i.isUserLoggedIn&&i.isFree(n.edition)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!i.isUserLoggedIn&&!i.isFree(n.edition)&&n.edition.trialDayCount),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!i.isUserLoggedIn&&!i.isFree(n.edition))}}var xi=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o._tenantRegistrationService=n,o._editionHelperService=r,o._router=i,o.editionsSelectOutput=new b.R,o.isUserLoggedIn=!1,o.isSetted=!1,o.editionPaymentType=b.O,o.subscriptionStartType=b.mc,o.editionIcons=["flaticon-open-box","flaticon-rocket","flaticon-gift","flaticon-confetti","flaticon-cogwheel-2","flaticon-app","flaticon-coins","flaticon-piggy-bank","flaticon-bag","flaticon-lifebuoy","flaticon-technology-1","flaticon-cogwheel-1","flaticon-infinity","flaticon-interface-5","flaticon-squares-3","flaticon-interface-6","flaticon-mark","flaticon-business","flaticon-interface-7","flaticon-list-2","flaticon-bell","flaticon-technology","flaticon-squares-2","flaticon-notes","flaticon-profile","flaticon-layers","flaticon-interface-4","flaticon-signs","flaticon-menu-1","flaticon-symbol"],o}return si(t,e),t.prototype.ngOnInit=function(){var e=this;this.isUserLoggedIn=abp.session.userId>0,this._tenantRegistrationService.getEditionsForSelect().subscribe((function(t){e.editionsSelectOutput=t,(!e.editionsSelectOutput.editionsWithFeatures||e.editionsSelectOutput.editionsWithFeatures.length<=0)&&e._router.navigate(["/account/register-tenant"])}))},t.prototype.isFree=function(e){return this._editionHelperService.isEditionFree(e)},t.prototype.isTrueFalseFeature=function(e){return"CHECKBOX"===e.inputType.name},t.prototype.featureEnabledForEdition=function(e,t){var n=S.filter(t.featureValues,{name:e.name});return!(!n||n.length<=0)&&"true"===n[0].value.toLowerCase()},t.prototype.getFeatureValueForEdition=function(e,t){var n=S.filter(t.featureValues,{name:e.name});return!n||n.length<=0?"":n[0].value},t.prototype.upgrade=function(e,t){this._router.navigate(["/account/upgrade"],{queryParams:{upgradeEditionId:e.id,editionPaymentType:t}})},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](b.rc),l["\u0275\u0275directiveInject"](Tr),l["\u0275\u0275directiveInject"](f.e))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:8,vars:5,consts:[[1,"content","d-flex","flex-column","flex-column-fluid"],[1,"card","card-custom","gutter-b","shadow-lg"],[1,"card-body"],[1,"row","justify-content-center","mt-10","mb-0","pricing-items"],["class","alert alert-warning fade show","role","alert",4,"ngIf"],["class","pt-30 pt-md-25 px-5 mb-15 text-center","style","min-width:200px",3,"border-left-md",4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-warning","fade","show"],[1,"alert-icon"],[1,"flaticon-warning"],[1,"alert-text"],[1,"pt-30","pt-md-25","px-5","mb-15","text-center",2,"min-width","200px"],[1,"d-flex","flex-center","position-relative","mb-25"],[1,"svg","svg-fill-primary","opacity-4","position-absolute"],["width","175","height","200"],["points","87,0 174,50 174,150 87,200 0,150 0,50 87,0"],[1,"pricing-item-icon","text-primary"],[1,"font-size-h1","d-block","d-block","font-weight-boldest","py-2","pricing-title"],["class","font-size-h6 d-block d-block font-weight-bold mb-7 pricing-subtitle","style","min-height: 100px;",4,"ngIf"],[1,"mb-4","d-flex","flex-column"],[4,"ngFor","ngForOf"],["class","btn btn-warning btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2",3,"click",4,"ngIf"],["class","btn btn-success btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2","href","#",3,"routerLink","queryParams",4,"ngIf"],["class","btn btn-warning btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2","href","#",3,"routerLink","queryParams",4,"ngIf"],["class","btn btn-primary btn-pill  btn-brand btn-wide btn-uppercase btn-bolder btn-sm mx-2","href","#",3,"routerLink","queryParams",4,"ngIf"],[1,"font-size-h6","d-block","d-block","font-weight-bold","mb-7","pricing-subtitle",2,"min-height","100px"],[4,"ngIf"],["class","text-success text-center",4,"ngIf"],["class","text-muted text-center",4,"ngIf"],[1,"text-success","text-center"],[1,"far","fa-check-circle","text-success"],[1,"text-muted","text-center"],[1,"far","fa-times-circle","text-muted"],[1,"btn","btn-warning","btn-pill","btn-brand","btn-wide","btn-uppercase","btn-bolder","btn-sm","mx-2",3,"click"],["href","#",1,"btn","btn-success","btn-pill","btn-brand","btn-wide","btn-uppercase","btn-bolder","btn-sm","mx-2",3,"routerLink","queryParams"],["href","#",1,"btn","btn-warning","btn-pill","btn-brand","btn-wide","btn-uppercase","btn-bolder","btn-sm","mx-2",3,"routerLink","queryParams"],["href","#",1,"btn","btn-primary","btn-pill","btn-brand","btn-wide","btn-uppercase","btn-bolder","btn-sm","mx-2",3,"routerLink","queryParams"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"div",0),l["\u0275\u0275elementStart"](2,"div"),l["\u0275\u0275elementStart"](3,"div",1),l["\u0275\u0275elementStart"](4,"div",2),l["\u0275\u0275elementStart"](5,"div",3),l["\u0275\u0275template"](6,ci,6,3,"div",4),l["\u0275\u0275template"](7,Ci,17,13,"div",5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](2),l["\u0275\u0275classMap"](t.containerClass),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",!t.editionsSelectOutput||!t.editionsSelectOutput.editionsWithFeatures),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",t.editionsSelectOutput.editionsWithFeatures))},directives:[r.n,r.m,f.f],pipes:[on.a],styles:["body{background-color:#f2f3f8}button:disabled,button[disabled]{cursor:not-allowed!important}.row-centered{text-align:center;display:block!important}.col-centered{display:inline-table;float:none;text-align:center;margin-right:-4px}.pricing-items .pricing-title{font-size:3rem;font-weight:700;display:block;margin-top:5em;color:#6c7293}.pricing-items .pricing-subtitle{font-size:1.1rem;color:#adb1c7;font-weight:500;min-height:72px}.pricing-items .pricing-item-icon{left:50%;transform:translateX(-50%);position:absolute}.pricing-items .pricing-item-icon>i{font-size:8.57rem}"],encapsulation:2,data:{animation:[Object(Un.a)()]}}),t}(v.a),Oi=n("IQ2n"),ki=n("PEYQ"),Ai=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Ri(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",12),l["\u0275\u0275elementStart"](1,"div",13),l["\u0275\u0275element"](2,"i",14),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"div",15),l["\u0275\u0275elementStart"](4,"h4"),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"p"),l["\u0275\u0275elementStart"](7,"span"),l["\u0275\u0275text"](8),l["\u0275\u0275elementStart"](9,"strong"),l["\u0275\u0275text"](10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](11,"br"),l["\u0275\u0275elementStart"](12,"span"),l["\u0275\u0275text"](13),l["\u0275\u0275elementStart"](14,"strong"),l["\u0275\u0275text"](15),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"](" ",n.l("DemoPayPalAccount")," "),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"]("",n.l("UserName"),": "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.config.demoUsername),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"]("",n.l("Password"),": "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.config.demoPassword)}}function Pi(e,t){if(1&e&&l["\u0275\u0275element"](0,"div",16),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("busyIf",n.paypalIsLoading)}}var Ni=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t)||this;return s.injector=t,s._activatedRoute=n,s._payPalPaymentAppService=r,s._paymentAppService=i,s._router=o,s._tenantRegistrationHelper=a,s.paypalIsLoading=!0,s.subscriptionPaymentGateway=b.jc,s.totalAmount=0,s.description="",s}return Ai(t,e),t.prototype.ngOnInit=function(){var e=this;this.paymentId=this._activatedRoute.snapshot.queryParams.paymentId,this.redirectUrl=this._activatedRoute.snapshot.queryParams.redirectUrl,this._payPalPaymentAppService.getConfiguration().subscribe((function(t){e.config=t,(new w.a).load("https://www.paypal.com/sdk/js?client-id="+t.clientId+"&currency="+e.appSession.application.currency).then((function(){e._paymentAppService.getPayment(e.paymentId).subscribe((function(t){e.description=t.description,e.totalAmount=t.amount,e.successCallbackUrl=t.successUrl,e.errorCallbackUrl=t.errorUrl,e.subscriptionPaymentGateway=t.gateway,e.paypalIsLoading=!1,e.preparePaypalButton()}))}))}))},t.prototype.preparePaypalButton=function(){var e=this;window.paypal.Buttons({createOrder:function(t,n){return n.order.create({purchase_units:[{amount:{value:e.totalAmount,currency_code:e.appSession.application.currency}}]})},onApprove:function(t,n){e._payPalPaymentAppService.confirmPayment(e.paymentId,t.orderID).subscribe((function(){Oi.a.ajax("post",e.successCallbackUrl+(e.successCallbackUrl.includes("?")?"&":"?")+"paymentId="+e.paymentId,null,null,(function(t){e._tenantRegistrationHelper.registrationResult&&(e._tenantRegistrationHelper.registrationResult.isActive=!0),e._router.navigate([e.redirectUrl])}))}))}}).render("#paypal-button")},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](f.a),l["\u0275\u0275directiveInject"](b.Hb),l["\u0275\u0275directiveInject"](b.Kb),l["\u0275\u0275directiveInject"](f.e),l["\u0275\u0275directiveInject"](Mr))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["paypal-purchase-component"]],inputs:{editionPaymentType:"editionPaymentType"},features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:23,vars:14,consts:[[1,"login-form"],[1,"card","card-bordered"],[1,"card-header"],[1,"card-body"],[1,"form-group","row"],[1,"col-sm-4"],[1,"col-sm-8","text-right"],[1,"font-weight-bold"],["id","totalPrice",1,"font-weight-bold"],["class","alert alert-custom alert-light-dark fade show mb-5","role","alert",4,"ngIf"],["id","paypal-button"],[3,"busyIf",4,"ngIf"],["role","alert",1,"alert","alert-custom","alert-light-dark","fade","show","mb-5"],[1,"alert-icon"],[1,"flaticon-questions-circular-button"],[1,"alert-text"],[3,"busyIf"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"h3"),l["\u0275\u0275text"](4),l["\u0275\u0275pipe"](5,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",3),l["\u0275\u0275elementStart"](7,"div",4),l["\u0275\u0275elementStart"](8,"label",5),l["\u0275\u0275text"](9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",6),l["\u0275\u0275elementStart"](11,"p",7),l["\u0275\u0275text"](12),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"div",4),l["\u0275\u0275elementStart"](14,"label",5),l["\u0275\u0275text"](15),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"div",6),l["\u0275\u0275elementStart"](17,"p",8),l["\u0275\u0275text"](18),l["\u0275\u0275pipe"](19,"number"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](20,Ri,16,5,"div",9),l["\u0275\u0275element"](21,"div",10),l["\u0275\u0275template"](22,Pi,1,1,"div",11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](5,9,"TenantSignUp")," "),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](t.l("Item")),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",t.description," "),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](t.l("Price")),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate2"](" ",t.appSession.application.currencySign,"",l["\u0275\u0275pipeBind2"](19,11,t.totalAmount,"1.2-2")," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.config&&t.config.demoUsername&&t.config.demoPassword),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.paypalIsLoading))},directives:[r.n,ki.a],pipes:[on.a,r.f],encapsulation:2,data:{animation:[Object(Un.a)()]}}),t}(v.a),Ui=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Li(e,t){if(1&e&&l["\u0275\u0275element"](0,"div",11),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("busyIf",n.stripeIsLoading)}}var ji=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o._activatedRoute=n,o._stripePaymentAppService=r,o._paymentAppService=i,o.amount=0,o.description="",o.stripeIsLoading=!0,o.subscriptionPaymentGateway=b.jc,o.subscriptionStartType=b.mc,o}return Ui(t,e),t.prototype.ngOnInit=function(){var e=this;this.spinnerService.show(),this.stripeIsLoading=!0,this.paymentId=this._activatedRoute.snapshot.queryParams.paymentId,(new w.a).load("https://js.stripe.com/v3").then((function(){e._stripePaymentAppService.getConfiguration().subscribe((function(t){e._stripePaymentAppService.createPaymentSession(new b.gc({paymentId:e.paymentId,successUrl:y.a.appBaseUrl+"/account/stripe-payment-result",cancelUrl:y.a.appBaseUrl+"/account/stripe-cancel-payment"})).subscribe((function(n){e._paymentAppService.getPayment(e.paymentId).subscribe((function(r){e.spinnerService.hide(),e.amount=r.amount,e.description=r.description,e.successCallbackUrl=r.successUrl,e.errorCallbackUrl=r.errorUrl;var i=window.Stripe(t.publishableKey);document.getElementById("stripe-checkout").addEventListener("click",(function(){i.redirectToCheckout({sessionId:n})})),e.stripeIsLoading=!1}),(function(t){e.spinnerService.hide()}))}),(function(t){e.spinnerService.hide()}))}),(function(t){e.spinnerService.hide()}))})).catch((function(t){e.spinnerService.hide()}))},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](f.a),l["\u0275\u0275directiveInject"](b.hc),l["\u0275\u0275directiveInject"](b.Kb))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["stripe-purchase-component"]],inputs:{editionPaymentType:"editionPaymentType"},features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:24,vars:17,consts:[[1,"login-form"],[1,"card","card-bordered"],[1,"card-header"],[1,"card-body"],[1,"form-group","row"],[1,"col-sm-4"],[1,"col-sm-8","text-right"],[1,"font-weight-bold"],["id","totalPrice",1,"font-weight-bold"],["id","stripe-checkout",1,"btn","btn-primary","btn-block",3,"disabled"],[3,"busyIf",4,"ngIf"],[3,"busyIf"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"h3"),l["\u0275\u0275text"](4),l["\u0275\u0275pipe"](5,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",3),l["\u0275\u0275elementStart"](7,"div",4),l["\u0275\u0275elementStart"](8,"label",5),l["\u0275\u0275text"](9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",6),l["\u0275\u0275elementStart"](11,"p",7),l["\u0275\u0275text"](12),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"div",4),l["\u0275\u0275elementStart"](14,"label",5),l["\u0275\u0275text"](15),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"div",6),l["\u0275\u0275elementStart"](17,"p",8),l["\u0275\u0275text"](18),l["\u0275\u0275pipe"](19,"number"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](20,"button",9),l["\u0275\u0275text"](21),l["\u0275\u0275pipe"](22,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](23,Li,1,1,"div",10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](5,10,"TenantSignUp")," "),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](t.l("Item")),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",t.description," "),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](t.l("Price")),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate2"](" ",t.appSession.application.currencySign,"",l["\u0275\u0275pipeBind2"](19,12,t.amount,"1.2-2")," "),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",t.stripeIsLoading),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](22,15,"Purchase")),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.stripeIsLoading))},directives:[r.n,ki.a],pipes:[on.a,r.f],encapsulation:2,data:{animation:[Object(Un.a)()]}}),t}(v.a),Hi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mi=function(e){function t(t){return e.call(this,t)||this}return Hi(t,e),t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["stripe-cancel-payment"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:6,consts:[[1,"d-flex","h-100","align-items-center",2,"padding-bottom","150px !important"],[1,"login-form","align-middle","m-0","text-center"],[1,"pb-13","pt-lg-0","pt-5"],[1,"font-weight-bolder","text-dark","font-size-h4","font-size-h1-lg"],[1,"my-5"],[1,"fas","fa-times","fa-4x","text-danger"],["href","/app/admin/subscription-management",1,"btn","btn-info"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"h3",3),l["\u0275\u0275text"](4),l["\u0275\u0275pipe"](5,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",4),l["\u0275\u0275element"](7,"i",5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"a",6),l["\u0275\u0275text"](9),l["\u0275\u0275pipe"](10,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](5,2,"PaymentCouldNotCompleted")," "),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](10,4,"GoToSubscriptionManagement"),""))},pipes:[on.a],encapsulation:2}),t}(v.a),qi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fi=function(e){function t(t,n,r,i,o){var a=e.call(this,t)||this;return a._stripePaymentService=n,a._activatedRoute=r,a._router=i,a._sessionService=o,a.controlTimeout=5e3,a.maxControlCount=5,a}return qi(t,e),t.prototype.ngOnInit=function(){var e=this;this.sessionId=this._activatedRoute.snapshot.queryParams.sessionId,this._stripePaymentService.getPayment(this.sessionId).subscribe((function(t){e._sessionService.tenantId!==t.tenantId&&e._router.navigate([""]),e.paymentId=t.id,e.getPaymentResult()}))},t.prototype.getPaymentResult=function(){var e=this;this._stripePaymentService.getPaymentResult(this.paymentId).subscribe((function(t){t.paymentDone?e._router.navigate(["account/payment-completed"]):e.controlAgain()}),(function(t){e.controlAgain()}))},t.prototype.controlAgain=function(){var e=this;0!==this.maxControlCount&&(setTimeout((function(){e.getPaymentResult()}),this.controlTimeout),this.controlTimeout*=2,this.maxControlCount--)},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](b.hc),l["\u0275\u0275directiveInject"](f.a),l["\u0275\u0275directiveInject"](f.e),l["\u0275\u0275directiveInject"](Wt.d))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["stripe-payment-result"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:12,vars:10,consts:[[1,"d-flex","h-100","align-items-center",2,"padding-bottom","150px !important"],[1,"login-formalign-middle","m-0"],[1,"pb-13","pt-lg-0","pt-5"],[1,"font-weight-bolder","text-dark","font-size-h4","font-size-h1-lg"],[1,"text-center"],[2,"position","relative","margin-top","60px !important"],[3,"busyIf"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"h3",3),l["\u0275\u0275text"](4),l["\u0275\u0275pipe"](5,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"p",4),l["\u0275\u0275text"](7),l["\u0275\u0275pipe"](8,"localize"),l["\u0275\u0275pipe"](9,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",5),l["\u0275\u0275element"](11,"div",6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](5,4,"PleaseWait")," "),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate2"](" ",l["\u0275\u0275pipeBind1"](8,6,"ReceivingPaymentResult")," ",l["\u0275\u0275pipeBind1"](9,8,"PleaseWait")," "),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("busyIf",!0))},directives:[ki.a],pipes:[on.a],encapsulation:2}),t}(v.a),Di=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bi=function(e){function t(t){return e.call(this,t)||this}return Di(t,e),t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["payment-completed"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:14,vars:9,consts:[[1,"d-flex","h-100","align-items-center",2,"padding-bottom","150px !important"],[1,"login-form","align-middle","m-0","text-center"],[1,"pb-13","pt-lg-0","pt-5"],[1,"font-weight-bolder","text-dark","font-size-h4","font-size-h1-lg"],[1,"text-center"],[1,"my-5"],[1,"fas","fa-check","fa-4x","text-success"],["href","/app/admin/subscription-management",1,"btn","btn-info"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"h3",3),l["\u0275\u0275text"](4),l["\u0275\u0275pipe"](5,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"p",4),l["\u0275\u0275text"](7),l["\u0275\u0275pipe"](8,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",5),l["\u0275\u0275element"](10,"i",6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"a",7),l["\u0275\u0275text"](12),l["\u0275\u0275pipe"](13,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](5,3,"ThankYou")," "),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](8,5,"YourPaymentHasBeenCompleted")," "),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](13,7,"GoToSubscriptionManagement"),""))},pipes:[on.a],encapsulation:2}),t}(v.a),zi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Gi(e,t){if(1&e&&l["\u0275\u0275element"](0,"img",24),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("src",n.userInfo.profilePicture,l["\u0275\u0275sanitizeUrl"])}}function Ki(e,t){if(1&e&&l["\u0275\u0275element"](0,"validation-messages",25),2&e){l["\u0275\u0275nextContext"]();var n=l["\u0275\u0275reference"](25);l["\u0275\u0275property"]("formCtrl",n)}}var Vi=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o._profileService=n,o._reCaptchaV3Service=r,o.loginService=i,o.recaptchaSiteKey=y.a.recaptchaSiteKey,o.submitting=!1,o.getLastUserInfo(),o}return zi(t,e),t.prototype.getLastUserInfo=function(){var e=this,t=abp.utils.getCookieValue("userInfo");t||(location.href="");var n=JSON.parse(t);n||(location.href=""),this.loginService.authenticateModel.userNameOrEmailAddress=n.userName,this.userInfo={userName:n.userName,tenant:n.tenant,profilePicture:""},this._profileService.getProfilePictureByUserName(n.userName).subscribe((function(t){e.userInfo.profilePicture=t.profilePicture?"data:image/jpeg;base64,"+t.profilePicture:y.a.appBaseUrl+"/assets/common/images/default-profile-picture.png"}),(function(){e.userInfo.profilePicture=y.a.appBaseUrl+"/assets/common/images/default-profile-picture.png"}))},t.prototype.login=function(){var e=this,t=function(t){e.showMainSpinner(),e.submitting=!0,e.loginService.authenticate((function(){e.submitting=!1,e.hideMainSpinner()}),null,t)};this.useCaptcha?this._reCaptchaV3Service.execute(this.recaptchaSiteKey,"login",(function(e){t(e)})):t(null)},Object.defineProperty(t.prototype,"useCaptcha",{get:function(){return this.setting.getBoolean("App.UserManagement.UseCaptchaOnLogin")},enumerable:!0,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.Injector),l["\u0275\u0275directiveInject"](b.Mb),l["\u0275\u0275directiveInject"](d),l["\u0275\u0275directiveInject"](Yt))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["app-session-lock-screen"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:38,vars:20,consts:[[1,"card","card-bordered","gutter-b","card-stretch"],[1,"card-body","text-center","pt-4"],["role","alert",1,"alert","alert-custom","alert-light-warning"],[1,"alert-text",2,"font-weight","bold"],[1,"fa","fa-lock","float-right"],[1,"mt-7","pb-2"],[1,"symbol","symbol-circle","symbol-lg-75"],["class","symbol-label","alt","profileimage",3,"src",4,"ngIf"],[1,"my-2"],["href","#",1,"text-dark","font-weight-bold","text-hover-primary","font-size-h4"],[1,"text-dark","font-weight-normal","font-size-h4"],[1,"text-dark","font-weight-bold"],["method","post","novalidate","",1,"form","mt-4",3,"ngSubmit"],["loginForm","ngForm"],[1,"form-group"],["type","hidden","name","usernameOrEmailAddress"],["type","password","autocomplete","new-password","name","password","required","","maxlength","32",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","font-size-h6",3,"ngModel","placeholder","ngModelChange"],["passwordInput","ngModel"],[3,"formCtrl",4,"ngIf"],[1,"mt-9","mb-6"],[1,"col-5","mt-2","float-left"],[1,"checkbox"],["type","checkbox","name","rememberMe","value","true",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","font-weight-bolder","font-size-h6","col-4","float-right",3,"disabled"],["alt","profileimage",1,"symbol-label",3,"src"],[3,"formCtrl"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"div",3),l["\u0275\u0275text"](4),l["\u0275\u0275pipe"](5,"localize"),l["\u0275\u0275element"](6,"i",4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"div",5),l["\u0275\u0275elementStart"](8,"div",6),l["\u0275\u0275template"](9,Gi,1,1,"img",7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",8),l["\u0275\u0275elementStart"](11,"a",9),l["\u0275\u0275text"](12),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"div",8),l["\u0275\u0275elementStart"](14,"span",10),l["\u0275\u0275text"](15,"Tenant: "),l["\u0275\u0275elementStart"](16,"span",11),l["\u0275\u0275text"](17),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](18,"form",12,13),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.login()})),l["\u0275\u0275elementStart"](20,"div",8),l["\u0275\u0275elementStart"](21,"div",14),l["\u0275\u0275element"](22,"input",15),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](23,"div",14),l["\u0275\u0275elementStart"](24,"input",16,17),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.loginService.authenticateModel.password=e})),l["\u0275\u0275pipe"](26,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](27,Ki,1,1,"validation-messages",18),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](28,"div",19),l["\u0275\u0275elementStart"](29,"div",20),l["\u0275\u0275elementStart"](30,"label",21),l["\u0275\u0275elementStart"](31,"input",22),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.loginService.rememberMe=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](32),l["\u0275\u0275pipe"](33,"localize"),l["\u0275\u0275element"](34,"span"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](35,"button",23),l["\u0275\u0275text"](36),l["\u0275\u0275pipe"](37,"localize"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275reference"](19),r=l["\u0275\u0275reference"](25);l["\u0275\u0275property"]("@routerTransition",void 0),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](5,12,"YourSessionIsLocked")),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",t.userInfo&&t.userInfo.profilePicture),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](t.userInfo.userName),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](t.userInfo.tenant),l["\u0275\u0275advance"](7),l["\u0275\u0275propertyInterpolate1"]("placeholder","",l["\u0275\u0275pipeBind1"](26,14,"Password"),"*"),l["\u0275\u0275property"]("ngModel",t.loginService.authenticateModel.password),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",!r.touched),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngModel",t.loginService.rememberMe),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](33,16,"RememberMe")," "),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("disabled",!n.form.valid),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](37,18,"LogIn"))}},directives:[r.n,a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.NgForm,a.DefaultValueAccessor,a.RequiredValidator,a.MaxLengthValidator,a.NgControlStatus,a.NgModel,a.CheckboxControlValueAccessor,Ln.a],pipes:[on.a],styles:["app-session-lock-screen[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column}"],data:{animation:[Object(Un.a)()]}}),t}(v.a),Wi=function(){function e(e,t){var n=this;this.router=e,this._uiCustomizationService=t,e.events.subscribe((function(e){setTimeout((function(){n.toggleBodyCssClass(e.url)}),0)}))}return e.prototype.toggleBodyCssClass=function(e){e?e.indexOf("/account/")>=0?this.setAccountModuleBodyClassInternal():document.body.className=this._uiCustomizationService.getAppModuleBodyClass():this.setAccountModuleBodyClassInternal()},e.prototype.setAccountModuleBodyClassInternal=function(){var e="";document.body.className.indexOf("swal2-toast-shown")>=0&&(e+=" swal2-toast-shown"),document.body.className=this._uiCustomizationService.getAccountModuleBodyClass()+" "+e},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)(l["\u0275\u0275inject"](f.e),l["\u0275\u0275inject"](g.a))},imports:[[f.i.forChild([{path:"",component:kn,children:[{path:"",redirectTo:"login"},{path:"login",component:Wn,canActivate:[Rn]},{path:"register",component:ai,canActivate:[Rn]},{path:"register-tenant",component:ei,canActivate:[Rn]},{path:"register-tenant-result",component:zr,canActivate:[Rn]},{path:"forgot-password",component:or,canActivate:[Rn]},{path:"reset-password",component:hr,canActivate:[Rn]},{path:"email-activation",component:Hn,canActivate:[Rn]},{path:"confirm-email",component:Nn,canActivate:[Rn]},{path:"send-code",component:Yn,canActivate:[Rn]},{path:"verify-code",component:nr,canActivate:[Rn]},{path:"buy",component:wr},{path:"extend",component:Hr},{path:"upgrade",component:Ar},{path:"select-edition",component:xi},{path:"paypal-purchase",component:Ni},{path:"stripe-purchase",component:ji},{path:"stripe-payment-result",component:Fi},{path:"stripe-cancel-payment",component:Mi},{path:"payment-completed",component:Bi},{path:"session-locked",component:Vi},{path:"**",redirectTo:"login"}]}])],f.i]}),e}(),Qi=n("+yPr"),Xi=n("S56A");function Ji(){return(new Qi.a).map("recaptcha",abp.localization.currentLanguage.name)}var Yi=function(){function e(){}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[Yt,Mr,mr,Rn],imports:[[r.c,a.FormsModule,i.d,i.c,h,m.b.forRoot(),o.a,c.a,s.a,Wi,Re.forRoot(),Qr,Xi.a]]}),e}()}}]);